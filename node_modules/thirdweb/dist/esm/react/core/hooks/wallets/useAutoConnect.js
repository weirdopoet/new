"use client";
import { useQuery } from "@tanstack/react-query";
import { autoConnectCore } from "../../../../wallets/connection/autoConnectCore.js";
import { useConnectionManagerCtx } from "../../providers/connection-manager.js";
import { setLastAuthProvider } from "../../utils/storage.js";
import { useConnect } from "./useConnect.js";
export function useAutoConnectCore(storage, props, createWalletFn, getInstalledWallets) {
    const manager = useConnectionManagerCtx("useAutoConnect");
    const { connect } = useConnect({
        accountAbstraction: props.accountAbstraction,
        client: props.client,
    });
    // trigger the auto connect on first mount only
    const query = useQuery({
        queryFn: () => autoConnectCore({
            connectOverride: connect,
            createWalletFn,
            getInstalledWallets,
            manager,
            props,
            setLastAuthProvider,
            storage,
        }),
        queryKey: ["autoConnect", props.client.clientId],
        refetchOnMount: false,
        refetchOnWindowFocus: false,
    });
    return query;
}
//# sourceMappingURL=useAutoConnect.js.map