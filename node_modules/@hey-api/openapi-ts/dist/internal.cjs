'use strict';var cr=require('path'),c12=require('c12'),$o=require('fs'),sn=require('ansi-colors'),url=require('url'),O=require('typescript'),os$1=require('os'),codegenCore=require('@hey-api/codegen-core'),Tn=require('semver'),jsonSchemaRefParser=require('@hey-api/json-schema-ref-parser');var _documentCurrentScript=typeof document!=='undefined'?document.currentScript:null;function _interopDefault(e){return e&&e.__esModule?e:{default:e}}function _interopNamespace(e){if(e&&e.__esModule)return e;var n=Object.create(null);if(e){Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k]}});}})}n.default=e;return Object.freeze(n)}var cr__default=/*#__PURE__*/_interopDefault(cr);var $o__default=/*#__PURE__*/_interopDefault($o);var sn__default=/*#__PURE__*/_interopDefault(sn);var O__default=/*#__PURE__*/_interopDefault(O);var Tn__namespace=/*#__PURE__*/_interopNamespace(Tn);var qc=url.fileURLToPath((typeof document === 'undefined' ? require('u' + 'rl').pathToFileURL(__filename).href : (_documentCurrentScript && _documentCurrentScript.tagName.toUpperCase() === 'SCRIPT' && _documentCurrentScript.src || new URL('internal.cjs', document.baseURI).href)));cr__default.default.dirname(qc);var pn=e=>{$o__default.default.existsSync(e)||$o__default.default.mkdirSync(e,{recursive:true});};var Jt=({moduleOutput:e,sourceOutput:t})=>{let r=t.split("/");return `${Array.from({length:r.length}).fill("").join("../")||"./"}${e}`};var kr=class extends Error{},cn=class extends Error{args;event;pluginName;constructor({args:t,error:r,event:s,name:o,pluginName:i}){let a=r instanceof Error?r.message:"Unknown error";super(a),this.args=t,this.cause=r.cause,this.event=s,this.name=o||r.name,this.pluginName=i,this.stack=r.stack;}};var le="client",de=e=>{let t=k(e);return t.name==="@hey-api/client-axios"||t.name==="@hey-api/client-nuxt"?"baseURL":"baseUrl"},k=e=>{for(let t of e.pluginOrder){let r=e.plugins[t];if(r?.tags?.includes("client"))return r}return {config:{name:""},name:""}};var Fo,A=()=>{let e=Fo,t=k(e);return e.client=t,e},Mo=e=>(Fo=e,A()),re=e=>k(e).name.startsWith("legacy/"),qt=e=>{if(re(e))return e.name};var $c=/^([\w-]+)\/([\w-]+)(?:\?([\w=&.-]*))?$/,Yt="https://get.heyapi.dev",Fc=(e,t,r)=>`${Yt}/${e}/${t}${r?`?${r}`:""}`,Mc=e=>{let t=e.organization,r=e.project,s;if(e.path){let i=e.path.match($c);if(!i)throw new Error(`Invalid Hey API shorthand format. Expected "organization/project?queryParams" or "organization/project", received: ${e.path}`);t=i[1],r=i[2],s=i[3];}if(!t)throw new Error("The Hey API organization cannot be empty.");if(!r)throw new Error("The Hey API project cannot be empty.");return {organization:t,project:r,queryParams:s}},ks=e=>{let t=Mc(e);return Fc(t.organization,t.project,t.queryParams)};var Lc=/^(@([\w-]+)\/([\w\-.]+)#)?([\w-]+)$/,Dc=e=>`https://dash.readme.com/api/v1/api-registry/${e}`,mn="readme",Vc=e=>{let t=e.match(Lc);if(!t)throw new Error(`Invalid ReadMe shorthand format. Expected "${mn}:@organization/project#uuid" or "${mn}:uuid", received: ${mn}:${e}`);let[,,r,s,o]=t;if(!o)throw new Error("The ReadMe UUID cannot be empty.");return {organization:r,project:s,uuid:o}},Lo=e=>{let t=e.slice(`${mn}:`.length),r=Vc(t);return Dc(r.uuid)};var Bc=/^(@[\w-]+)\/([\w.-]+)$/,_c=(e,t)=>`https://registry.scalar.com/${e}/apis/${t}/latest?format=json`,Cs="scalar",Kc=e=>{let t=e.match(Bc);if(!t)throw new Error(`Invalid Scalar shorthand format. Expected "${Cs}:@organization/project", received: ${Cs}:${e}`);let[,r,s]=t;if(!r)throw new Error("The Scalar organization cannot be empty.");if(!s)throw new Error("The Scalar project cannot be empty.");return {organization:r,project:s}},Do=e=>{let t=e.slice(`${Cs}:`.length),r=Kc(t);return _c(r.organization,r.project)};var Vo=e=>{if(e.path.startsWith("readme:")){e.path=Lo(e.path);return}if(e.path.startsWith("scalar:")){e.path=Do(e.path);return}if(e.path.startsWith("."))return;if(e.path.startsWith(Yt)){e.path=e.path.slice(Yt.length+1),e.path=ks(e);return}let t=e.path.split("/"),r=t.filter(Boolean);t.length===2&&r.length===2&&(e.path=ks(e));};var Cr={enabled:false,interval:1e3,timeout:6e4},Bo=e=>{let t={...Cr};return typeof e.path!="string"||(typeof e.watch=="boolean"?t.enabled=e.watch:typeof e.watch=="number"?(t.enabled=true,t.interval=e.watch):e.watch&&(t={...t,...e.watch})),t},_o=e=>{let t={path:"",watch:Cr};return typeof e.input=="string"?t.path=e.input:e.input&&(e.input.path!==void 0||e.input.organization!==void 0)?(t={...t,path:Yt,...e.input},t.watch!==void 0&&(t.watch=Bo(t))):t={...t,path:e.input},typeof t.path=="string"&&Vo(t),e.watch!==void 0&&t.watch.enabled===Cr.enabled&&t.watch.interval===Cr.interval&&t.watch.timeout===Cr.timeout&&(t.watch=Bo({path:t.path,watch:e.watch})),t};var Ko=e=>{let t={file:true,level:"info",path:process.cwd()};return typeof e?.logs=="string"?t.path=e.logs:t={...t,...e?.logs},t};var zc=(e,t)=>({...e||{},...t||{}}),vs=(e,t)=>{let r=e||{},s=t||{},o={...r,...s};return typeof o.logs=="object"&&(o.logs=zc(r.logs,s.logs)),o};var zo=e=>{let t={clean:true,format:false,indexFile:true,lint:false,path:"",tsConfigPath:""};return typeof e.output=="string"?t.path=e.output:t={...t,...e.output},t};var Ho=e=>{let t=e?cr__default.default.dirname(e):process.cwd();for(;t!==cr__default.default.dirname(t);){let r=cr__default.default.join(t,"package.json");if($o__default.default.existsSync(r))try{let o=JSON.parse($o__default.default.readFileSync(r,"utf8"));return {...o.dependencies,...o.devDependencies,...o.peerDependencies,...o.optionalDependencies}}catch{}let s=cr__default.default.dirname(t);if(s===t)break;t=s;}return {}};var Wc=e=>typeof e=="object"&&e!==null&&!Array.isArray(e)&&typeof e!="function",er=(e,t)=>{for(let[r,s]of Object.entries(t))s!==void 0&&s!==""&&(e[r]=s);return e},$t=({defaultValue:e,mappers:t,value:r})=>{let s={...e};switch(typeof r){case "boolean":if(t&&"boolean"in t){let o=t.boolean;s=er(s,o(r));}break;case "function":if(t&&"function"in t){let o=t.function;s=er(s,o(r));}break;case "number":if(t&&"number"in t){let o=t.number;s=er(s,o(r));}break;case "string":if(t&&"string"in t){let o=t.string;s=er(s,o(r));}break;case "object":if(Wc(r))if(t&&"object"in t&&typeof t.object=="function"){let o=t.object;s=er(s,o(r,e));}else s=er(s,r);break}return s};var Hc=["after","before","cursor","offset","page","start"],Qo=e=>{let t={...e.parser,hooks:{},pagination:{keywords:Hc},transforms:{enums:{case:"PascalCase",enabled:false,mode:"root",name:"{{name}}Enum"},readWrite:{enabled:true,requests:{case:"preserve",name:"{{name}}Writable"},responses:{case:"preserve",name:"{{name}}"}}},validate_EXPERIMENTAL:false};return e.parser&&(e.parser.pagination?.keywords&&(t.pagination.keywords=e.parser.pagination.keywords),e.parser.transforms&&(e.parser.transforms.enums!==void 0&&(t.transforms.enums=$t({defaultValue:{...t.transforms.enums,enabled:!!e.parser.transforms.enums},mappers:{boolean:r=>({enabled:r}),string:r=>({mode:r})},value:e.parser.transforms.enums})),e.parser.transforms.readWrite!==void 0&&(t.transforms.readWrite=$t({defaultValue:{...t.transforms.readWrite,enabled:!!e.parser.transforms.readWrite},mappers:{boolean:r=>({enabled:r}),object:r=>({...r,requests:$t({defaultValue:t.transforms.readWrite.requests,mappers:{function:s=>({name:s}),string:s=>({name:s})},value:r.requests}),responses:$t({defaultValue:t.transforms.readWrite.responses,mappers:{function:s=>({name:s}),string:s=>({name:s})},value:r.responses})})},value:e.parser.transforms.readWrite}))),e.parser.validate_EXPERIMENTAL&&(t.validate_EXPERIMENTAL=e.parser.validate_EXPERIMENTAL===true?"warn":e.parser.validate_EXPERIMENTAL)),t};var Me={boolean:e=>({enabled:e}),function:e=>({name:e}),string:e=>({name:e})};var Uo=/[\p{Lu}]/u,ws=/[\p{Ll}]/u,Xo=/([\p{Alpha}\p{N}_]|$)/u,tr=/[_.\- `\\[\]{}\\/]+/,Qc=new RegExp(`^${tr.source}`),qs=new RegExp(`${tr.source}${Xo.source}`,"gu"),Zo=new RegExp(`\\d+${Xo.source}`,"gu"),Uc=({case:e,string:t})=>{let r=false,s=false,o=false,i=false,a=e==="snake_case"||e==="SCREAMING_SNAKE_CASE"?"_":"-";for(let p=0;p<t.length;p++){let c=t[p];i=p>2?t[p-3]===a:true;let m=p+1,f=t[m];for(tr.lastIndex=0;f&&tr.test(f);)m+=1,f=t[m];let l=m!==p+1;if(ws.lastIndex=0,Uo.lastIndex=0,Uo.test(c)&&(r||f&&!l&&f!=="s"&&ws.test(f)))t=`${t.slice(0,p)}${a}${t.slice(p)}`,p++,o=s,r=false,s=true;else if(s&&o&&ws.test(c)&&!i&&!(c==="s"&&(!f||f.toLocaleLowerCase()!==f)))t=`${t.slice(0,p-1)}${a}${t.slice(p-1)}`,o=s,r=true,s=false;else {let d=c.toLocaleLowerCase(),y=c.toLocaleUpperCase();o=s,r=d===c&&y!==c,s=y===c&&d!==c;}}return t},E=({case:e,stripLeadingSeparators:t=true,value:r})=>{let s=r.trim();return s.length?!e||e==="preserve"?s:s.length===1?(tr.lastIndex=0,tr.test(s)?"":e==="PascalCase"||e==="SCREAMING_SNAKE_CASE"?s.toLocaleUpperCase():s.toLocaleLowerCase()):(s!==s.toLocaleLowerCase()&&(s=Uc({case:e,string:s})),(t||s[0]!==r[0])&&(s=s.replace(Qc,"")),s=e==="SCREAMING_SNAKE_CASE"?s.toLocaleUpperCase():s.toLocaleLowerCase(),e==="PascalCase"&&(s=`${s.charAt(0).toLocaleUpperCase()}${s.slice(1)}`),e==="snake_case"||e==="SCREAMING_SNAKE_CASE"?(s=s.replaceAll(qs,(i,a,p)=>p===0&&!t?i:`_${a}`),s[s.length-1]==="_"&&(s=s.slice(0,s.length-1))):(qs.lastIndex=0,Zo.lastIndex=0,s=s.replaceAll(Zo,(i,a,p)=>["_","-","."].includes(s.charAt(p+i.length))?i:i.toLocaleUpperCase()),s=s.replaceAll(qs,(i,a,p)=>p===0&&!t&&i[0]&&r.startsWith(i[0])?i:a.toLocaleUpperCase())),s):""};var P=({config:e,name:t})=>{if(typeof e.name=="function")t=e.name(t);else if(e.name){let r=e.case==="preserve"?"":"-";t=e.name.replace("{{name}}",`${r}${t}${r}`);}return E({case:e.case,value:t})};var rr=/^[^$_\p{ID_Start}]+/u,ne=/^-?\d+(\.\d+)?$/,Go=/^(document|history|location|navigator|window)$/g,Jo=/^(console|Array|Date|Error|Function|JSON|Map|Math|Object|Promise|RegExp|Set|WeakMap|WeakSet)$/g,Re=/^(arguments|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|eval|export|extends|false|finally|for|from|function|if|implements|import|in|instanceof|interface|let|new|null|package|private|protected|public|return|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)$/g,Yo=/^(global|process|Buffer)$/g,ei=/^(any|as|bigint|boolean|namespace|never|null|number|string|symbol|type|undefined|unknown|void)$/g,ve=/^[$_\p{ID_Start}][$\u200c\u200d\p{ID_Continue}]*$/u;var ot=e=>(e||e==="")&&(ve.lastIndex=0,!ve.test(e))?`'${e}'`:e,vr=e=>e&&e.startsWith("'")&&e.endsWith("'")?e.slice(1,e.length-1):e,K=e=>e.replace(/\*\//g,"*").replace(/\/\*/g,"*").replace(/\r?\n(.*)/g,(t,r)=>os$1.EOL+r.trim());var Xc=O__default.default.createPrinter({newLine:O__default.default.NewLineKind.LineFeed,removeComments:false}),Gc=e=>O__default.default.createSourceFile("",e,O__default.default.ScriptTarget.ESNext,false,O__default.default.ScriptKind.TS),Jc=Gc(""),Yc=e=>e.replace(/\\u([0-9a-fA-F]{4})/g,(t,r)=>String.fromCharCode(Number.parseInt(r,16)));function me({node:e,unescape:t=false}){let r=Xc.printNode(O__default.default.EmitHint.Unspecified,e,Jc);if(!t)return r;try{return Yc(r)}catch{return A().logs.level==="debug"&&console.warn("Could not decode value:",r),r}}var I=({text:e})=>O__default.default.factory.createIdentifier(e),ti=()=>O__default.default.factory.createThis(),G=({keyword:e})=>{let t=$s({keyword:e});return O__default.default.factory.createModifier(t)},ri=({initializer:e,modifier:t,name:r,type:s})=>O__default.default.factory.createPropertyDeclaration(t?[G({keyword:t})]:void 0,r,void 0,s,e),be={boolean:e=>e?O__default.default.factory.createTrue():O__default.default.factory.createFalse(),export:({alias:e,asType:t=false,name:r})=>{let s=I({text:r});if(e){let o=I({text:e});return O__default.default.factory.createExportSpecifier(t,s,o)}return O__default.default.factory.createExportSpecifier(t,void 0,s)},import:({alias:e,asType:t=false,name:r})=>{let s=I({text:r});if(e){let o=I({text:e});return O__default.default.factory.createImportSpecifier(t,s,o)}return O__default.default.factory.createImportSpecifier(t,void 0,s)},number:e=>e<0?O__default.default.factory.createPrefixUnaryExpression(O__default.default.SyntaxKind.MinusToken,O__default.default.factory.createNumericLiteral(Math.abs(e))):O__default.default.factory.createNumericLiteral(e),string:(e,t=false)=>{let r=e;t&&(r=vr(r));let s=r.includes("'")&&r.includes('"'),o=r.includes(`
`),i=r.startsWith("`"),a=r.startsWith("\\`")&&r.endsWith("\\`");return (o||s||i)&&!a&&(r=`\`${r.replace(/(?<!\\)`/g,"\\`").replace(/\${/g,"\\${")}\``),r.startsWith("`")?I({text:r}):Mt({text:r})}},Ft=e=>e!==null&&typeof e=="object"&&typeof e.kind=="number"&&typeof e.flags=="number"&&typeof e.pos=="number"&&typeof e.end=="number",Ot=e=>e!==void 0,em=({commentObject:e,node:t})=>{let r=e.lines.filter(a=>!!a||a==="");if(!r.length)return;if(!e.jsdoc){for(let a of r)O__default.default.addSyntheticLeadingComment(t,O__default.default.SyntaxKind.SingleLineCommentTrivia,` ${a}`,true);return}let s=r.map((a,p)=>{let c=a;return p!==r.length&&(c=`${c}
`),O__default.default.factory.createJSDocText(c)}),o=O__default.default.factory.createJSDocComment(O__default.default.factory.createNodeArray(s),void 0),i=me({node:o,unescape:true}).replace("/*","").replace("*  */","");O__default.default.addSyntheticLeadingComment(t,O__default.default.SyntaxKind.MultiLineCommentTrivia,i,true);},ie=({comments:e=[],node:t})=>{let r=!!e.find(o=>typeof o=="object"&&o),s=e;r||(s=[{jsdoc:true,lines:e}]);for(let o of s)em({commentObject:o,node:t});};var ae=(e,t)=>O__default.default.isTypeNode(e)?e:typeof e=="number"?O__default.default.factory.createLiteralTypeNode(be.number(e)):Ie({typeArguments:t?.map(r=>ae(r)),typeName:O__default.default.isIdentifier(e)?e.text:e}),Fs=({expression:e,name:t})=>O__default.default.factory.createPropertyAccessChain(e,O__default.default.factory.createToken(O__default.default.SyntaxKind.QuestionDotToken),t),De=({expression:e,isOptional:t,name:r})=>{let s=typeof e=="string"?I({text:e}):e;if(t&&typeof r!="number")return Fs({expression:s,name:r});if(typeof r=="string"){if(ve.lastIndex=0,!ve.test(r)){!r.startsWith("'")&&!r.endsWith("'")&&(r=`'${r}'`);let i=I({text:r});return O__default.default.factory.createElementAccessExpression(s,i)}let o=I({text:r});return O__default.default.factory.createPropertyAccessExpression(s,o)}if(typeof r=="number"){let o=O__default.default.factory.createNumericLiteral(r);return O__default.default.factory.createElementAccessExpression(s,o)}return O__default.default.factory.createPropertyAccessExpression(s,r)},Ms=()=>O__default.default.factory.createNull(),Le=({identifiers:e=[],isValueAccess:t,shorthand:r,unescape:s,value:o})=>{if(o===null)return Ms();if(Array.isArray(o))return Ls({elements:o});if(typeof o=="object")return yn({identifiers:e,obj:o,shorthand:r});if(typeof o=="number")return be.number(o);if(typeof o=="boolean")return be.boolean(o);if(typeof o=="string"){if(t){let i=o.split(".");return De({expression:i[0],name:i[1]})}return be.string(o,s)}},wr=e=>e.map(t=>{if("destructure"in t)return nr({name:O__default.default.factory.createObjectBindingPattern(t.destructure.map(s=>"destructure"in s?void 0:O__default.default.factory.createBindingElement(void 0,void 0,I({text:s.name}),void 0)).filter(Boolean)),type:t.type!==void 0?ae(t.type):void 0});let r=t.accessLevel?[G({keyword:t.accessLevel})]:[];return t.isReadOnly&&r.push(G({keyword:"readonly"})),nr({initializer:t.default!==void 0?Le({value:t.default}):void 0,modifiers:r,name:I({text:t.name}),required:t.isRequired!==false,type:t.type!==void 0?ae(t.type):void 0})}),$s=({keyword:e})=>{switch(e){case "any":return O__default.default.SyntaxKind.AnyKeyword;case "async":return O__default.default.SyntaxKind.AsyncKeyword;case "boolean":return O__default.default.SyntaxKind.BooleanKeyword;case "export":return O__default.default.SyntaxKind.ExportKeyword;case "never":return O__default.default.SyntaxKind.NeverKeyword;case "number":return O__default.default.SyntaxKind.NumberKeyword;case "private":return O__default.default.SyntaxKind.PrivateKeyword;case "protected":return O__default.default.SyntaxKind.ProtectedKeyword;case "public":return O__default.default.SyntaxKind.PublicKeyword;case "readonly":return O__default.default.SyntaxKind.ReadonlyKeyword;case "static":return O__default.default.SyntaxKind.StaticKeyword;case "string":return O__default.default.SyntaxKind.StringKeyword;case "undefined":return O__default.default.SyntaxKind.UndefinedKeyword;case "unknown":return O__default.default.SyntaxKind.UnknownKeyword;case "void":return O__default.default.SyntaxKind.VoidKeyword;default:throw new Error(`unsupported syntax kind keyword "${e}"`)}},Lt=({keyword:e})=>{let t=$s({keyword:e});return O__default.default.factory.createKeywordTypeNode(t)},qr=e=>e.map(t=>O__default.default.isTypeParameterDeclaration(t)?t:$r({constraint:t.extends?typeof t.extends=="string"?Lt({keyword:"boolean"}):t.extends:void 0,defaultType:t.default!==void 0?Ft(t.default)?t.default:O__default.default.factory.createLiteralTypeNode(t.default?O__default.default.factory.createTrue():O__default.default.factory.createFalse()):void 0,name:t.name})),ni=({operator:e,type:t})=>{let r=e==="keyof"?O__default.default.SyntaxKind.KeyOfKeyword:e==="readonly"?O__default.default.SyntaxKind.ReadonlyKeyword:O__default.default.SyntaxKind.UniqueKeyword;return O__default.default.factory.createTypeOperatorNode(r,t)},$r=({constraint:e,defaultType:t,modifiers:r,name:s})=>O__default.default.factory.createTypeParameterDeclaration(r,s,e,t),dn=({members:e,nameType:t,questionToken:r,readonlyToken:s,type:o,typeParameter:i})=>O__default.default.factory.createMappedTypeNode(s,i,t,r,o,e),si=({literal:e})=>O__default.default.factory.createLiteralTypeNode(e),un=({async:e,comment:t,multiLine:r,parameters:s=[],returnType:o,statements:i=[],types:a=[]})=>{let p=O__default.default.factory.createArrowFunction(e?[G({keyword:"async"})]:void 0,a?qr(a):void 0,wr(s),o?ae(o):void 0,void 0,Array.isArray(i)?Oe({multiLine:r,statements:i}):i);return ie({comments:t,node:p}),p},oi=({async:e,comment:t,multiLine:r,parameters:s=[],returnType:o,statements:i=[],types:a=[]})=>{let p=O__default.default.factory.createFunctionExpression(e?[G({keyword:"async"})]:void 0,void 0,void 0,a?qr(a):void 0,wr(s),o?ae(o):void 0,Oe({multiLine:r,statements:i}));return ie({comments:t,node:p}),p},Ls=({elements:e,multiLine:t=false})=>O__default.default.factory.createArrayLiteralExpression(e.map(s=>Ft(s)?s:Le({value:s})).filter(Ot),t||!Array.isArray(e[0])&&typeof e[0]=="object"),ii=({expression:e})=>O__default.default.factory.createAwaitExpression(e),ai=({parameters:e=[],returnType:t,typeParameters:r})=>O__default.default.factory.createFunctionTypeNode(r,e,t),yn=({comments:e,identifiers:t=[],multiLine:r=true,obj:s,shorthand:o,unescape:i=false})=>{let a=Array.isArray(s)?s.map(c=>{let m=false;if("key"in c){let{key:l}=c;m=l===c.value,(l.match(/^[0-9]/)&&l.match(/\D+/g)||l.match(/\W/g)||l==="")&&!l.startsWith("'")&&!l.endsWith("'")&&(c.key=`'${l}'`);}let f;if("spread"in c){let l=Ft(c.spread)?c.spread:I({text:c.spread});f=O__default.default.factory.createSpreadAssignment(c.assertion?Mr({expression:l,type:typeof c.assertion=="string"?Lt({keyword:c.assertion}):c.assertion}):l);}else if(c.shorthand||o&&m)f=O__default.default.factory.createShorthandPropertyAssignment(c.value);else {let l=Ft(c.value)?c.value:Array.isArray(c.value)&&(!c.value.length||typeof c.value[0]=="object")?yn({multiLine:r,obj:c.value,shorthand:o,unescape:i}):Le({identifiers:t.includes(c.key)?Object.keys(c.value):[],isValueAccess:c.isValueAccess,shorthand:o,unescape:i,value:c.value});if(!l)return;t.includes(c.key)&&!O__default.default.isObjectLiteralExpression(l)&&(l=I({text:c.value})),f=ln({initializer:l,name:c.key});}return ie({comments:c.comments,node:f}),f}).filter(Ot):Object.entries(s).map(([c,m])=>{let f=Le({identifiers:t.includes(c)?Object.keys(m):[],shorthand:o,unescape:i,value:m});if(!f)return;t.includes(c)&&!O__default.default.isObjectLiteralExpression(f)&&(f=I({text:m}));let l=c===m;return c.match(/^[0-9]/)&&c.match(/\D+/g)&&!c.startsWith("'")&&!c.endsWith("'")&&(c=`'${c}'`),c.match(/\W/g)&&!c.startsWith("'")&&!c.endsWith("'")&&(c=`'${c}'`),o&&l?O__default.default.factory.createShorthandPropertyAssignment(m):ln({initializer:f,name:c})}).filter(Ot),p=O__default.default.factory.createObjectLiteralExpression(a,r);return ie({comments:e,node:p}),p},pi=({asConst:e,comments:t={},leadingComment:r,name:s,obj:o})=>{let i=Array.isArray(o)?o.map(f=>{let l=rm({initializer:Le({value:f.value}),name:f.key});return ie({comments:f.comments,node:l}),l}):Object.entries(o).map(([f,l])=>{let d=O__default.default.factory.createEnumMember(f,Le({unescape:true,value:l}));return ie({comments:t[f],node:d}),d}),a=[G({keyword:"export"})],p=e?[O__default.default.factory.createToken(O__default.default.SyntaxKind.ConstKeyword)]:[],c=[...a,...p],m=O__default.default.factory.createEnumDeclaration(c,typeof s=="string"?I({text:s}):s,i);return ie({comments:r,node:m}),m},rm=({initializer:e,name:t})=>{let r=t;return typeof r=="string"&&(r.includes("'")?r=Mt({isSingleQuote:false,text:r}):r=ot(r)),O__default.default.factory.createEnumMember(r,e)},ci=({name:e,statements:t})=>O__default.default.factory.createModuleDeclaration([G({keyword:"export"})],I({text:e}),O__default.default.factory.createModuleBlock(t),O__default.default.NodeFlags.Namespace),mi=({indexType:e,objectType:t})=>O__default.default.factory.createIndexedAccessTypeNode(t,e),fi=({name:e,returnType:t,statements:r})=>O__default.default.factory.createGetAccessorDeclaration(void 0,e,[],t?Ie({typeName:t}):void 0,Oe({statements:r})),Mt=({isSingleQuote:e,text:t})=>(e===void 0&&(e=!t.includes("'")),O__default.default.factory.createStringLiteral(t,e)),li=({condition:e,whenFalse:t,whenTrue:r})=>O__default.default.factory.createConditionalExpression(e,O__default.default.factory.createToken(O__default.default.SyntaxKind.QuestionToken),r,O__default.default.factory.createToken(O__default.default.SyntaxKind.ColonToken),t),di=({text:e})=>O__default.default.factory.createTypeOfExpression(typeof e=="string"?I({text:e}):e),ui=({comment:e,exportType:t,name:r,type:s,typeParameters:o=[]})=>{let i=O__default.default.factory.createTypeAliasDeclaration(t?[G({keyword:"export"})]:void 0,typeof r=="string"?I({text:r}):r,qr(o),ae(s));return ie({comments:e,node:i}),i},Ie=({typeArguments:e,typeName:t})=>O__default.default.factory.createTypeReferenceNode(t,e),yi=({type:e})=>O__default.default.factory.createParenthesizedType(e),nr=({initializer:e,modifiers:t,name:r,required:s=true,type:o})=>O__default.default.factory.createParameterDeclaration(t,void 0,r,s?void 0:O__default.default.factory.createToken(O__default.default.SyntaxKind.QuestionToken),o,e),Fr=({argumentsArray:e,expression:t,typeArguments:r})=>O__default.default.factory.createNewExpression(t,r,e),gi=({awaitModifier:e,expression:t,initializer:r,statement:s})=>O__default.default.factory.createForOfStatement(e,r,t,s),hi=({left:e,right:t})=>O__default.default.factory.createAssignment(e,t),Oe=({multiLine:e=true,statements:t})=>O__default.default.factory.createBlock(t,e),ln=({initializer:e,name:t})=>O__default.default.factory.createPropertyAssignment(t,e),xi=({flags:e=[],text:t})=>{let r=t.startsWith("/")&&t.endsWith("/")?t:`/${t}/`;return O__default.default.factory.createRegularExpressionLiteral(`${r}${e.join("")}`)},Mr=({expression:e,type:t})=>O__default.default.factory.createAsExpression(e,t),bi=({value:e})=>{let t=[],r="";for(let o of e.slice(0).reverse())if(typeof o=="string")r=`${o}${r}`;else {let i=t.length?O__default.default.factory.createTemplateMiddle(r):O__default.default.factory.createTemplateTail(r),a=O__default.default.factory.createTemplateLiteralTypeSpan(o,i);t.push(a),r="";}return O__default.default.factory.createTemplateLiteralType(O__default.default.factory.createTemplateHead(r),t.reverse())};var Oi=({module:e,shouldAppendJs:t})=>O__default.default.factory.createExportDeclaration(void 0,false,void 0,be.string(t?`${e}.js`:e)),Ve=({functionName:e,parameters:t=[],types:r})=>{let s=typeof e=="string"?I({text:e}):e,o=t.filter(a=>a!==void 0).map(a=>typeof a=="string"?I({text:a}):a);return O__default.default.factory.createCallExpression(s,r,o)},Si=({exports:e,module:t})=>{let r=Array.isArray(e)?e:[e],s=r.some(c=>typeof c!="object"||!c.asType),o=r.map(c=>{let m=typeof c=="string"?{name:c}:c;return be.export({alias:m.alias,asType:s&&m.asType,name:m.name})}),i=O__default.default.factory.createNamedExports(o),a=be.string(t);return O__default.default.factory.createExportDeclaration(void 0,!s,i,a)},Ti=({assertion:e,comment:t,destructure:r,exportConst:s,expression:o,name:i,typeName:a})=>{let p=e?Mr({expression:o,type:typeof e=="string"?Ie({typeName:e}):e}):o,c=typeof i=="string"?I({text:i}):i,m=O__default.default.factory.createVariableDeclaration(r?O__default.default.factory.createObjectBindingPattern([O__default.default.factory.createBindingElement(void 0,void 0,c,void 0)]):c,void 0,a?typeof a=="string"?Ie({typeName:a}):a:void 0,p),f=O__default.default.factory.createVariableStatement(s?[G({keyword:"export"})]:void 0,O__default.default.factory.createVariableDeclarationList([m],O__default.default.NodeFlags.Const));return ie({comments:t,node:f}),f},Ri=({imports:e,module:t})=>{let r=Array.isArray(e)?e:[e],s=r.some(f=>typeof f!="object"||!f.asType),o,i=[];r.forEach(f=>{let l=typeof f=="string"?{name:f}:f;l.name==="*"&&l.alias?o=l:i.push(be.import({alias:l.alias,asType:s&&l.asType,name:l.name}));});let a=o?O__default.default.factory.createNamespaceImport(I({text:o.alias})):O__default.default.factory.createNamedImports(i),p=O__default.default.factory.createImportClause(!s,void 0,a),c=be.string(t);return O__default.default.factory.createImportDeclaration(void 0,p,c)};var Ii=({accessLevel:e,comment:t,multiLine:r=true,parameters:s=[],statements:o=[]})=>{let i=e?[G({keyword:e})]:void 0,a=O__default.default.factory.createConstructorDeclaration(i,wr(s),Oe({multiLine:r,statements:o}));return ie({comments:t,node:a}),a},Pi=({accessLevel:e,comment:t,isStatic:r=false,multiLine:s=true,name:o,parameters:i=[],returnType:a,statements:p=[],types:c=[]})=>{let m=e?[G({keyword:e})]:[];r&&m.push(G({keyword:"static"}));let f=O__default.default.factory.createMethodDeclaration(m,void 0,I({text:o}),void 0,c?qr(c):void 0,wr(i),a?ae(a):void 0,Oe({multiLine:s,statements:p}));return ie({comments:t,node:f}),f},Ai=({decorator:e,exportClass:t,extendedClasses:r,name:s,nodes:o})=>{let i=[];t&&i.push(G({keyword:"export"})),e&&i.unshift(O__default.default.factory.createDecorator(Ve({functionName:e.name,parameters:e.args.map(p=>Le({value:p})).filter(Ot)})));let a=[];if(r)for(let p of r)a.push(O__default.default.factory.createHeritageClause(O__default.default.SyntaxKind.ExtendsKeyword,[O__default.default.factory.createExpressionWithTypeArguments(I({text:p}),void 0)]));return O__default.default.factory.createClassDeclaration(i,I({text:s}),void 0,a,o)};var Vt=({expression:e})=>O__default.default.factory.createExpressionStatement(e);var gn=({expression:e})=>O__default.default.factory.createReturnStatement(e),Ni=({args:e=[],name:t,types:r=[]})=>{let s=r.map(p=>Ie({typeName:p})),o=e.map(p=>O__default.default.isExpression(p)?p:I({text:p})).filter(Ot),i=Ve({functionName:t,parameters:o,types:s});return gn({expression:i})},ji=({expression:e})=>gn({expression:typeof e=="string"?I({text:e}):e});var sr=e=>e.slice(1).reduce((t,r)=>(ve.lastIndex=0,ve.test(r)?Fs({expression:t,name:r}):O__default.default.factory.createElementAccessChain(t,O__default.default.factory.createToken(O__default.default.SyntaxKind.QuestionDotToken),I({text:r}))),I({text:e[0]})),hn=e=>e.slice(1).reduce((t,r)=>De({expression:t,name:r}),I({text:e[0]})),ki=({expressions:e})=>e.reduce((r,s)=>De({expression:r,name:s})),xn=({left:e,operator:t="=",right:r})=>O__default.default.factory.createBinaryExpression(e,t==="="?O__default.default.SyntaxKind.EqualsToken:t==="==="?O__default.default.SyntaxKind.EqualsEqualsEqualsToken:t==="??"?O__default.default.SyntaxKind.QuestionQuestionToken:O__default.default.SyntaxKind.InKeyword,typeof r=="string"?I({text:r}):r),or=({elseStatement:e,expression:t,thenStatement:r})=>O__default.default.factory.createIfStatement(t,r,e),Ci=({path:e})=>{let t=sr(e),r=hn(e),s=Oe({statements:[Vt({expression:xn({left:r,right:Fr({argumentsArray:[r],expression:I({text:"Date"})})})})]});return or({expression:t,thenStatement:s})},vi=({path:e,transformerName:t})=>{let r=sr(e),s=hn(e),o=Oe({statements:[Vt({expression:Ve({functionName:t,parameters:[s]})})]});return [or({expression:r,thenStatement:o})]},wi=({path:e,transformerName:t})=>{let r=sr(e),s=hn(e);return or({expression:Ve({functionName:De({expression:"Array",name:"isArray"}),parameters:[r]}),thenStatement:Oe({statements:[Vt({expression:O__default.default.factory.createCallChain(De({expression:s,name:"forEach"}),void 0,void 0,[I({text:t})])})]})})},qi=({parameterName:e})=>{let t=I({text:"Date"});return Fr({argumentsArray:[I({text:e})],expression:t})},$i=({path:e,transformExpression:t})=>{let r=sr(e),s=hn(e);return or({expression:Ve({functionName:De({expression:"Array",name:"isArray"}),parameters:[r]}),thenStatement:Oe({statements:[Vt({expression:xn({left:s,right:O__default.default.factory.createCallChain(De({expression:s,name:"map"}),void 0,void 0,[un({parameters:[{name:"item"}],statements:t})])})})]})})};var mm=Ie({typeName:"null"}),ir=({isNullable:e,node:t})=>e?O__default.default.factory.createUnionTypeNode([t,mm]):t,Ds=({indexKey:e,indexProperty:t,isNullable:r,properties:s,useLegacyResolution:o})=>{let a=s.map(m=>{let f=m.isReadOnly?[G({keyword:"readonly"})]:void 0,l=m.isRequired!==false?void 0:O__default.default.factory.createToken(O__default.default.SyntaxKind.QuestionToken),d=ae(m.type);let y=O__default.default.factory.createPropertySignature(f,o||typeof m.name=="string"&&m.name.match(ve)||typeof m.name!="string"&&O__default.default.isPropertyName(m.name)?m.name:Mt({text:m.name}),l,d);return ie({comments:m.comment,node:y}),y}),p=false;if(t)if(!s.length&&e){let m=dn({questionToken:O__default.default.factory.createToken(O__default.default.SyntaxKind.QuestionToken),type:t.type??Lt({keyword:"string"}),typeParameter:$r({constraint:e,name:I({text:String(t.name)})})});a.push(m),p=true;}else {let m=t.isReadOnly?[G({keyword:"readonly"})]:void 0,f=O__default.default.factory.createIndexSignature(m,[nr({name:I({text:String(t.name)}),type:Lt({keyword:"string"})})],ae(t.type));a.push(f);}let c=p?a[0]:O__default.default.factory.createTypeLiteralNode(a);return ir({isNullable:r,node:c})},Lr=({isNullable:e,types:t})=>{let r=t.map(o=>ae(o)),s=O__default.default.factory.createUnionTypeNode(r);return ir({isNullable:e,node:s})},Fi=({isNullable:e,types:t})=>{let r=t.map(o=>ae(o)),s=O__default.default.factory.createIntersectionTypeNode(r);return ir({isNullable:e,node:s})},Mi=({isNullable:e=false,types:t})=>{let r=t.map(o=>ae(o)),s=O__default.default.factory.createTupleTypeNode(r);return ir({isNullable:e,node:s})},Li=(e,t,r=false,s=true)=>{let o=Lr({types:e}),i=Lr({types:t}),a=Ds({properties:[{name:`[key: ${me({node:o,unescape:true})}]`,type:i}],useLegacyResolution:s});return ir({isNullable:r,node:a})},Di=(e,t=false)=>{let r=Ie({typeArguments:[Array.isArray(e)?Lr({types:e}):e],typeName:"Array"});return ir({isNullable:t,node:r})};var n={anonymousFunction:oi,arrayLiteralExpression:Ls,arrowFunction:un,asExpression:Mr,assignment:hi,awaitExpression:ii,binaryExpression:xn,block:Oe,callExpression:Ve,classDeclaration:Ai,conditionalExpression:li,constVariable:Ti,constructorDeclaration:Ii,enumDeclaration:pi,exportAllDeclaration:Oi,exportNamedDeclaration:Si,expressionToStatement:Vt,forOfStatement:gi,functionTypeNode:ai,getAccessorDeclaration:fi,identifier:I,ifStatement:or,indexedAccessTypeNode:mi,isTsNode:Ft,keywordTypeNode:Lt,literalTypeNode:si,mappedTypeNode:dn,methodDeclaration:Pi,namedImportDeclarations:Ri,namespaceDeclaration:ci,newExpression:Fr,nodeToString:me,null:Ms,objectExpression:yn,ots:be,parameterDeclaration:nr,propertyAccessExpression:De,propertyAccessExpressions:ki,propertyAssignment:ln,propertyDeclaration:ri,regularExpressionLiteral:xi,returnFunctionCall:Ni,returnStatement:gn,returnVariable:ji,safeAccessExpression:sr,stringLiteral:Mt,templateLiteralType:bi,this:ti,transformArrayMap:$i,transformArrayMutation:wi,transformDateMutation:Ci,transformFunctionMutation:vi,transformNewDate:qi,typeAliasDeclaration:ui,typeArrayNode:Di,typeInterfaceNode:Ds,typeIntersectionNode:Fi,typeNode:ae,typeOfExpression:di,typeOperatorNode:ni,typeParameterDeclaration:$r,typeParenthesizedNode:yi,typeRecordNode:Li,typeReferenceNode:Ie,typeTupleNode:Mi,typeUnionNode:Lr,valueToExpression:Le};var ar="TComposable",Be="DefaultT",Vs="ResT";var Vi=(e,t)=>e instanceof Set?e.has(t):e instanceof Array?e.includes(t):t in e,St=({base:e,components:t,extraComponents:r})=>{let s=2,o=e;for(;Vi(t,o)||r&&Vi(r,o);)o=`${e}${s}`,s+=1;return o},bn=e=>e.length===3&&e[0]==="components"&&e[1]==="schemas"||e.length===2&&e[0]==="definitions",pr=e=>{if(e&&typeof e=="object"){if("swagger"in e)return "#/definitions/";if("openapi"in e)return "#/components/schemas/"}return ""};var lm=[Re,ei,Jo,Yo,Go],Ae=e=>{let t=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_");if(rr.lastIndex=0,rr.test(t))return `_${t}`;for(let r of lm){if(t.startsWith("_"))return t;t=t.replace(r,"_$1");}return t};var _e=class{_case;_exportFromIndex;_headers=[];_id;_imports=new Map;_items=[];_name;_path;identifiers={};names={};nodeReferences={};nodes={};constructor({case:t,dir:r,exportFromIndex:s=false,header:o=true,id:i,name:a}){this._case=t,this._exportFromIndex=s,this._id=i,this._name=this._setName(a),this._path=cr__default.default.resolve(r,this._name),o&&this._headers.push("// This file is auto-generated by @hey-api/openapi-ts");}add(...t){this._items=this._items.concat(t);}addNodeReference(t,r){this.nodeReferences[t]||(this.nodeReferences[t]=[]);let s=r.factory(this.names[t]??"");return this.nodeReferences[t].push({factory:r.factory,node:s}),s}get exportFromIndex(){return this._exportFromIndex}getName(t){let r=this.names[t];if(r)return r}getNode(t){return this.nodes[t]||(this.nodes[t]={node:n.typeReferenceNode({typeName:""})}),this.nodes[t]}get id(){return this._id}identifier(t){return Bs({case:t.case??this._case,identifiers:this.identifiers,...t})}import({module:t,...r}){if(!r.name)return {name:void 0};let s=this._imports.get(t);s||(s=new Map,this._imports.set(t,s));let o=s.get(r.name);return o?{...o,name:o.alias||o.name}:(s.set(r.name,r),{...r,name:r.alias||r.name})}isEmpty(){return !this._items.length}nameWithoutExtension(){let{name:t}=On(this._name);return t}relativePathToFile({context:t,id:r}){let s="";if(r.startsWith(".")){let m=[];if(t.config.configFile){let f=t.config.configFile.split("/");m=f.slice(0,f.length-1);}s=cr__default.default.resolve(process.cwd(),...m,r);}else {let m=t.file({id:r});if(!m)throw new Error(`File with id ${r} does not exist`);s=m._path;}let o=this._path.split(cr__default.default.sep),i=s.split(cr__default.default.sep),a=-1,p="";for(let m of o)if(a+=1,i[a]!==m){let f=Array.from({length:o.length-a}).fill(""),l=i.slice(a),d=l.slice(0,l.length-1);d.length&&d.push(""),p=(f.join("../")||"./")+d.join("/");break}let c=i[i.length-1];return `${p}${On(c).name}`}remove(t){$o__default.default.rmSync(this._path,t);}removeNode_LEGACY(){this._items=this._items.slice(0,this._items.length-1);}_setName(t){if(t.includes("index"))return t;let{extension:r,name:s}=On(t);return [s,"gen",r].filter(Boolean).join(".")}_toString(t,r){let s=[];this._headers.length&&s.push(this._headers.join(`
`));let o=r?.options.moduleResolution===O__default.default.ModuleResolutionKind.NodeNext,i=[];for(let[a,p]of this._imports.entries()){let c=Array.from(p.values()),m=a;o&&(m.startsWith("./")||m.startsWith("../"))&&(m==="./client"?m="./client/index.js":m=`${m}.js`);let f=n.namedImportDeclarations({imports:c,module:m});i.push(me({node:f}));}return i.length&&s.push(i.join(`
`)),s=s.concat(this._items.map(a=>typeof a=="string"?a:me({node:a,unescape:true}))),s.join(t)}updateNode(t,r){let s=St({base:Ae(r.name),components:Object.values(this.names)});this.names[t]=s;let o=n.typeReferenceNode({typeName:s});return this.nodes[t]?Object.assign(this.nodes[t].node,o):this.nodes[t]={node:o},r.exported!==void 0&&(this.nodes[t].exported=r.exported),this.nodes[t]}updateNodeReferences(t,r){if(!this.nodeReferences[t])return;let s=St({base:Ae(r),components:Object.values(this.names)});this.names[t]=s;for(let o of this.nodeReferences[t]){let i=o.factory(s);Object.assign(o.node,i);}}write(t=`
`,r=null){if(this.isEmpty()){this.remove({force:true});return}let s=this._path;if(typeof this._path=="string"){let o=this._path.split(cr__default.default.sep);s=o.slice(0,o.length-1).join(cr__default.default.sep);}pn(s),$o__default.default.writeFileSync(this._path,this._toString(t,r));}},_s=e=>{let t=e,r=[],s=t.split("/"),o=s[s.length-1]||"",i=s.indexOf("properties");if(i!==-1)for(t=s.slice(0,i).join("/"),o=s[i-1]||"";i+1<s.length;){let a=s[i+1];if(!a)throw new Error(`Invalid $ref: ${e}`);r.push(a),i+=2;}return {name:o,properties:r,ref:t}},um=(e,t,r)=>{if(typeof t=="function")return t(e);let s=r==="preserve"?"":"-";return t.replace("{{name}}",`${s}${e}${s}`)},Bs=({$ref:e,case:t,count:r=1,create:s=false,identifiers:o,nameTransformer:i,namespace:a})=>{let{name:p,properties:c,ref:m}=_s(e);if(!p)return {created:false,name:""};let f=E({case:t,value:i?um(p,i,t):p});r>1&&(f=`${f}${r}`);let l=f.toLocaleLowerCase();o[l]||(o[l]={});let d=o[l];if(a==="enum"&&(d.type||d.value)||a!=="enum"&&d.enum)return Bs({$ref:m,case:t,count:r+1,create:s,identifiers:o,nameTransformer:i,namespace:a});d[a]||(d[a]={});let y=d[a],g=y[m];if(g){let b=g.name;return c.length&&(b+=c.map(S=>`['${S}']`).join("")),{created:false,name:b}}let h=y[f];return h?h.$ref===m?{created:false,name:h.name}:Bs({$ref:m,case:t,count:r+1,create:s,identifiers:o,nameTransformer:i,namespace:a}):s?(h={$ref:m,name:Ae(f)},y[f]=h,y[h.$ref]=h,{created:true,name:h.name}):(delete d[a],{created:false,name:""})},On=e=>{let t=e.match(/\.[0-9a-z]+$/i),r=t?t[0].slice(1):"",s=e.slice(0,e.length-(r?r.length+1:0));return {extension:r,name:s}};var gm=url.fileURLToPath((typeof document === 'undefined' ? require('u' + 'rl').pathToFileURL(__filename).href : (_documentCurrentScript && _documentCurrentScript.tagName.toUpperCase() === 'SCRIPT' && _documentCurrentScript.src || new URL('internal.cjs', document.baseURI).href)));cr__default.default.dirname(gm);var hm=e=>{let t=e.split(cr__default.default.sep);return t.slice(0,t.length-1).join(cr__default.default.sep)},J=({config:e,sourceOutput:t})=>{let r=k(e);if("bundle"in r.config&&r.config.bundle)return Jt({moduleOutput:"client",sourceOutput:t});if(cr__default.default.isAbsolute(r.name)){let s=hm(r.name),o=cr__default.default.resolve(e.output.path);return cr__default.default.relative(o,s).replace(/\\/g,"/")}return r.name},M={Options:{asType:true,name:"Options"},OptionsLegacyParser:{asType:true,name:"OptionsLegacyParser"}};var Sn=({context:e,parameter:t})=>{if(!t.pagination)return;if(t.pagination===true)return t.schema;let r=t.schema;return r.$ref&&(r=e.resolveIrRef(r.$ref)),r.properties[t.pagination]},Tt=e=>{for(let t in e)if(e[t].required)return  true;return  false},_i=e=>e?!!(Tt(e.cookie)||Tt(e.header)||Tt(e.path)||Tt(e.query)):false,Ks=({context:e,parameters:t})=>{if(t){for(let r in t.cookie){let s=t.cookie[r];if(s.pagination)return {in:s.location,name:s.pagination===true?s.name:`${s.name}.${s.pagination}`,schema:Sn({context:e,parameter:s})}}for(let r in t.header){let s=t.header[r];if(s.pagination)return {in:s.location,name:s.pagination===true?s.name:`${s.name}.${s.pagination}`,schema:Sn({context:e,parameter:s})}}for(let r in t.path){let s=t.path[r];if(s.pagination)return {in:s.location,name:s.pagination===true?s.name:`${s.name}.${s.pagination}`,schema:Sn({context:e,parameter:s})}}for(let r in t.query){let s=t.query[r];if(s.pagination)return {in:s.location,name:s.pagination===true?s.name:`${s.name}.${s.pagination}`,schema:Sn({context:e,parameter:s})}}}};var Q=({detectFormat:e=true,schema:t})=>{if(!t.items)return t;let r=[],s=[];for(let i of t.items){if(!i.type&&i.items||t.type==="tuple"){r.push(i);continue}if(!i.type||i.type==="boolean"||i.type==="integer"||i.type==="null"||i.type==="number"||i.type==="string"||i.type==="unknown"||i.type==="void"){let a=i.const!==void 0?`const-${i.const}`:"",p=i.format!==void 0&&e?`format-${i.format}`:"",c=`${i.$ref??""}${i.type??""}${a}${p}`;s.includes(c)||(s.push(c),r.push(i));continue}r.push(i);}let o={...t};if(o.items=r,o.items.length<=1&&o.type!=="array"&&o.type!=="enum"&&o.type!=="tuple"){let i=o.items[0];delete o.logicalOperator,delete o.items,o={...o,...i};}return o.type==="unknown"?{}:o};var Dr=e=>JSON.parse(JSON.stringify(e)),w=(e,t)=>{if(!e?.length)return t?.length?t:void 0;if(!t?.length)return e;let r=new Set(e);for(let s of t)r.add(s);return r.size>e.length?Array.from(r):e};var zs=({items:e,schema:t})=>{for(let r of e)t.accessScopes=w(t.accessScopes,r.accessScopes);t.items=e;},B=({items:e,logicalOperator:t="or",mutateSchemaOneItem:r=false,schema:s})=>e.length?s.type==="tuple"?(zs({items:e,schema:s}),s):e.length!==1?(zs({items:e,schema:s}),s.logicalOperator=t,s):r?(s={...s,...e[0]},s):(zs({items:e,schema:s}),s):s;var fr=e=>!!(_i(e.parameters)||e.body?.required),$=({method:e,path:t})=>`${e.toUpperCase()} ${t}`,Ki=({context:e,operation:t})=>{let r=t.body;if(!r||!r.pagination)return Ks({context:e,parameters:t.parameters});if(r.pagination===true)return {in:"body",name:"body",schema:r.schema};let s=r.schema,o=s.$ref?e.resolveIrRef(s.$ref):s,a=("schema"in o?o.schema:o)?.properties?.[r.pagination];return a?{in:"body",name:r.pagination,schema:a}:Ks({context:e,parameters:t.parameters})},Ws=({statusCode:e})=>{switch(e){case "1XX":return "1XX";case "2XX":return "2XX";case "3XX":return "3XX";case "4XX":return "4XX";case "5XX":return "5XX";case "default":return "default";default:return `${e[0]}XX`}},Ke=e=>{let t={};if(!e.responses)return t;let r={properties:{},type:"object"},s={properties:{},type:"object"},o;for(let p in e.responses){let c=e.responses[p];switch(Ws({statusCode:p})){case "1XX":case "3XX":break;case "2XX":s.properties[p]=c.schema;break;case "4XX":case "5XX":r.properties[p]=c.schema;break;case "default":o=c;break}}if(o){let p=false;Object.keys(s.properties).length||(s.properties.default=o.schema,p=true);let c=(o.schema.description??"").toLocaleLowerCase(),m=(o.schema.$ref??"").toLocaleLowerCase();["success"].some(d=>c.includes(d)||m.includes(d))&&(s.properties.default=o.schema,p=true),["error","problem"].some(d=>c.includes(d)||m.includes(d))&&(r.properties.default=o.schema,p=true),p||(r.properties.default=o.schema);}let i=Object.keys(r.properties);if(i.length){r.required=i,t.errors=r;let p=B({items:Object.values(r.properties),mutateSchemaOneItem:true,schema:{}});p=Q({schema:p}),Object.keys(p).length&&p.type!=="unknown"&&(t.error=p);}let a=Object.keys(s.properties);if(a.length){s.required=a,t.responses=s;let p=B({items:Object.values(s.properties),mutateSchemaOneItem:true,schema:{}});p=Q({schema:p}),Object.keys(p).length&&p.type!=="unknown"&&(t.response=p);}return t};var Rn=e=>({getVersion:t=>{let r=e[t];try{if(r)return Tn__namespace.parse(r)||void 0}catch{}},isInstalled:t=>!!e[t],satisfies:(t,r,s)=>{let o=typeof t=="string"?e[t]:t;return o?Tn__namespace.satisfies(o,r,s):false}});var In=class{id="typescript";render(t,r){let s=t.meta.extension??"";return {content:this.renderFile(t,r),meta:t.meta,path:`${t.path}${s}`}}groupByKey(t,r,s){let o=new Map;for(let i of t[r]){let a=s?.moduleResolution===O__default.default.ModuleResolutionKind.NodeNext,p=typeof i.from=="string"?i.from:`${t.relativePathToFile(i.from)}${a?".js":""}`;o.has(p)||o.set(p,[]),o.get(p).push(i);}return o}renderFile(t,r){if(!t.hasContent())return "";let s=[this.renderHeaders(),this.renderImports(t,r),this.renderSymbols(t),this.renderExports(t,r)].filter(Boolean).join(`
`);return s.endsWith(`
`)?s:`${s}
`}renderHeaders(){return ["// This file is auto-generated by @hey-api/openapi-ts",""].join(`
`)}renderExports(t,r){let s=this.groupByKey(t,"exports",r),o=[];for(let[i,a]of s.entries()){let p=a.every(f=>f.typeDefaultImport||f.typeNamespaceImport||f.names?.every(l=>f.typeNames?.includes(l)));if(a.length===1&&a[0].namespaceImport){let f=typeof a[0].namespaceImport=="string"?O__default.default.factory.createNamespaceExport(n.identifier({text:a[0].namespaceImport})):void 0,l=O__default.default.factory.createExportDeclaration(void 0,false,f,n.stringLiteral({isSingleQuote:true,text:i}));o.push(me({node:l}));continue}let c=[];for(let f of a)for(let l of f.names??[]){let d=f.aliases?.[l],y=d&&d!==l?O__default.default.factory.createExportSpecifier(false,n.identifier({text:l}),n.identifier({text:d})):O__default.default.factory.createExportSpecifier(false,void 0,n.identifier({text:l}));c.push(y);}let m=O__default.default.factory.createExportDeclaration(void 0,p,O__default.default.factory.createNamedExports(c),n.stringLiteral({isSingleQuote:true,text:i}));o.push(me({node:m}));}return o.length&&o.push(""),o.join(`
`)}renderImports(t,r){let s=this.groupByKey(t,"imports",r),o=[];for(let[i,a]of s.entries()){let p=[],c,m,f=false;for(let y of a){y.defaultImport&&(c=O__default.default.factory.createIdentifier(y.defaultImport),y.typeDefaultImport&&(f=true)),typeof y.namespaceImport=="string"&&(m=O__default.default.factory.createNamespaceImport(n.identifier({text:y.namespaceImport})),y.typeNamespaceImport&&(f=true));for(let g of y.names??[]){let h=y.aliases?.[g],b=n.identifier({text:g}),S=h&&h!==g?O__default.default.factory.createImportSpecifier(false,b,n.identifier({text:h})):O__default.default.factory.createImportSpecifier(false,void 0,b);y.typeNames?.includes(g)&&(f=true),p.push(S);}}let l=O__default.default.factory.createImportClause(f,c,m??(p.length?O__default.default.factory.createNamedImports(p):void 0)),d=O__default.default.factory.createImportDeclaration(void 0,l,n.stringLiteral({isSingleQuote:true,text:i}));o.push(me({node:d}));}return o.length&&o.push(""),o.join(`
`)}renderSymbols(t){let r=[];for(let s of t.symbols)s.value&&(typeof s.value=="string"?r.push(s.value):r.push(`${me({node:s.value})}
`));return r.join(`
`)}};var xm=e=>{switch(e.method){case "delete":case "patch":case "post":case "put":return ["mutation"];case "get":return ["query"];default:return []}},Pn=class{api;config;context;dependencies=[];gen;handler;name;output;package;constructor(t){this.api=t.api??{},this.config=t.config,this.context=t.context,this.dependencies=t.dependencies,this.gen=t.gen,this.handler=t.handler,this.name=t.name,this.output=t.output,this.package=t.context.package;}createFile(t){return this.context.createFile({exportFromIndex:this.config.exportFromIndex,...t})}forEach(...t){let r=t.slice(0,-1),s=t[t.length-1],o=new Set(r.length?r:["operation","parameter","requestBody","schema","server","webhook"]);if(o.has("server")&&this.context.ir.servers)for(let i of this.context.ir.servers){let a={server:i,type:"server"};try{s(a);}catch(p){this.forEachError(p,a);}}if(o.has("schema")&&this.context.ir.components?.schemas)for(let i in this.context.ir.components.schemas){let a={$ref:`#/components/schemas/${i}`,name:i,schema:this.context.ir.components.schemas[i],type:"schema"};try{s(a);}catch(p){this.forEachError(p,a);}}if(o.has("parameter")&&this.context.ir.components?.parameters)for(let i in this.context.ir.components.parameters){let a={$ref:`#/components/parameters/${i}`,name:i,parameter:this.context.ir.components.parameters[i],type:"parameter"};try{s(a);}catch(p){this.forEachError(p,a);}}if(o.has("requestBody")&&this.context.ir.components?.requestBodies)for(let i in this.context.ir.components.requestBodies){let a={$ref:`#/components/requestBodies/${i}`,name:i,requestBody:this.context.ir.components.requestBodies[i],type:"requestBody"};try{s(a);}catch(p){this.forEachError(p,a);}}if(o.has("operation")&&this.context.ir.paths)for(let i in this.context.ir.paths){let a=this.context.ir.paths[i];for(let p in a){let c=p,m={method:c,operation:a[c],path:i,type:"operation"};try{s(m);}catch(f){this.forEachError(f,m);}}}if(o.has("webhook")&&this.context.ir.webhooks)for(let i in this.context.ir.webhooks){let a=this.context.ir.webhooks[i];for(let p in a){let c=p,m={key:i,method:c,operation:a[c],type:"webhook"};try{s(m);}catch(f){this.forEachError(f,m);}}}}forEachError(t,r){let s=t instanceof Error?t:new Error(String(t));throw new cn({args:[r],error:s,event:r.type,name:"Error",pluginName:this.name})}getPlugin(t){return this.context.plugins[t]}hooks={operation:{isMutation:t=>this.isOperationKind(t,"mutation"),isQuery:t=>this.isOperationKind(t,"query")}};isOperationKind(t,r){let s=r==="query"?"isQuery":"isMutation",o=this.config["~hooks"]?.operations?.[s],i=o?.(t);if(i!==void 0)return i;let a=this.config["~hooks"]?.operations?.getKind,p=a?.(t);if(p!==void 0)return p.includes(r);let c=this.context.config.parser.hooks.operations?.[s],m=c?.(t);if(m!==void 0)return m;let f=this.context.config.parser.hooks.operations?.getKind,l=f?.(t);return l!==void 0?l.includes(r):xm(t).includes(r)}async run(){await this.handler({plugin:this});}};var bm=/~1/g,Om=/~0/g,V=e=>{let t=ze(e),r=t[t.length-1];return decodeURI(r)},Sm=e=>String(e).replace(/~/g,"~0").replace(/\//g,"~1"),ze=e=>{let t=e.trim();return t.startsWith("#")&&(t=t.slice(1)),t.startsWith("/")&&(t=t.slice(1)),t?t.split("/").map(r=>r.replace(bm,"/").replace(Om,"~")):[]},zi=e=>{let t=e.trim();return t.startsWith("#")||(t=`#${t}`),t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1)),t=t.replace(/\/+/g,"/"),t},Wi=e=>{let t=e.map(Sm).join("/");return "#"+(t?`/${t}`:"")},Hs=({$ref:e,spec:t})=>{let r=ze(decodeURI(e)),s=t;for(let o of r){let i=o;if(s[i]===void 0)throw new Error(`Reference not found: ${e}`);s=s[i];}return s};var An=class{config;files={};gen;ir={};logger;package;plugins={};spec;constructor({config:t,dependencies:r,logger:s,spec:o}){this.config=t,this.gen=new codegenCore.CodegenProject,this.logger=s,this.package=Rn(r),this.spec=o,t.output.indexFile&&this.gen.createFile("index",{extension:".ts",renderer:new In});}createFile(t){let r=t.path.split("/"),s=cr__default.default.resolve(this.config.output.path,...r.slice(0,r.length-1)),o=new _e({case:t.case,dir:s,exportFromIndex:t.exportFromIndex,id:t.id,name:`${r[r.length-1]}.ts`});return this.files[t.id]=o,o}dereference(t){let r=this.resolveRef(t.$ref),s={...t,...r};return delete s.$ref,s}file({id:t}){return this.files[t]}registerPlugin(t){let r=this.config.plugins[t],s=new Pn({api:r.api,config:r.config,context:this,dependencies:r.dependencies??[],gen:this.gen,handler:r.handler,name:r.name,output:r.output});return this.plugins[s.name]=s,s}registerPlugins(){return this.config.pluginOrder.map(t=>this.registerPlugin(t))}resolveIrRef(t){return Hs({$ref:t,spec:this.ir})}resolveRef(t){return Hs({$ref:t,spec:this.spec})}};var Bt=e=>{let t=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_");return rr.lastIndex=0,rr.test(t)?`_${t}`:t},Rt=e=>e.replace(/^[^\p{ID_Start}]+/u,"").replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"-").replace(/[$+]/g,"-"),Qs=e=>{let t=e.replace("[]","Array");return Rt(t)};var oe=["delete","get","head","options","patch","post","put","trace"],_t=({context:e,count:t=1,id:r,method:s,path:o,state:i})=>{let a,{output:p}=e.config,c=(p!==void 0&&typeof p=="object"&&"case"in p?p.case:void 0)??"camelCase";if(r&&(!e.config.plugins["@hey-api/sdk"]||e.config.plugins["@hey-api/sdk"].config.operationId))a=E({case:c,value:Rt(r)});else {let m=o.replace(/{(.*?)}/g,"by-$1").replace(/[/:+]/g,"-");a=E({case:c,value:`${s}-${m}`});}return t>1&&(a=`${a}${t}`),i.ids.has(a)?_t({context:e,count:t+1,id:r,method:s,path:o,state:i}):(i.ids.set(a,$({method:s,path:o})),a)};var Hi="/",N=(e,t="")=>`${e}${Hi}${t}`,se=e=>{let t=e.indexOf(Hi);return {name:e.slice(t+1),namespace:e.slice(0,t)}},Qi=e=>{switch(e){case "parameters":return "parameter";case "requestBodies":return "body";case "responses":return "response";case "definitions":case "schemas":return "schema";default:return "unknown"}},We=(e,t)=>{let r=[],s=[];if(t)for(let o of t)o.startsWith("/")&&o.endsWith("/")?s.push(new RegExp(o.slice(1,o.length-1))):r.push(N(e,o));return {regexps:s,set:new Set(r)}},Im=({excludeOperations:e,excludeSchemas:t,includeOperations:r,includeSchemas:s,spec:o})=>{if((e.regexps.length||r.regexps.length)&&o.paths)for(let i of Object.entries(o.paths)){let a=i[0],p=i[1];for(let c of oe){if(!p[c])continue;let f=$({method:c,path:a});e.regexps.some(l=>l.test(f))&&e.set.add(N("operation",f)),r.regexps.some(l=>l.test(f))&&r.set.add(N("operation",f));}}if(o.definitions&&(t.regexps.length||s.regexps.length))for(let i of Object.keys(o.definitions))t.regexps.some(a=>a.test(i))&&t.set.add(N("schema",i)),s.regexps.some(a=>a.test(i))&&s.set.add(N("schema",i));},Pm=({excludeOperations:e,excludeParameters:t,excludeRequestBodies:r,excludeResponses:s,excludeSchemas:o,includeOperations:i,includeParameters:a,includeRequestBodies:p,includeResponses:c,includeSchemas:m,spec:f})=>{if((e.regexps.length||i.regexps.length)&&f.paths)for(let l of Object.entries(f.paths)){let d=l[0],y=l[1];for(let g of oe){if(!y[g])continue;let b=$({method:g,path:d});e.regexps.some(S=>S.test(b))&&e.set.add(N("operation",b)),i.regexps.some(S=>S.test(b))&&i.set.add(N("operation",b));}}if(f.components){if((t.regexps.length||a.regexps.length)&&f.components.parameters)for(let l of Object.keys(f.components.parameters))t.regexps.some(d=>d.test(l))&&t.set.add(N("parameter",l)),a.regexps.some(d=>d.test(l))&&a.set.add(N("parameter",l));if((r.regexps.length||p.regexps.length)&&f.components.requestBodies)for(let l of Object.keys(f.components.requestBodies))r.regexps.some(d=>d.test(l))&&r.set.add(N("body",l)),p.regexps.some(d=>d.test(l))&&p.set.add(N("body",l));if((s.regexps.length||c.regexps.length)&&f.components.responses)for(let l of Object.keys(f.components.responses))s.regexps.some(d=>d.test(l))&&s.set.add(N("response",l)),c.regexps.some(d=>d.test(l))&&c.set.add(N("response",l));if((o.regexps.length||m.regexps.length)&&f.components.schemas)for(let l of Object.keys(f.components.schemas))o.regexps.some(d=>d.test(l))&&o.set.add(N("schema",l)),m.regexps.some(d=>d.test(l))&&m.set.add(N("schema",l));}},Am=({spec:e,...t})=>{"swagger"in e?Im({...t,spec:e}):Pm({...t,spec:e});},lr=(e,t,r)=>{let s=r.timeEvent("create-filters"),o=We("operation",e?.operations?.exclude),i=We("operation",e?.operations?.include),a=We("parameter",e?.parameters?.exclude),p=We("parameter",e?.parameters?.include),c=We("body",e?.requestBodies?.exclude),m=We("body",e?.requestBodies?.include),f=We("response",e?.responses?.exclude),l=We("response",e?.responses?.include),d=We("schema",e?.schemas?.exclude),y=We("schema",e?.schemas?.include);Am({excludeOperations:o,excludeParameters:a,excludeRequestBodies:c,excludeResponses:f,excludeSchemas:d,includeOperations:i,includeParameters:p,includeRequestBodies:m,includeResponses:l,includeSchemas:y,spec:t});let g={deprecated:e?.deprecated??true,operations:{exclude:o.set,include:i.set},orphans:e?.orphans??false,parameters:{exclude:a.set,include:p.set},preserveOrder:e?.preserveOrder??false,requestBodies:{exclude:c.set,include:m.set},responses:{exclude:f.set,include:l.set},schemas:{exclude:d.set,include:y.set},tags:{exclude:new Set(e?.tags?.exclude),include:new Set(e?.tags?.include)}};return s.timeEnd(),g},dr=e=>e?e.orphans===false||e.deprecated===false?true:!!(e.operations?.exclude?.length||e.operations?.include?.length||e.parameters?.exclude?.length||e.parameters?.include?.length||e.requestBodies?.exclude?.length||e.requestBodies?.include?.length||e.responses?.exclude?.length||e.responses?.include?.length||e.schemas?.exclude?.length||e.schemas?.include?.length||e.tags?.exclude?.length||e.tags?.include?.length):false,Em=({filters:e,parameters:t,requestBodies:r,resourceMetadata:s,responses:o,schemas:i})=>{let a=new Set,c=[...e.operations.include.size?e.operations.include:new Set(s.operations.keys())];for(;c.length;){let m=c.pop();if(e.operations.exclude.has(m)||a.has(m))continue;let f=s.operations.get(m);f&&(!e.deprecated&&f.deprecated||e.tags.exclude.size&&f.tags.size&&[...e.tags.exclude].some(l=>f.tags.has(l))||e.tags.include.size&&!new Set([...e.tags.include].filter(l=>f.tags.has(l))).size||[...f.dependencies].some(l=>{let{namespace:d}=se(l);switch(d){case "body":return !r.has(l);case "parameter":return !t.has(l);case "response":return !o.has(l);case "schema":return !i.has(l);default:return  false}})||a.add(m));}return {operations:a}},Nm=({filters:e,resourceMetadata:t,schemas:r})=>{let s=new Set,i=[...e.parameters.include.size?e.parameters.include:new Set(t.parameters.keys())];for(;i.length;){let a=i.pop();if(e.parameters.exclude.has(a)||s.has(a))continue;let p=t.parameters.get(a);if(p&&!(!e.deprecated&&p.deprecated)&&(s.add(a),!!p.dependencies.size))for(let c of p.dependencies){let{namespace:m}=se(c);switch(m){case "body":{e.requestBodies.exclude.has(c)?s.delete(a):s.has(c)||i.push(c);break}case "schema":{e.schemas.exclude.has(c)?s.delete(a):r.has(c)||r.add(c);break}}}}return {parameters:s}},jm=({filters:e,resourceMetadata:t,schemas:r})=>{let s=new Set,i=[...e.requestBodies.include.size?e.requestBodies.include:new Set(t.requestBodies.keys())];for(;i.length;){let a=i.pop();if(e.requestBodies.exclude.has(a)||s.has(a))continue;let p=t.requestBodies.get(a);if(p&&!(!e.deprecated&&p.deprecated)&&(s.add(a),!!p.dependencies.size))for(let c of p.dependencies){let{namespace:m}=se(c);switch(m){case "body":{e.requestBodies.exclude.has(c)?s.delete(a):s.has(c)||i.push(c);break}case "schema":{e.schemas.exclude.has(c)?s.delete(a):r.has(c)||r.add(c);break}}}}return {requestBodies:s}},km=({filters:e,resourceMetadata:t,schemas:r})=>{let s=new Set,i=[...e.responses.include.size?e.responses.include:new Set(t.responses.keys())];for(;i.length;){let a=i.pop();if(e.responses.exclude.has(a)||s.has(a))continue;let p=t.responses.get(a);if(p&&!(!e.deprecated&&p.deprecated)&&(s.add(a),!!p.dependencies.size))for(let c of p.dependencies){let{namespace:m}=se(c);switch(m){case "body":{e.requestBodies.exclude.has(c)?s.delete(a):s.has(c)||i.push(c);break}case "schema":{e.schemas.exclude.has(c)?s.delete(a):r.has(c)||r.add(c);break}}}}return {responses:s}},Cm=({filters:e,resourceMetadata:t})=>{let r=new Set,o=[...e.schemas.include.size?e.schemas.include:new Set(t.schemas.keys())];for(;o.length;){let i=o.pop();if(e.schemas.exclude.has(i)||r.has(i))continue;let a=t.schemas.get(i);if(a&&!(!e.deprecated&&a.deprecated)&&(r.add(i),!!a.dependencies.size))for(let p of a.dependencies){let{namespace:c}=se(p);switch(c){case "schema":{!r.has(p)&&!e.schemas.exclude.has(p)&&o.push(p);break}}}}return {schemas:r}},vm=({filters:e,parameters:t,resourceMetadata:r})=>{if(e.parameters.exclude.size)for(let s of t){let o=r.parameters.get(s);if(o?.dependencies.size){for(let i of e.parameters.exclude)if(o.dependencies.has(i)){t.delete(s);break}}}},wm=({filters:e,requestBodies:t,resourceMetadata:r})=>{if(e.requestBodies.exclude.size)for(let s of t){let o=r.requestBodies.get(s);if(o?.dependencies.size){for(let i of e.requestBodies.exclude)if(o.dependencies.has(i)){t.delete(s);break}}}},qm=({filters:e,resourceMetadata:t,responses:r})=>{if(e.responses.exclude.size)for(let s of r){let o=t.responses.get(s);if(o?.dependencies.size){for(let i of e.responses.exclude)if(o.dependencies.has(i)){r.delete(s);break}}}},$m=({filters:e,resourceMetadata:t,schemas:r})=>{if(e.schemas.exclude.size)for(let s of r){let o=t.schemas.get(s);if(o?.dependencies.size){for(let i of e.schemas.exclude)if(o.dependencies.has(i)){r.delete(s);break}}}},Fm=({operationDependencies:e,parameters:t,requestBodies:r,responses:s,schemas:o})=>{for(let i of o)e.has(i)||o.delete(i);for(let i of t)e.has(i)||t.delete(i);for(let i of r)e.has(i)||r.delete(i);for(let i of s)e.has(i)||s.delete(i);},Mm=({operations:e,resourceMetadata:t})=>{let r=new Set,o=[...new Set([...e].flatMap(i=>[...t.operations.get(i)?.dependencies??[]]))];for(;o.length;){let i=o.pop();if(r.has(i))continue;r.add(i);let{namespace:a}=se(i),p;if(a==="body"?p=t.requestBodies.get(i)?.dependencies:a==="operation"?p=t.operations.get(i)?.dependencies:a==="parameter"?p=t.parameters.get(i)?.dependencies:a==="response"?p=t.responses.get(i)?.dependencies:a==="schema"&&(p=t.schemas.get(i)?.dependencies),!!p?.size)for(let c of p)r.has(c)||o.push(c);}return {operationDependencies:r}},ur=({filters:e,logger:t,resourceMetadata:r})=>{let s=t.timeEvent("create-filtered-dependencies"),{schemas:o}=Cm({filters:e,resourceMetadata:r}),{parameters:i}=Nm({filters:e,resourceMetadata:r,schemas:o}),{requestBodies:a}=jm({filters:e,resourceMetadata:r,schemas:o}),{responses:p}=km({filters:e,resourceMetadata:r,schemas:o});$m({filters:e,resourceMetadata:r,schemas:o}),vm({filters:e,parameters:i,resourceMetadata:r}),wm({filters:e,requestBodies:a,resourceMetadata:r}),qm({filters:e,resourceMetadata:r,responses:p});let{operations:c}=Em({filters:e,parameters:i,requestBodies:a,resourceMetadata:r,responses:p,schemas:o});if(!e.orphans&&c.size){let{operationDependencies:m}=Mm({operations:c,resourceMetadata:r});Fm({operationDependencies:m,parameters:i,requestBodies:a,responses:p,schemas:o});}return s.timeEnd(),{operations:c,parameters:i,requestBodies:a,responses:p,schemas:o}};var yr=(e,t)=>{let r=t.timeEvent("build-resource-metadata"),s={operations:new Map,parameters:new Map,requestBodies:new Map,responses:new Map,schemas:new Map},o=i=>{let a=new Set,p=e.allDependencies.get(i);if(p?.size)for(let c of p){let m=ze(c),f=m[m.length-2],l=m[m.length-1];if(f&&l){let d=Qi(f);d==="unknown"&&console.warn(`unsupported type: ${f}`),a.add(N(d,l));}}return a};for(let[i,a]of e.nodes){let p=ze(i);if(p[0]==="components"){if(p.length===3){if(p[1]==="schemas"){let c=p[p.length-1];s.schemas.set(N("schema",c),{dependencies:o(i),deprecated:a.deprecated??false});}else if(p[1]==="parameters"){let c=p[p.length-1];s.parameters.set(N("parameter",c),{dependencies:o(i),deprecated:a.deprecated??false});}else if(p[1]==="requestBodies"){let c=p[p.length-1];s.requestBodies.set(N("body",c),{dependencies:o(i),deprecated:a.deprecated??false});}else if(p[1]==="responses"){let c=p[p.length-1];s.responses.set(N("response",c),{dependencies:o(i),deprecated:a.deprecated??false});}}continue}if(p[0]==="paths"){if(p.length===3&&oe.includes(p[2])){let c=p[p.length-1],m=p.slice(1,-1).join("/"),f=$({method:c,path:m});s.operations.set(N("operation",f),{dependencies:o(i),deprecated:a.deprecated??false,tags:a.tags??new Set});}continue}if(p[0]==="definitions"){if(p.length===2){let c=p[p.length-1];s.schemas.set(N("schema",c),{dependencies:o(i),deprecated:a.deprecated??false});}continue}}return r.timeEnd(),{resourceMetadata:s}};var It=[["additionalProperties","single"],["allOf","array"],["anyOf","array"],["contains","single"],["dependentSchemas","objectMap"],["else","single"],["if","single"],["items","singleOrArray"],["oneOf","array"],["patternProperties","objectMap"],["properties","objectMap"],["propertyNames","single"],["then","single"]];var Vr=e=>{if(En(e))return e.components.schemas;if(Nn(e))return e.definitions},En=e=>typeof e=="object"&&e!==null&&"components"in e&&typeof e.components=="object"&&e.components!==null&&"schemas"in e.components&&typeof e.components.schemas=="object"&&e.components.schemas!==null,Nn=e=>typeof e=="object"&&e!==null&&"definitions"in e&&typeof e.definitions=="object"&&e.definitions!==null;var Us=e=>{if(!e||typeof e!="object"||!("enum"in e)||!(e.enum instanceof Array))return;let t=("type"in e?e.type:void 0)||"",r=[...e.enum].sort();return JSON.stringify({type:t,values:r})},Zs=({key:e,node:t,parent:r,path:s,visitor:o})=>{if(!t||typeof t!="object"||t instanceof Array)return;let i=t;("type"in i||"enum"in i||It.some(([a])=>a in i))&&o({key:e,node:t,parent:r,path:s});for(let[a,p]of Object.entries(i))typeof p=="object"&&p!==null&&(p instanceof Array?p.forEach((c,m)=>Zs({key:m,node:c,parent:p,path:[...s,a,m],visitor:o})):Zs({key:a,node:p,parent:t,path:[...s,a],visitor:o}));},Lm=({spec:e})=>{let t=Vr(e);if(!t)return;let r=pr(e),s={};for(let[i,a]of Object.entries(t))Us(a)&&(s[`${r}${i}`]=a);let o=i=>{if(i instanceof Array)i.forEach(o);else if(i&&typeof i=="object")for(let[a,p]of Object.entries(i))a==="$ref"&&typeof p=="string"&&p in s?(Object.assign(i,Dr(s[p])),delete i.$ref):o(p);};o(e);for(let i of Object.keys(s)){let a=ze(i),p=a[a.length-1];p&&delete t[p];}},Dm=({config:e,spec:t})=>{let r=Vr(t);if(!r)return;let s={};for(let[c,m]of Object.entries(r)){let f=Us(m);f&&(s[f]=c);}let o=[];Zs({key:null,node:t,parent:null,path:[],visitor:c=>{if(!bn(c.path)){let m=Us(c.node);m&&o.push({...c,signature:m});}}});let i={},a={};for(let{key:c,node:m,signature:f}of o){if(f in i)continue;if(f in s){i[f]=s[f];continue}let l=P({config:e,name:typeof m=="object"&&m&&"title"in m&&typeof m.title=="string"?m.title:String(c)}),d=St({base:l,components:r,extraComponents:Object.values(i)});i[f]=d,a[f]=m;}for(let[c,m]of Object.entries(i)){let f=a[c];m&&!(m in r)&&f&&typeof f=="object"&&(r[m]=f);}let p=pr(t);for(let{key:c,parent:m,signature:f}of o){let l=i[f];l&&c!=null&&m&&typeof m=="object"&&(m[c]={$ref:`${p}${l}`});}},Ui=({config:e,spec:t})=>{if(e.mode==="inline"){Lm({spec:t});return}if(e.mode==="root"){Dm({config:e,spec:t});return}};var Xs=(e,t)=>{if(e===t)return  true;if(e===null||t===null)return e===t;let r=typeof e;if(r!==typeof t||r!=="object")return  false;if(Array.isArray(e)||Array.isArray(t)){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return  false;for(let c=0;c<e.length;c++)if(!Xs(e[c],t[c]))return  false;return  true}let o=e,i=t,a=Object.keys(o).sort(),p=Object.keys(i).sort();if(a.length!==p.length)return  false;for(let c=0;c<a.length;c++)if(a[c]!==p[c])return  false;for(let c of a)if(!Xs(o[c],i[c]))return  false;return  true},Gs=Xs;var Vm=e=>{for(let[,t]of e)if(!t.scopes&&t.parentPointer){let r=e.get(t.parentPointer);r?.scopes&&(t.scopes=new Set(r.scopes));}},Ys=({cache:e,graph:t,pointer:r,visited:s})=>{let o=e.allDependencies.get(r);if(o)return o;if(s.has(r))return new Set;if(s.add(r),!t.nodes.get(r))return new Set;let a=new Set,p=t.dependencies.get(r);if(p)for(let m of p){a.add(m);let f=Ys({cache:e,graph:t,pointer:m,visited:s});for(let l of f)a.add(l);}let c=e.parentToChildren.get(r);if(c)for(let m of c){let f=e.childDependencies.get(m);f||(f=Ys({cache:e,graph:t,pointer:m,visited:s}),e.childDependencies.set(m,f));for(let l of f)a.add(l);}return e.allDependencies.set(r,a),a},Bm=e=>{let t=new Set(Array.from(e.nodes.entries()).filter(([,o])=>o.scopes&&o.scopes.size>0).map(([o])=>o)),r=(o,i,a)=>{i.parentPointer&&t.add(i.parentPointer);let p=e.reverseDependencies.get(o);if(p)for(let c of p)t.add(c);if(a){let c=a.match(/(.*)\/(allOf|anyOf|oneOf)\/\d+$/);if(c){let m=c[1];m&&t.add(m);}}},s=(o,i,a)=>{if(!i?.scopes)return;let p=e.nodes.get(a);if(!p?.scopes)return;Js(p,i)&&r(o,i,a);};for(;t.size>0;){let o=t.values().next().value;t.delete(o);let i=e.nodes.get(o);if(!i)continue;i.scopes||(i.scopes=new Set);let a=i.node;for(let[c,m]of It){if(!a||typeof a!="object"||!(c in a))continue;let f=a[c];if(m==="array"&&f instanceof Array)for(let l=0;l<f.length;l++){let d=`${o}/${c}/${l}`;s(o,i,d);}else if(m==="objectMap"&&typeof f=="object"&&f!==null&&!(f instanceof Array))for(let l of Object.keys(f)){let d=`${o}/${c}/${l}`;s(o,i,d);}else if(m==="single"&&typeof f=="object"&&f!==null){let l=`${o}/${c}`;s(o,i,l);}else if(m==="singleOrArray"){if(f instanceof Array)for(let l=0;l<f.length;l++){let d=`${o}/${c}/${l}`;s(o,i,d);}else if(typeof f=="object"&&f!==null){let l=`${o}/${c}`;s(o,i,l);}}}let p=e.dependencies.get(o);if(p)for(let c of p){let m=e.nodes.get(c);m?.scopes&&Js(m,i)&&r(o,i);}if(i.parentPointer){let c=e.nodes.get(i.parentPointer);c&&Js(i,c)&&r(i.parentPointer,c);}}},Js=(e,t)=>{if(!e.scopes)return  false;t.scopes||(t.scopes=new Set);let r=false;for(let s of e.scopes)t.scopes.has(s)||(t.scopes.add(s),r=true);return r},_m=e=>{for(let[t,r]of e){let{node:s}=r;typeof s!="object"||s===null||s instanceof Array||("readOnly"in s&&s.readOnly===true?r.scopes=new Set(["read"]):"writeOnly"in s&&s.writeOnly===true?r.scopes=new Set(["write"]):t.match(/\/properties\/[^/]+$/)&&(r.scopes=new Set(["normal"])));}},Pt=(e,t)=>{let r=t.timeEvent("build-graph"),s={allDependencies:new Map,dependencies:new Map,nodes:new Map,reverseDependencies:new Map},o=({key:a,node:p,parentPointer:c,path:m})=>{if(typeof p!="object"||p===null)return;let f=Wi(m),l,d;if(typeof p=="object"&&p!==null){if("deprecated"in p&&typeof p.deprecated=="boolean"&&(l=!!p.deprecated),"$ref"in p&&typeof p.$ref=="string"){let y=zi(p.$ref);s.dependencies.has(f)||s.dependencies.set(f,new Set),s.dependencies.get(f).add(y);}"tags"in p&&p.tags instanceof Array&&(d=new Set(p.tags.filter(y=>typeof y=="string")));}if(s.nodes.set(f,{deprecated:l,key:a,node:p,parentPointer:c,tags:d}),p instanceof Array)p.forEach((y,g)=>o({key:g,node:y,parentPointer:f,path:[...m,g]}));else for(let[y,g]of Object.entries(p))o({key:y,node:g,parentPointer:f,path:[...m,y]});};o({key:null,node:e,parentPointer:null,path:[]});let i={allDependencies:new Map,childDependencies:new Map,parentToChildren:new Map};for(let[a,p]of s.nodes){let c=p.parentPointer;c&&(i.parentToChildren.has(c)||i.parentToChildren.set(c,[]),i.parentToChildren.get(c).push(a));}for(let[a,p]of s.dependencies)for(let c of p)s.reverseDependencies.has(c)||s.reverseDependencies.set(c,new Set),s.reverseDependencies.get(c).add(a);_m(s.nodes),Bm(s),Vm(s.nodes);for(let a of s.nodes.keys()){let p=Ys({cache:i,graph:s,pointer:a,visited:new Set});s.allDependencies.set(a,p);}return r.timeEnd(),{graph:s}};var Km=new Set(["additionalProperties","allOf","anyOf","items","not","oneOf","patternProperties","properties","schema"]),zm=e=>{if(e.length===3&&e[0]==="components"){let t=e[1];if(t==="parameters"||t==="requestBodies")return "write";if(t==="responses"||t==="headers")return "read"}if(e.length===2){let t=e[0];if(t==="parameters")return "write";if(t==="responses")return "read"}},Wm=(e,t)=>{let r=t.timeEvent("capture-original-schemas"),s={};if(En(e))for(let[o,i]of Object.entries(e.components.schemas))s[`#/components/schemas/${o}`]=i;else if(Nn(e))for(let[o,i]of Object.entries(e.definitions))s[`#/definitions/${o}`]=i;return r.timeEnd(),s},Hm=({logger:e,spec:t,split:r})=>{let s=e.timeEvent("insert-split-schemas-into-spec");En(t)?Object.assign(t.components.schemas,r.schemas):Nn(t)&&Object.assign(t.definitions,r.schemas),s.timeEnd();},Kt=(e,t,r)=>{if(t&&typeof t=="object"){if("$ref"in t&&typeof t.$ref=="string"){let s=e.nodes.get(t.$ref);if(s?.scopes&&(r==="writeOnly"&&s.scopes.size===1&&s.scopes.has("write")||r==="readOnly"&&s.scopes.size===1&&s.scopes.has("read"))&&(delete t.$ref,!It.some(([o])=>o in t)))return  true}for(let[s,o]of It){if(!(s in t))continue;let i=t[s];if(o==="array"&&i instanceof Array){for(let a=i.length-1;a>=0;a--){let p=i[a];(p&&typeof p=="object"&&p[r]===true||Kt(e,p,r))&&i.splice(a,1);}i.length||delete t[s];}else if(o==="objectMap"&&typeof i=="object"&&i!==null&&!(i instanceof Array)){let a=i,p=new Set;for(let c of Object.keys(a)){let m=a[c];(m&&typeof m=="object"&&m[r]===true||Kt(e,m,r))&&(delete a[c],s==="properties"&&p.add(c));}if(p.size>0&&s==="properties"&&"required"in t&&Array.isArray(t.required)){let m=t.required.filter(f=>!p.has(f));m.length===0?delete t.required:t.required=m;}Object.keys(a).length||delete t[s];}else if(o==="single"&&typeof i=="object"&&i!==null)(i[r]===true||Kt(e,i,r))&&delete t[s];else if(o==="singleOrArray")if(i instanceof Array){for(let a=i.length-1;a>=0;a--){let p=i[a];(p&&typeof p=="object"&&p[r]===true||Kt(e,p,r))&&i.splice(a,1);}i.length||delete t[s];}else typeof i=="object"&&i!==null&&(i[r]===true||Kt(e,i,r))&&delete t[s];}if(t.type==="object"&&!It.some(([s])=>s in t))return  true}return  false},Qm=({logger:e,originalSchemas:t,spec:r,split:s})=>{let o=e.timeEvent("remove-original-split-schemas"),i=Vr(r);for(let a of Object.keys(s.mapping)){let p=ze(a),c=p[p.length-1];typeof c=="string"&&i&&Object.prototype.hasOwnProperty.call(i,c)&&i[c]===t[a]&&delete i[c];}o.timeEnd();},Um=({config:e,graph:t,logger:r,spec:s})=>{let o=r.timeEvent("split-schemas"),i=new Set,a={mapping:{},reverseMapping:{},schemas:{}},p=pr(s),c=p.split("/").length-1,m=f=>{if(f.startsWith(p)){let l=ze(f);if(l.length===c)return l[c-1]||""}return ""};for(let f of t.nodes.keys()){let l=m(f);l&&i.add(l);}for(let[f,l]of t.nodes){let d=m(f);if(!d||!(l.scopes?.has("read")||l.scopes?.has("write"))||!l.scopes?.has("normal"))continue;let y=Dr(l.node);Kt(t,y,"writeOnly");let g=P({config:e.responses,name:d}),h=g===d?g:St({base:g,components:i});i.add(h),a.schemas[h]=y;let b=`${p}${h}`,S=Dr(l.node);if(Kt(t,S,"readOnly"),Gs(y,S)&&Gs(y,l.node))continue;let C=P({config:e.requests,name:d}),F=C===d&&C!==h?C:St({base:C,components:i});i.add(F),a.schemas[F]=S;let v=`${p}${F}`;a.mapping[f]={read:b,write:v},a.reverseMapping[b]=f,a.reverseMapping[v]=f;}return o.timeEnd(),a},Zm=({logger:e,spec:t,split:r})=>{let s=e.timeEvent("update-refs-in-spec"),o=pr(t),i=({context:a,currentPointer:p,inSchema:c,node:m,path:f})=>{if(m instanceof Array)m.forEach((l,d)=>i({context:a,currentPointer:p,inSchema:c,node:l,path:[...f,d]}));else if(m&&typeof m=="object"){let l=p,d=a;if(bn(f)){let g=f[f.length-1];l=`${o}${g}`;let h=r.reverseMapping[l];if(h){let b=r.mapping[h];b?.read===l?d="read":b?.write===l&&(d="write");}}let y=zm(f);if(y!==void 0){for(let g in m)Object.prototype.hasOwnProperty.call(m,g)&&i({context:y,currentPointer:l,inSchema:false,node:m[g],path:[...f,g]});return}for(let g in m){if(!Object.prototype.hasOwnProperty.call(m,g))continue;let h=m[g];if(!c){if(g==="requestBody"){i({context:"write",currentPointer:l,inSchema:false,node:h,path:[...f,g]});continue}if(g==="responses"){i({context:"read",currentPointer:l,inSchema:false,node:h,path:[...f,g]});continue}if(g==="parameters"&&Array.isArray(h)){h.forEach((b,S)=>{b&&typeof b=="object"&&"schema"in b&&i({context:"write",currentPointer:l,inSchema:true,node:b.schema,path:[...f,g,S,"schema"]}),b&&typeof b=="object"&&"content"in b&&i({context:"write",currentPointer:l,inSchema:false,node:b.content,path:[...f,g,S,"content"]});});continue}if(g==="headers"&&typeof h=="object"&&h!==null){for(let b in h)Object.prototype.hasOwnProperty.call(h,b)&&i({context:"read",currentPointer:l,inSchema:false,node:h[b],path:[...f,g,b]});continue}}if(Km.has(g))i({context:d,currentPointer:l,inSchema:true,node:h,path:[...f,g]});else if(g==="$ref"&&typeof h=="string"){let b=r.mapping[h];b&&(b.read&&(!d||d==="read")?m[g]=b.read:b.write&&(!d||d==="write")&&(m[g]=b.write));}else i({context:d,currentPointer:l,inSchema:c,node:h,path:[...f,g]});}}};i({context:null,currentPointer:null,inSchema:false,node:t,path:[]}),s.timeEnd();},Zi=({config:e,logger:t,spec:r})=>{let{graph:s}=Pt(r,t),o=Wm(r,t),i=Um({config:e,graph:s,logger:t,spec:r});Hm({logger:t,spec:r,split:i}),Zm({logger:t,spec:r,split:i}),Qm({logger:t,originalSchemas:o,spec:r,split:i});};var gr=({context:e})=>{let{logger:t}=e,r=t.timeEvent("transform-openapi-spec");e.config.parser.transforms.enums.enabled&&Ui({config:e.config.parser.transforms.enums,spec:e.spec}),e.config.parser.transforms.readWrite.enabled&&Zi({config:e.config.parser.transforms.readWrite,logger:t,spec:e.spec}),r.timeEnd();};var j=({source:e,target:t})=>{let r={...t};if(e&&(e.cookie&&(r.cookie?r.cookie={...r.cookie,...e.cookie}:r.cookie=e.cookie),e.header&&(r.header?r.header={...r.header,...e.header}:r.header=e.header),e.path&&(r.path?r.path={...r.path,...e.path}:r.path=e.path),e.query&&(r.query?r.query={...r.query,...e.query}:r.query=e.query)),!!Object.keys(r).length)return r};var Xm=e=>/^[A-Za-z_$][A-Za-z0-9_$]*$/.test(e),Gm=e=>e.map((t,r)=>typeof t=="number"?`[${t}]`:r===0?t:Xm(t)?`.${t}`:`['${t.replace(/"/g,"\\'")}']`).join(""),Jm=e=>{let t=Gm(e.path),r=e.severity==="error"?sn__default.default.bold.red:sn__default.default.bold.yellow,s=e.message.replace(/`([^`]+)`/g,(o,i)=>sn__default.default.yellow(`\`${i}\``));return `${r(`[${e.severity.toUpperCase()}]`)} ${sn__default.default.cyan(t)}: ${s}`},Ym=({context:e,issue:t})=>e.config.logs.level==="silent"?false:t.severity==="error"?e.config.logs.level!=="warn":true,hr=({context:e,result:t})=>{for(let r of t.issues)Ym({context:e,issue:r})&&console.log(Jm(r));t.valid||process.exit(1);};var Xi=({logger:e,operations:t,preserveOrder:r,schemas:s,spec:o})=>{let i=e.timeEvent("filter-spec");if(o.definitions){let a={};if(r)for(let[p,c]of Object.entries(o.definitions))s.has(N("schema",p))&&(a[p]=c);else for(let p of s){let{name:c}=se(p),m=o.definitions[c];m&&(a[c]=m);}o.definitions=a;}if(o.paths)for(let a of Object.entries(o.paths)){let p=a[0],c=a[1];for(let m of oe){if(!c[m])continue;let l=N("operation",$({method:m,path:p}));t.has(l)||delete c[m];}Object.keys(c).length||delete o.paths[p];}i.timeEnd();};var Gi=/^(application\/(pdf|rtf|msword|vnd\.(ms-|openxmlformats-officedocument\.)|zip|x-(7z|tar|rar|zip|iso)|octet-stream|gzip|x-msdownload|json\+download|xml|x-yaml|x-7z-compressed|x-tar)|text\/(yaml|css|javascript)|audio\/(mpeg|wav)|video\/(mp4|x-matroska)|image\/(vnd\.adobe\.photoshop|svg\+xml))(; ?charset=[^;]+)?$/i,Ji=/^application\/(.*\+)?json(;.*)?$/i,Yi=/^multipart\/form-data(;.*)?$/i,ea=/^text\/[a-z0-9.+-]+(;.*)?$/i,ta=/^application\/x-www-form-urlencoded(;.*)?$/i,ra=/^application\/octet-stream(;.*)?$/i,it=({mediaType:e})=>(Gi.lastIndex=0,Gi.test(e)),xr=({mediaType:e})=>{if(Ji.lastIndex=0,Ji.test(e))return "json";if(Yi.lastIndex=0,Yi.test(e))return "form-data";if(ea.lastIndex=0,ea.test(e))return "text";if(ta.lastIndex=0,ta.test(e))return "url-search-params";if(ra.lastIndex=0,ra.test(e))return "octet-stream"};var na=({content:e})=>{let{mediaType:t,schema:r}=e;return r&&"$ref"in r?{allOf:[{...r}]}:r?r.type==="string"&&!r.format&&it({mediaType:t})?{...r,format:"binary"}:r:it({mediaType:t})?{format:"binary",type:"string"}:void 0},eo=({mimeTypes:e,response:t})=>{let r=[];for(let s of e??[])r.push({mediaType:s,schema:t.schema,type:xr({mediaType:s})});return r};function Se(e){let t=`^(${e.keywords.join("|")})$`;return new RegExp(t)}var He=(e,t,r)=>{let s=[];for(let o in t)t[o]===e&&s.push(o);return !s.length&&(!r||r())?[V(e)]:s};var Br=({schema:e})=>{if(e.type)return e.type;if(e.properties)return "object"},ef=({irSchema:e,schema:t})=>{t.example&&(e.example=t.example),t.description&&(e.description=t.description),t.title&&(e.title=t.title);},kn=({irSchema:e,schema:t,state:r})=>{t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum?t.maximum!==void 0&&(e.exclusiveMaximum=t.maximum):t.maximum!==void 0&&(e.maximum=t.maximum),t.exclusiveMinimum?t.minimum!==void 0&&(e.exclusiveMinimum=t.minimum):t.minimum!==void 0&&(e.minimum=t.minimum),t.format&&(e.format=t.format),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?(e.accessScope="read",e.accessScopes=w(e.accessScopes,["read"])):r.isProperty&&(e.accessScopes=w(e.accessScopes,["both"]));},tf=({context:e,irSchema:t={},schema:r,state:s})=>{r.maxItems&&r.maxItems===r.minItems?t.type="tuple":t.type="array";let o=[];if(r.items){let i=Ee({context:e,schema:r.items,state:s});if(t.accessScopes=w(t.accessScopes,i.accessScopes),!o.length&&r.maxItems&&r.maxItems===r.minItems)o=Array(r.maxItems).fill(i);else if("$ref"in r.items)o.push(i);else {let a=r.items.allOf;a&&a.length>1&&!r.items["x-nullable"]?t={...t,...i}:o.push(i);}}return t=B({items:o,schema:t}),t},rf=({irSchema:e={}})=>(e.type="boolean",e),nf=({irSchema:e={},schema:t})=>(e.type=t.type,e),sf=({context:e,irSchema:t={},schema:r,state:s})=>{t.type="object";let o={};for(let i in r.properties){let a=r.properties[i];if(typeof a!="boolean"){let p=Ee({context:e,schema:a,state:{...s,isProperty:true}});t.accessScopes=w(t.accessScopes,p.accessScopes),o[i]=p;}}if(Object.keys(o).length&&(t.properties=o),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")s.inAllOf&&r.additionalProperties===false&&(!r.properties||Object.keys(r.properties).length===0)||(t.additionalProperties={type:r.additionalProperties?"unknown":"never"});else {let i=Ee({context:e,schema:r.additionalProperties,state:s});t.additionalProperties=i;}return r.required&&(t.required=r.required),t},of=({irSchema:e={}})=>(e.type="string",e),br=({schema:e})=>{let t={};return ef({irSchema:t,schema:e}),t},af=({context:e,schema:t,state:r})=>{let s=br({schema:t}),o=[],i=Br({schema:t}),a=t.allOf;for(let p of a){let m="$ref"in p?r:{...r,inAllOf:true},f=Ee({context:e,schema:p,state:m});if(s.accessScopes=w(s.accessScopes,f.accessScopes),t.required&&(f.required?f.required=[...f.required,...t.required]:f.required=t.required),o.push(f),p.$ref){let l=e.resolveRef(p.$ref);if(l.discriminator&&r.$ref){let y=He(r.$ref).map(h=>({const:h,type:"string"})),g={properties:{[l.discriminator]:y.length>1?{items:y,logicalOperator:"or"}:y[0]},type:"object"};l.required?.includes(l.discriminator)&&(g.required=[l.discriminator]),o.push(g);}if(!r.circularReferenceTracker.has(p.$ref)){let d=Ee({context:e,schema:l,state:{...r,$ref:p.$ref}});s.accessScopes=w(s.accessScopes,d.accessScopes);}}}if(i==="object"){let p=_r({context:e,schema:{...t,type:"object"},state:r});if(s.accessScopes=w(s.accessScopes,p.accessScopes),p.properties){for(let c of p.required??[])if(!p.properties[c])for(let m of a){let f=m.$ref?e.resolveRef(m.$ref):m;if(Br({schema:f})==="object"){let l=_r({context:e,schema:{...f,type:"object"},state:r});if(s.accessScopes=w(s.accessScopes,l.accessScopes),l.properties?.[c]){p.properties[c]=l.properties[c];break}}}o.push(p);}}if(s=B({items:o,logicalOperator:"and",mutateSchemaOneItem:true,schema:s}),t["x-nullable"]){let p=[{type:"null"}];o.length&&p.unshift(s),s={items:p,logicalOperator:"or"},p[0].deprecated&&(s.deprecated=p[0].deprecated),p[0].description&&(s.description=p[0].description);}return s},pf=({context:e,schema:t,state:r})=>{let s=br({schema:t});s.type="enum";let o=[];for(let[i,a]of t.enum.entries()){let p=typeof a,c;if(p==="string"||p==="number"||p==="boolean"?c=p:p==="object"&&Array.isArray(a)?c="array":a===null?t["x-nullable"]&&(c="null"):console.warn("\u{1F6A8}",`unhandled "${p}" typeof value "${a}" for enum`,t.enum),!c)continue;let m=_r({context:e,schema:{description:t["x-enum-descriptions"]?.[i],title:t["x-enum-varnames"]?.[i]??t["x-enumNames"]?.[i],type:c==="null"?"string":c},state:r});m.const=a,c==="null"&&(m.type=c),m.type==="array"&&(m.type="tuple"),s.accessScopes=w(s.accessScopes,m.accessScopes),o.push(m);}return s=B({items:o,schema:s}),s},cf=({context:e,schema:t,state:r})=>{let s={};if(s.$ref=decodeURI(t.$ref),s.$ref=s.$ref.replace(/#\/definitions\/([^/]+)/g,"#/components/schemas/$1"),!r.circularReferenceTracker.has(t.$ref)){let o=e.resolveRef(t.$ref),i=Ee({context:e,schema:o,state:{...r,$ref:t.$ref,isProperty:false}});s.accessScopes=w(s.accessScopes,i.accessScopes);}return s},mf=({context:e,irSchema:t,schema:r,state:s})=>{t||(t=br({schema:r}));let o={};kn({irSchema:o,schema:r,state:s}),o.default===null&&delete o.default;let i=[_r({context:e,irSchema:o,schema:r,state:s}),{type:"null"}];return t=B({items:i,schema:t}),t},ff=({context:e,schema:t,state:r})=>{let s=br({schema:t});kn({irSchema:s,schema:t,state:r});let o=Br({schema:t});return o?t["x-nullable"]?mf({context:e,irSchema:s,schema:{...t,type:o},state:r}):_r({context:e,irSchema:s,schema:{...t,type:o},state:r}):s},_r=({context:e,irSchema:t,schema:r,state:s})=>{switch(t||(t=br({schema:r}),kn({irSchema:t,schema:r,state:s})),r.type){case "array":return tf({context:e,irSchema:t,schema:r,state:s});case "boolean":return rf({irSchema:t});case "integer":case "number":return nf({irSchema:t,schema:r});case "object":return sf({context:e,irSchema:t,schema:r,state:s});case "string":return of({irSchema:t});default:return sa({irSchema:t,schema:r,state:s})}},sa=({irSchema:e,schema:t,state:r})=>(e||(e=br({schema:t})),e.type="unknown",kn({irSchema:e,schema:t,state:r}),e),Ee=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),t.$ref?cf({context:e,schema:t,state:r}):t.enum?pf({context:e,schema:t,state:r}):t.allOf?af({context:e,schema:t,state:r}):t.type||t.properties?ff({context:e,schema:t,state:r}):sa({schema:t,state:r})),oa=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[V(e)]=Ee({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var lf=e=>e==="boolean"||e==="integer"||e==="number"||e==="string",At=({context:e,name:t,schema:r})=>{if(Se(e.config.parser.pagination).test(t))return  true;if("$ref"in r){let o=e.resolveRef(r.$ref??"");if("in"in o&&o.in){let i="schema"in o?o.schema:{...o,in:void 0};return At({context:e,name:t,schema:i})}return At({context:e,name:t,schema:o})}if("in"in r){if(!r.in)return  false;let o="schema"in r?r.schema:{...r,in:void 0};return At({context:e,name:t,schema:o})}for(let o in r.properties)if(Se(e.config.parser.pagination).test(o)){let a=r.properties[o];if(typeof a!="boolean"&&!("$ref"in a)){let p=Br({schema:a});if(lf(p))return o}}for(let o of r.allOf??[]){let i=At({context:e,name:t,schema:o});if(i)return i}return  false};var df=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},uf=({context:e,method:t,operation:r,path:s,state:o})=>{let i={id:_t({context:e,id:r.operationId,method:t,path:s,state:o}),method:t,path:s};return r.operationId&&(i.operationId=r.operationId),df({irOperation:i,operation:r}),i},yf=({context:e,method:t,operation:r,path:s,securitySchemesMap:o,state:i})=>{let a=uf({context:e,method:t,operation:r,path:s,state:i});r.parameters&&(a.parameters=r.parameters);let p=false,c={mediaType:"",schema:{properties:{},required:[],type:"object"}},m=[];for(let f of r.requestBody??[]){let l="$ref"in f?e.resolveRef(f.$ref):f,d=l.in==="body"?l.schema:{...l,format:l.type==="file"?"binary":l.format,required:void 0,type:l.type==="file"?"string":l.type},y=eo({mimeTypes:r.consumes,response:{schema:d}}),g=y.find(h=>h.type==="json")||y[0];if(g){let h=At({context:e,name:"",schema:g.schema&&"$ref"in g.schema?{allOf:[{...g.schema}],description:l.description}:{description:l.description,...g.schema}}),b=Ee({context:e,schema:"$ref"in l?{allOf:[{...l,$ref:l.$ref,required:[],type:"string"}],description:l.description}:g.schema&&"$ref"in g.schema?{allOf:[{...g.schema}],description:l.description}:{description:l.description,...g.schema},state:void 0});c.mediaType=g.mediaType,l.in==="body"?c.schema=b:(c.schema.properties[l.name]=b,l.required&&m.push(l.name)),h&&(c.pagination=h),g.type&&(c.type=g.type);}l.required&&(p=true);}c.mediaType&&(m.length&&(c.schema.required=m),a.body=c,p&&(a.body.required=p));for(let f in r.responses){a.responses||(a.responses={});let l=r.responses[f],d="$ref"in l?e.resolveRef(l.$ref):l,y=eo({mimeTypes:r.produces?r.produces:["application/json"],response:d}),g=y.find(h=>h.type==="json")||y[0];g?a.responses[f]={mediaType:g.mediaType,schema:Ee({context:e,schema:{description:d.description,...na({content:g})},state:void 0})}:a.responses[f]={schema:{description:d.description,type:f==="204"?"void":"unknown"}};}if(r.security){let f=new Map;for(let l of r.security)for(let d in l){let y=o.get(d);if(!y)continue;let g;if(y.type==="apiKey"&&(g=y),y.type==="basic"&&(g={description:y.description,scheme:"basic",type:"http"}),y.type==="oauth2")switch(g={description:y.description,flows:{},type:"oauth2"},y.flow){case "accessCode":g.flows.authorizationCode={authorizationUrl:y.authorizationUrl,scopes:y.scopes,tokenUrl:y.tokenUrl};break;case "application":g.flows.clientCredentials={scopes:y.scopes,tokenUrl:y.tokenUrl};break;case "implicit":g.flows.implicit={authorizationUrl:y.authorizationUrl,scopes:y.scopes};break;case "password":g.flows.password={scopes:y.scopes,tokenUrl:y.tokenUrl};break}g&&f.set(d,g);}f.size&&(a.security=Array.from(f.values()));}return a},Et=({context:e,method:t,operation:r,path:s,securitySchemesMap:o,state:i})=>{e.ir.paths||(e.ir.paths={}),e.ir.paths[s]||(e.ir.paths[s]={}),e.ir.paths[s][t]=yf({context:e,method:t,operation:r,path:s,securitySchemesMap:o,state:i});};var gf=e=>{switch(e){case "multi":return  true;case "csv":case "pipes":case "ssv":case "tsv":default:return  false}},hf=e=>{switch(e){case "header":case "path":return "simple";case "query":default:return "form"}},at=({context:e,operation:t,parameters:r})=>{if(!r||!Object.keys(r).length)return;let s={};for(let o of r){let i="$ref"in o?e.dereference(o):o;if(i.in==="body"||i.in==="formData"){t.requestBody||(t.requestBody=[]),t.requestBody.push(i);continue}s[i.in]||(s[i.in]={}),s[i.in][i.name.toLocaleLowerCase()]=xf({context:e,parameter:i});}return s},xf=({context:e,parameter:t})=>{let r=t,s=r&&"$ref"in r?{allOf:[{...r,$ref:r.$ref,required:Array.isArray(r.required)?r.required:[],type:r.type}],description:t.description}:{description:t.description,...r,required:Array.isArray(r.required)?r.required:[],type:r.type},o=At({context:e,name:t.name,schema:s}),i=hf(t.in),c={allowReserved:false,explode:gf(t.collectionFormat),location:t.in,name:t.name,schema:Ee({context:e,schema:s,state:void 0}),style:i};return t.description&&(c.description=t.description),o&&(c.pagination=o),t.required&&(c.required=t.required),c};var ia=/^(([^:/?#]+):)?((\/\/)?([^:/?#]*)(:?([^/?#]*)))?([^?#]*)(\?([^#]*))?(#(.*))?/,Qe=e=>{let t={host:"",path:"",port:"",protocol:""};ia.lastIndex=0;let r=e.match(ia);if(!r)return t;let s=r[5]||"";if(s==="."||s==="..")return t;let o=r[8]||"",i=r[2]||"";return i.length===1?t:{host:s,path:o==="/"?"":o,port:r[7]||"",protocol:i}};var aa=({context:e})=>{let t=e.spec.schemes??[],r=e.spec.host??"",s=e.spec.basePath??"";if(typeof e.config.input.path=="string"){let i=Qe(e.config.input.path);t.length||i.protocol&&(t=[i.protocol]),r||(r=`${i.host}${i.port?`:${i.port}`:""}`);}t.length||(t=[""]);let o=t.map(i=>`${i?`${i}://`:""}${r}${s}`).filter(Boolean);o.length&&(e.ir.servers=o.map(i=>({url:i})));};var pa=(e,t)=>{let r=t.timeEvent("validate"),s=[],o=new Map;if(e.paths)for(let i of Object.entries(e.paths)){let a=i[0],p=i[1];for(let c of oe){if(c==="trace")continue;let m=p[c];if(!m)continue;let f=$({method:c,path:a});m.operationId&&(o.has(m.operationId)?s.push({code:"duplicate_key",context:{key:"operationId",value:m.operationId},message:"Duplicate `operationId` found. Each `operationId` must be unique.",path:["paths",a,c,"operationId"],severity:"error"}):o.set(m.operationId,f));}}return r.timeEnd(),{issues:s,valid:!s.some(i=>i.severity==="error")}};var to=e=>{if(e.config.parser.validate_EXPERIMENTAL){let o=pa(e.spec,e.logger);hr({context:e,result:o});}if(dr(e.config.parser.filters)){let o=lr(e.config.parser.filters,e.spec,e.logger),{graph:i}=Pt(e.spec,e.logger),{resourceMetadata:a}=yr(i,e.logger),p=ur({filters:o,logger:e.logger,resourceMetadata:a});Xi({...p,logger:e.logger,preserveOrder:o.preserveOrder,spec:e.spec});}gr({context:e});let r={ids:new Map},s=new Map;for(let o in e.spec.securityDefinitions){let i=e.spec.securityDefinitions[o];s.set(o,i);}if(e.spec.definitions)for(let o in e.spec.definitions){let i=`#/definitions/${o}`,a=e.spec.definitions[o];oa({$ref:i,context:e,schema:a});}aa({context:e});for(let o in e.spec.paths){if(o.startsWith("x-"))continue;let i=e.spec.paths[o],a=i.$ref?{...e.resolveRef(i.$ref),...i}:i,p={consumes:e.spec.consumes,produces:e.spec.produces,responses:{},security:e.spec.security},c={context:e,operation:{...p,parameters:at({context:e,operation:p,parameters:a.parameters})},path:o,securitySchemesMap:s,state:r};if(a.delete){let m=j({source:at({context:e,operation:a.delete,parameters:a.delete.parameters}),target:c.operation.parameters});Et({...c,method:"delete",operation:{...c.operation,...a.delete,parameters:m}});}if(a.get){let m=j({source:at({context:e,operation:a.get,parameters:a.get.parameters}),target:c.operation.parameters});Et({...c,method:"get",operation:{...c.operation,...a.get,parameters:m}});}if(a.head){let m=j({source:at({context:e,operation:a.head,parameters:a.head.parameters}),target:c.operation.parameters});Et({...c,method:"head",operation:{...c.operation,...a.head,parameters:m}});}if(a.options){let m=j({source:at({context:e,operation:a.options,parameters:a.options.parameters}),target:c.operation.parameters});Et({...c,method:"options",operation:{...c.operation,...a.options,parameters:m}});}if(a.patch){let m=j({source:at({context:e,operation:a.patch,parameters:a.patch.parameters}),target:c.operation.parameters});Et({...c,method:"patch",operation:{...c.operation,...a.patch,parameters:m}});}if(a.post){let m=j({source:at({context:e,operation:a.post,parameters:a.post.parameters}),target:c.operation.parameters});Et({...c,method:"post",operation:{...c.operation,...a.post,parameters:m}});}if(a.put){let m=j({source:at({context:e,operation:a.put,parameters:a.put.parameters}),target:c.operation.parameters});Et({...c,method:"put",operation:{...c.operation,...a.put,parameters:m}});}}};var ca=({logger:e,operations:t,parameters:r,preserveOrder:s,requestBodies:o,responses:i,schemas:a,spec:p})=>{let c=e.timeEvent("filter-spec");if(p.components){if(p.components.parameters){let m={};if(s)for(let[f,l]of Object.entries(p.components.parameters))r.has(N("parameter",f))&&(m[f]=l);else for(let f of r){let{name:l}=se(f),d=p.components.parameters[l];d&&(m[l]=d);}p.components.parameters=m;}if(p.components.requestBodies){let m={};if(s)for(let[f,l]of Object.entries(p.components.requestBodies))o.has(N("body",f))&&(m[f]=l);else for(let f of o){let{name:l}=se(f),d=p.components.requestBodies[l];d&&(m[l]=d);}p.components.requestBodies=m;}if(p.components.responses){let m={};if(s)for(let[f,l]of Object.entries(p.components.responses))i.has(N("response",f))&&(m[f]=l);else for(let f of i){let{name:l}=se(f),d=p.components.responses[l];d&&(m[l]=d);}p.components.responses=m;}if(p.components.schemas){let m={};if(s)for(let[f,l]of Object.entries(p.components.schemas))a.has(N("schema",f))&&(m[f]=l);else for(let f of a){let{name:l}=se(f),d=p.components.schemas[l];d&&(m[l]=d);}p.components.schemas=m;}}if(p.paths)for(let m of Object.entries(p.paths)){let f=m[0],l=m[1];for(let d of oe){if(!l[d])continue;let g=N("operation",$({method:d,path:f}));t.has(g)||delete l[d];}Object.keys(l).length||delete p.paths[f];}c.timeEnd();};var ma=({content:e})=>{let{mediaType:t,schema:r}=e;return r&&"$ref"in r?{allOf:[{...r}]}:r?r.type==="string"&&!r.format&&it({mediaType:t})?{...r,format:"binary"}:r:it({mediaType:t})?{format:"binary",type:"string"}:void 0},pt=({content:e})=>{let t=[];for(let r in e)t.push({mediaType:r,schema:e[r].schema,type:xr({mediaType:r})});return t};var zt=({schema:e})=>{if(e.type)return e.type;if(e.properties)return "object"},bf=({irSchema:e,schema:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.example&&(e.example=t.example),t.description&&(e.description=t.description),t.title&&(e.title=t.title);},Cn=({irSchema:e,schema:t,state:r})=>{t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum?t.maximum!==void 0&&(e.exclusiveMaximum=t.maximum):t.maximum!==void 0&&(e.maximum=t.maximum),t.exclusiveMinimum?t.minimum!==void 0&&(e.exclusiveMinimum=t.minimum):t.minimum!==void 0&&(e.minimum=t.minimum),t.format&&(e.format=t.format),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?(e.accessScope="read",e.accessScopes=w(e.accessScopes,["read"])):t.writeOnly?(e.accessScope="write",e.accessScopes=w(e.accessScopes,["write"])):r.isProperty&&(e.accessScopes=w(e.accessScopes,["both"]));},Of=({context:e,irSchema:t={},schema:r,state:s})=>{r.maxItems&&r.maxItems===r.minItems?t.type="tuple":t.type="array";let o=[];if(r.items){let i=pe({context:e,schema:r.items,state:s});if(t.accessScopes=w(t.accessScopes,i.accessScopes),!o.length&&r.maxItems&&r.maxItems===r.minItems)o=Array(r.maxItems).fill(i);else if("$ref"in r.items)o.push(i);else {let a=r.items.allOf||r.items.anyOf||r.items.oneOf;a&&a.length>1&&!r.items.nullable?t={...t,...i}:o.push(i);}}return t=B({items:o,schema:t}),t},Sf=({irSchema:e={}})=>(e.type="boolean",e),Tf=({irSchema:e={},schema:t})=>(e.type=t.type,e),Rf=({context:e,irSchema:t={},schema:r,state:s})=>{t.type="object";let o={};for(let i in r.properties){let a=r.properties[i];if(typeof a!="boolean"){let p=pe({context:e,schema:a,state:{...s,isProperty:true}});t.accessScopes=w(t.accessScopes,p.accessScopes),o[i]=p;}}if(Object.keys(o).length&&(t.properties=o),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")s.inAllOf&&r.additionalProperties===false&&(!r.properties||Object.keys(r.properties).length===0)||(t.additionalProperties={type:r.additionalProperties?"unknown":"never"});else {let i=pe({context:e,schema:r.additionalProperties,state:s});t.additionalProperties=i;}return r.required&&(t.required=r.required),t},If=({irSchema:e={}})=>(e.type="string",e),Nt=({schema:e})=>{let t={};return bf({irSchema:t,schema:e}),t},Pf=({context:e,schema:t,state:r})=>{let s=Nt({schema:t}),o=[],i=zt({schema:t}),a=t.allOf;for(let p of a){let m="$ref"in p?r:{...r,inAllOf:true},f=pe({context:e,schema:p,state:m});if(s.accessScopes=w(s.accessScopes,f.accessScopes),t.required&&(f.required?f.required=[...f.required,...t.required]:f.required=t.required),o.push(f),"$ref"in p){let l=e.resolveRef(p.$ref);if(l.discriminator&&r.$ref){let d=He(r.$ref,l.discriminator.mapping,l.oneOf?()=>l.oneOf.some(y=>"$ref"in y&&y.$ref===r.$ref):void 0);if(d.length>0){let y=d.map(h=>({const:h,type:"string"})),g={properties:{[l.discriminator.propertyName]:y.length>1?{items:y,logicalOperator:"or"}:y[0]},type:"object"};l.required?.includes(l.discriminator.propertyName)&&(g.required=[l.discriminator.propertyName]),o.push(g);}}if(!r.circularReferenceTracker.has(p.$ref)){let d=pe({context:e,schema:l,state:{...r,$ref:p.$ref}});s.accessScopes=w(s.accessScopes,d.accessScopes);}}}if(i==="object"){let p=Wt({context:e,schema:{...t,type:"object"},state:r});if(s.accessScopes=w(s.accessScopes,p.accessScopes),p.properties){for(let c of p.required??[])if(!p.properties[c])for(let m of a){let f="$ref"in m?e.resolveRef(m.$ref):m;if(zt({schema:f})==="object"){let l=Wt({context:e,schema:{...f,type:"object"},state:r});if(s.accessScopes=w(s.accessScopes,l.accessScopes),l.properties?.[c]){p.properties[c]=l.properties[c];break}}}o.push(p);}}if(s=B({items:o,logicalOperator:"and",mutateSchemaOneItem:true,schema:s}),t.nullable){let p=[{type:"null"}];o.length&&p.unshift(s),s={items:p,logicalOperator:"or"},p[0].deprecated&&(s.deprecated=p[0].deprecated),p[0].description&&(s.description=p[0].description);}return s},Af=({context:e,schema:t,state:r})=>{let s=Nt({schema:t}),o=[],i=zt({schema:t}),a=t.anyOf;for(let p of a){let c=pe({context:e,schema:p,state:r});if(s.accessScopes=w(s.accessScopes,c.accessScopes),t.discriminator&&c.$ref!=null){let f=He(c.$ref,t.discriminator.mapping).map(d=>({const:d,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:f.length>1?{items:f,logicalOperator:"or"}:f[0]},type:"object"},c],logicalOperator:"and"};}o.push(c);}if(t.nullable&&o.push({type:"null"}),s=B({items:o,mutateSchemaOneItem:true,schema:s}),i==="object"){let p=Wt({context:e,schema:{...t,type:"object"},state:r});s.accessScopes=w(s.accessScopes,p.accessScopes),p.properties&&(s={items:[s,p],logicalOperator:"and"});}return s},Ef=({context:e,schema:t,state:r})=>{let s=Nt({schema:t});s.type="enum";let o=[];for(let[i,a]of t.enum.entries()){let p=typeof a,c;if(p==="string"||p==="number"||p==="boolean"?c=p:p==="object"&&Array.isArray(a)?c="array":a===null?t.nullable&&(c="null"):console.warn("\u{1F6A8}",`unhandled "${p}" typeof value "${a}" for enum`,t.enum),!c)continue;let m=Wt({context:e,schema:{description:t["x-enum-descriptions"]?.[i],title:t["x-enum-varnames"]?.[i]??t["x-enumNames"]?.[i],type:c==="null"?"string":c},state:r});m.const=a,c==="null"&&(m.type=c),m.type==="array"&&(m.type="tuple"),s.accessScopes=w(s.accessScopes,m.accessScopes),o.push(m);}return s=B({items:o,schema:s}),s},Nf=({context:e,schema:t,state:r})=>{let s=Nt({schema:t}),o=[],i=zt({schema:t}),a=t.oneOf;for(let p of a){let c=pe({context:e,schema:p,state:r});if(s.accessScopes=w(s.accessScopes,c.accessScopes),t.discriminator&&c.$ref!=null){let f=He(c.$ref,t.discriminator.mapping).map(d=>({const:d,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:f.length>1?{items:f,logicalOperator:"or"}:f[0]},required:[t.discriminator.propertyName],type:"object"},c],logicalOperator:"and"};}c.logicalOperator==="or"&&c.type!=="array"&&c.items?o=o.concat(c.items):o.push(c);}if(t.nullable&&o.push({type:"null"}),s=B({items:o,mutateSchemaOneItem:true,schema:s}),i==="object"){let p=Wt({context:e,schema:{...t,type:"object"},state:r});s.accessScopes=w(s.accessScopes,p.accessScopes),p.properties&&(s={items:[s,p],logicalOperator:"and"});}return s},jf=({context:e,schema:t,state:r})=>{let s={};if(s.$ref=decodeURI(t.$ref),!r.circularReferenceTracker.has(t.$ref)){let o=e.resolveRef(t.$ref),i=pe({context:e,schema:o,state:{...r,$ref:t.$ref,isProperty:false}});s.accessScopes=w(s.accessScopes,i.accessScopes);}return s},kf=({context:e,irSchema:t,schema:r,state:s})=>{t||(t=Nt({schema:r}));let o={};Cn({irSchema:o,schema:r,state:s}),o.default===null&&delete o.default;let i=[Wt({context:e,irSchema:o,schema:r,state:s}),{type:"null"}];return t=B({items:i,schema:t}),t},Cf=({context:e,schema:t,state:r})=>{let s=Nt({schema:t});Cn({irSchema:s,schema:t,state:r});let o=zt({schema:t});return o?t.nullable?kf({context:e,irSchema:s,schema:{...t,type:o},state:r}):Wt({context:e,irSchema:s,schema:{...t,type:o},state:r}):s},Wt=({context:e,irSchema:t,schema:r,state:s})=>{switch(t||(t=Nt({schema:r}),Cn({irSchema:t,schema:r,state:s})),r.type){case "array":return Of({context:e,irSchema:t,schema:r,state:s});case "boolean":return Sf({irSchema:t});case "integer":case "number":return Tf({irSchema:t,schema:r});case "object":return Rf({context:e,irSchema:t,schema:r,state:s});case "string":return If({irSchema:t});default:return fa({irSchema:t,schema:r,state:s})}},fa=({irSchema:e,schema:t,state:r})=>(e||(e=Nt({schema:t})),e.type="unknown",Cn({irSchema:e,schema:t,state:r}),e),pe=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),"$ref"in t?jf({context:e,schema:t,state:r}):t.enum?Ef({context:e,schema:t,state:r}):t.allOf?Pf({context:e,schema:t,state:r}):t.anyOf?Af({context:e,schema:t,state:r}):t.oneOf?Nf({context:e,schema:t,state:r}):t.type||t.properties?Cf({context:e,schema:t,state:r}):fa({schema:t,state:r})),la=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[V(e)]=pe({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var vf=e=>e==="boolean"||e==="integer"||e==="number"||e==="string",Ht=({context:e,name:t,schema:r})=>{if(Se(e.config.parser.pagination).test(t))return  true;if("$ref"in r){let o=e.resolveRef(r.$ref);if("content"in o||"in"in o){let i;if("in"in o&&(i=o.schema),!i){let a=pt({content:o.content}),p=a.find(c=>c.type==="json")||a[0];p?.schema&&(i=p.schema);}return i?Ht({context:e,name:t,schema:i}):false}return Ht({context:e,name:t,schema:o})}for(let o in r.properties)if(Se(e.config.parser.pagination).test(o)){let a=r.properties[o];if(typeof a!="boolean"&&!("$ref"in a)){let p=zt({schema:a});if(vf(p))return o}}for(let o of r.allOf??[]){let i=Ht({context:e,name:t,schema:o});if(i)return i}return  false};var wf=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},qf=({context:e,method:t,operation:r,path:s,state:o})=>{let i={id:_t({context:e,id:r.operationId,method:t,path:s,state:o}),method:t,path:s};return r.operationId&&(i.operationId=r.operationId),wf({irOperation:i,operation:r}),i},$f=({context:e,method:t,operation:r,path:s,securitySchemesMap:o,state:i})=>{let a=qf({context:e,method:t,operation:r,path:s,state:i});if(r.parameters&&(a.parameters=r.parameters),r.requestBody){let p="$ref"in r.requestBody?e.resolveRef(r.requestBody.$ref):r.requestBody,c=pt({content:p.content}),m=c.find(f=>f.type==="json")||c[0];if(m){let f=Ht({context:e,name:"",schema:m.schema&&"$ref"in m.schema?{allOf:[{...m.schema}],description:p.description}:{description:p.description,...m.schema}});a.body={mediaType:m.mediaType,schema:pe({context:e,schema:"$ref"in r.requestBody?{allOf:[{...r.requestBody}],description:p.description}:m.schema&&"$ref"in m.schema?{allOf:[{...m.schema}],description:p.description}:{description:p.description,...m.schema},state:void 0})},f&&(a.body.pagination=f),p.required&&(a.body.required=p.required),m.type&&(a.body.type=m.type);}}for(let p in r.responses){a.responses||(a.responses={});let c=r.responses[p],m="$ref"in c?e.resolveRef(c.$ref):c,f=pt({content:m.content}),l=f.find(d=>d.type==="json")||f[0];l?a.responses[p]={mediaType:l.mediaType,schema:pe({context:e,schema:{description:m.description,...ma({content:l})},state:void 0})}:a.responses[p]={schema:{description:m.description,type:p==="204"?"void":"unknown"}};}if(r.security){let p=new Map;for(let c of r.security)for(let m in c){let f=o.get(m);f&&p.set(m,f);}p.size&&(a.security=Array.from(p.values()));}return a},ct=({context:e,method:t,operation:r,path:s,securitySchemesMap:o,state:i})=>{e.ir.paths||(e.ir.paths={}),e.ir.paths[s]||(e.ir.paths[s]={}),r.servers&&(e.ir.servers=[...e.ir.servers??[],...r.servers]),e.ir.paths[s][t]=$f({context:e,method:t,operation:r,path:s,securitySchemesMap:o,state:i});};var Ff=e=>{switch(e){case "query":return  false;default:return}},Mf=e=>{switch(e){case "deepObject":case "form":return  true;default:return  false}},Lf=e=>{switch(e){case "header":case "path":return "simple";case "cookie":case "query":return "form"}},Ue=({context:e,parameters:t})=>{if(!t||!Object.keys(t).length)return;let r={};for(let s of t){let o="$ref"in s?e.dereference(s):s;r[o.in]||(r[o.in]={}),r[o.in][o.name.toLocaleLowerCase()]=da({context:e,parameter:o});}return r},da=({context:e,parameter:t})=>{let r=t.schema;if(!r){let m=pt({content:t.content}),f=m.find(l=>l.type==="json")||m[0];f&&(r=f.schema);}let s=r&&"$ref"in r?{allOf:[{...r}],deprecated:t.deprecated,description:t.description}:{deprecated:t.deprecated,description:t.description,...r},o=Ht({context:e,name:t.name,schema:s}),i=t.style||Lf(t.in),a=t.explode!==void 0?t.explode:Mf(i),c={allowReserved:t.allowReserved!==void 0?t.allowReserved:Ff(t.in),explode:a,location:t.in,name:t.name,schema:pe({context:e,schema:s,state:void 0}),style:i};return t.deprecated&&(c.deprecated=t.deprecated),t.description&&(c.description=t.description),o&&(c.pagination=o),t.required&&(c.required=t.required),c},ua=({$ref:e,context:t,parameter:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.parameters||(t.ir.components.parameters={}),t.ir.components.parameters[V(e)]=da({context:t,parameter:r});};var Df=({context:e,requestBody:t})=>{let r=pt({content:t.content}),s=r.find(p=>p.type==="json")||r[0],o=s?s.schema:void 0,i={description:t.description,...o},a={schema:pe({context:e,schema:i,state:void 0})};return t.description&&(a.description=t.description),t.required&&(a.required=t.required),a},ya=({$ref:e,context:t,requestBody:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.requestBodies||(t.ir.components.requestBodies={}),t.ir.components.requestBodies[V(e)]=Df({context:t,requestBody:r});};var ga=({context:e})=>{if(e.spec.servers){e.ir.servers=e.spec.servers;return}if(typeof e.config.input.path=="string"){let t=Qe(e.config.input.path);e.ir.servers=[{url:`${t.protocol?`${t.protocol}://`:""}${t.host}${t.port?`:${t.port}`:""}`}];}e.ir.servers||(e.ir.servers=[{url:"/"}]);};var ha=(e,t)=>{let r=t.timeEvent("validate"),s=[],o=new Map;if(e.paths)for(let i of Object.entries(e.paths)){let a=i[0],p=i[1];for(let c of oe){let m=p[c];if(!m)continue;let f=$({method:c,path:a});m.operationId&&(o.has(m.operationId)?s.push({code:"duplicate_key",context:{key:"operationId",value:m.operationId},message:"Duplicate `operationId` found. Each `operationId` must be unique.",path:["paths",a,c,"operationId"],severity:"error"}):o.set(m.operationId,f));}}if(e.servers){(typeof e.servers!="object"||!Array.isArray(e.servers))&&s.push({code:"invalid_type",message:"`servers` must be an array.",path:[],severity:"error"});for(let i=0;i<e.servers.length;i++){let a=e.servers[i];!a||typeof a!="object"?s.push({code:"invalid_type",context:{actual:typeof a,expected:"object"},message:"Each entry in `servers` must be an object.",path:["servers",i],severity:"error"}):a.url||s.push({code:"missing_required_field",context:{field:"url"},message:"Missing required field `url` in server object.",path:["servers",i],severity:"error"});}}return r.timeEnd(),{issues:s,valid:!s.some(i=>i.severity==="error")}};var ro=e=>{if(e.config.parser.validate_EXPERIMENTAL){let o=ha(e.spec,e.logger);hr({context:e,result:o});}if(dr(e.config.parser.filters)){let o=lr(e.config.parser.filters,e.spec,e.logger),{graph:i}=Pt(e.spec,e.logger),{resourceMetadata:a}=yr(i,e.logger),p=ur({filters:o,logger:e.logger,resourceMetadata:a});ca({...p,logger:e.logger,preserveOrder:o.preserveOrder,spec:e.spec});}gr({context:e});let r={ids:new Map},s=new Map;if(e.spec.components){for(let o in e.spec.components.securitySchemes){let i=e.spec.components.securitySchemes[o],a="$ref"in i?e.resolveRef(i.$ref):i;s.set(o,a);}for(let o in e.spec.components.parameters){let i=`#/components/parameters/${o}`,a=e.spec.components.parameters[o],p="$ref"in a?e.resolveRef(a.$ref):a;ua({$ref:i,context:e,parameter:p});}for(let o in e.spec.components.requestBodies){let i=`#/components/requestBodies/${o}`,a=e.spec.components.requestBodies[o],p="$ref"in a?e.resolveRef(a.$ref):a;ya({$ref:i,context:e,requestBody:p});}for(let o in e.spec.components.schemas){let i=`#/components/schemas/${o}`,a=e.spec.components.schemas[o];la({$ref:i,context:e,schema:a});}}ga({context:e});for(let o in e.spec.paths){let i=e.spec.paths[o],a=i.$ref?{...e.resolveRef(i.$ref),...i}:i,p={context:e,operation:{description:a.description,parameters:Ue({context:e,parameters:a.parameters}),security:e.spec.security,servers:a.servers,summary:a.summary},path:o,securitySchemesMap:s,state:r};a.delete&&ct({...p,method:"delete",operation:{...p.operation,...a.delete,parameters:j({source:Ue({context:e,parameters:a.delete.parameters}),target:p.operation.parameters})}}),a.get&&ct({...p,method:"get",operation:{...p.operation,...a.get,parameters:j({source:Ue({context:e,parameters:a.get.parameters}),target:p.operation.parameters})}}),a.head&&ct({...p,method:"head",operation:{...p.operation,...a.head,parameters:j({source:Ue({context:e,parameters:a.head.parameters}),target:p.operation.parameters})}}),a.options&&ct({...p,method:"options",operation:{...p.operation,...a.options,parameters:j({source:Ue({context:e,parameters:a.options.parameters}),target:p.operation.parameters})}}),a.patch&&ct({...p,method:"patch",operation:{...p.operation,...a.patch,parameters:j({source:Ue({context:e,parameters:a.patch.parameters}),target:p.operation.parameters})}}),a.post&&ct({...p,method:"post",operation:{...p.operation,...a.post,parameters:j({source:Ue({context:e,parameters:a.post.parameters}),target:p.operation.parameters})}}),a.put&&ct({...p,method:"put",operation:{...p.operation,...a.put,parameters:j({source:Ue({context:e,parameters:a.put.parameters}),target:p.operation.parameters})}}),a.trace&&ct({...p,method:"trace",operation:{...p.operation,...a.trace,parameters:j({source:Ue({context:e,parameters:a.trace.parameters}),target:p.operation.parameters})}});}};var xa=({logger:e,operations:t,parameters:r,preserveOrder:s,requestBodies:o,responses:i,schemas:a,spec:p})=>{let c=e.timeEvent("filter-spec");if(p.components){if(p.components.parameters){let m={};if(s)for(let[f,l]of Object.entries(p.components.parameters))r.has(N("parameter",f))&&(m[f]=l);else for(let f of r){let{name:l}=se(f),d=p.components.parameters[l];d&&(m[l]=d);}p.components.parameters=m;}if(p.components.requestBodies){let m={};if(s)for(let[f,l]of Object.entries(p.components.requestBodies))o.has(N("body",f))&&(m[f]=l);else for(let f of o){let{name:l}=se(f),d=p.components.requestBodies[l];d&&(m[l]=d);}p.components.requestBodies=m;}if(p.components.responses){let m={};if(s)for(let[f,l]of Object.entries(p.components.responses))i.has(N("response",f))&&(m[f]=l);else for(let f of i){let{name:l}=se(f),d=p.components.responses[l];d&&(m[l]=d);}p.components.responses=m;}if(p.components.schemas){let m={};if(s)for(let[f,l]of Object.entries(p.components.schemas))a.has(N("schema",f))&&(m[f]=l);else for(let f of a){let{name:l}=se(f),d=p.components.schemas[l];d&&(m[l]=d);}p.components.schemas=m;}}if(p.paths)for(let m of Object.entries(p.paths)){let f=m[0],l=m[1];for(let d of oe){if(!l[d])continue;let g=N("operation",$({method:d,path:f}));t.has(g)||delete l[d];}Object.keys(l).length||delete p.paths[f];}c.timeEnd();};var ba=({content:e})=>{let{mediaType:t,schema:r}=e;return r?r.type==="string"&&!r.format&&it({mediaType:t})?{...r,format:"binary"}:r:it({mediaType:t})?{format:"binary",type:"string"}:void 0},mt=({content:e})=>{let t=[];for(let r in e)t.push({mediaType:r,schema:e[r].schema,type:xr({mediaType:r})});return t};var Ze=({schema:e})=>typeof e.type=="string"?[e.type]:e.type?e.type:e.properties?["object"]:[],Vf=({irSchema:e,schema:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.example&&(e.example=t.example),t.description&&(e.description=t.description),t.title&&(e.title=t.title);},vn=({irSchema:e,schema:t})=>{if(t.const!==void 0&&(e.const=t.const,!t.type))if(t.const===null)e.type="null";else switch(typeof t.const){case "bigint":case "number":e.type="number";break;case "boolean":e.type="boolean";break;case "string":e.type="string";break}t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum!==void 0&&(e.exclusiveMaximum=t.exclusiveMaximum),t.exclusiveMinimum!==void 0&&(e.exclusiveMinimum=t.exclusiveMinimum),t.format&&(e.format=t.format),t.maximum!==void 0&&(e.maximum=t.maximum),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minimum!==void 0&&(e.minimum=t.minimum),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?e.accessScope="read":t.writeOnly&&(e.accessScope="write");},Bf=({context:e,irSchema:t={},schema:r,state:s})=>{r.prefixItems&&r.prefixItems.length||r.maxItems&&r.maxItems===r.minItems||r.const!==void 0?t.type="tuple":t.type="array";let o=[];for(let i of r.prefixItems??[]){let a=Y({context:e,schema:i,state:s});o.push(a);}if(r.items){let i=Y({context:e,schema:r.items,state:s});if(!o.length&&r.maxItems&&r.maxItems===r.minItems)o=Array(r.maxItems).fill(i);else {let a=r.items.allOf||r.items.anyOf||r.items.oneOf;a&&a.length>1&&!Ze({schema:r.items}).includes("null")?t={...t,...i}:o.push(i);}}return t=B({items:o,schema:t}),t},_f=({irSchema:e={}})=>(e.type="boolean",e),Kf=({irSchema:e={}})=>(e.type="null",e),zf=({irSchema:e={},schema:t})=>(e.type=t.type,e),Wf=({context:e,irSchema:t={},schema:r,state:s})=>{t.type="object";let o={};for(let i in r.properties){let a=r.properties[i];if(typeof a!="boolean"){let p=Y({context:e,schema:a,state:{...s,isProperty:true}});o[i]=p;}}if(Object.keys(o).length&&(t.properties=o),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")s.inAllOf&&r.additionalProperties===false&&(!r.properties||Object.keys(r.properties).length===0)&&(!r.patternProperties||Object.keys(r.patternProperties).length===0)||(t.additionalProperties={type:r.additionalProperties?"unknown":"never"});else {let i=Y({context:e,schema:r.additionalProperties,state:s});t.additionalProperties=i;}if(r.patternProperties){let i={};for(let a in r.patternProperties){let p=r.patternProperties[a],c=Y({context:e,schema:p,state:s});i[a]=c;}Object.keys(i).length&&(t.patternProperties=i);}return r.propertyNames&&(t.propertyNames=Y({context:e,schema:r.propertyNames,state:s})),r.required&&(t.required=r.required),t},Hf=({irSchema:e={}})=>(e.type="string",e),ft=({schema:e})=>{let t={};return Vf({irSchema:t,schema:e}),t},Qf=({context:e,schema:t,state:r})=>{let s=ft({schema:t}),o=[],i=Ze({schema:t}),a=t.allOf;for(let p of a){let m="$ref"in p?r:{...r,inAllOf:true},f=Y({context:e,schema:p,state:m});if(t.required&&(f.required?f.required=[...f.required,...t.required]:f.required=t.required),o.push(f),p.$ref){let l=e.resolveRef(p.$ref);if(l.discriminator&&r.$ref){let d=He(r.$ref,l.discriminator.mapping,l.oneOf?()=>l.oneOf.some(y=>"$ref"in y&&y.$ref===r.$ref):void 0);if(d.length>0){let y=d.map(h=>({const:h,type:"string"})),g={properties:{[l.discriminator.propertyName]:y.length>1?{items:y,logicalOperator:"or"}:y[0]},type:"object"};l.required?.includes(l.discriminator.propertyName)&&(g.required=[l.discriminator.propertyName]),o.push(g);}}r.circularReferenceTracker.has(p.$ref)||Y({context:e,schema:l,state:{...r,$ref:p.$ref}});}}if(i.includes("object")){let p=Qt({context:e,schema:{...t,type:"object"},state:r});if(p.properties){for(let c of p.required??[])if(!p.properties[c])for(let m of a){let f=m.$ref?e.resolveRef(m.$ref):m;if(Ze({schema:f}).includes("object")){let l=Qt({context:e,schema:{...f,type:"object"},state:r});if(l.properties?.[c]){p.properties[c]=l.properties[c];break}}}o.push(p);}}if(s=B({items:o,logicalOperator:"and",mutateSchemaOneItem:true,schema:s}),i.includes("null")){let p=[{type:"null"}];o.length&&p.unshift(s),s={items:p,logicalOperator:"or"};}return s},Uf=({context:e,schema:t,state:r})=>{let s=ft({schema:t}),o=[],i=Ze({schema:t}),a=t.anyOf;for(let p of a){let c=Y({context:e,schema:p,state:r});if(t.discriminator&&c.$ref!=null){let f=He(c.$ref,t.discriminator.mapping).map(d=>({const:d,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:f.length>1?{items:f,logicalOperator:"or"}:f[0]},type:"object"},c],logicalOperator:"and"};}o.push(c);}if(i.includes("null")&&o.push({type:"null"}),s=B({items:o,mutateSchemaOneItem:true,schema:s}),i.includes("object")){let p=Qt({context:e,schema:{...t,type:"object"},state:r});p.properties&&(s={items:[s,p],logicalOperator:"and"});}return s},Zf=({context:e,schema:t,state:r})=>{let s=ft({schema:t});s.type="enum";let o=[],i=Ze({schema:t});for(let[a,p]of t.enum.entries()){let c=typeof p,m;if(c==="string"||c==="number"||c==="boolean"?m=c:c==="object"&&Array.isArray(p)?m="array":p===null?i.includes("null")&&(m="null"):console.warn("\u{1F6A8}",`unhandled "${c}" typeof value "${p}" for enum`,t.enum),!m)continue;let f=Qt({context:e,schema:{const:p,description:t["x-enum-descriptions"]?.[a],title:t["x-enum-varnames"]?.[a]??t["x-enumNames"]?.[a],type:m},state:r});o.push(f);}return s=B({items:o,schema:s}),s},Xf=({context:e,schema:t,state:r})=>{let s=ft({schema:t}),o=[],i=Ze({schema:t}),a=t.oneOf;for(let p of a){let c=Y({context:e,schema:p,state:r});if(t.discriminator&&c.$ref!=null){let f=He(c.$ref,t.discriminator.mapping).map(d=>({const:d,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:f.length>1?{items:f,logicalOperator:"or"}:f[0]},required:[t.discriminator.propertyName],type:"object"},c],logicalOperator:"and"};}c.logicalOperator==="or"&&c.type!=="array"&&c.items?o=o.concat(c.items):o.push(c);}if(i.includes("null")&&o.push({type:"null"}),s=B({items:o,mutateSchemaOneItem:true,schema:s}),i.includes("object")){let p=Qt({context:e,schema:{...t,type:"object"},state:r});p.properties&&(s={items:[s,p],logicalOperator:"and"});}return s},Gf=({context:e,schema:t,state:r})=>{let s=ft({schema:t}),o={};if(o.$ref=decodeURI(t.$ref),!r.circularReferenceTracker.has(t.$ref)){let a=e.resolveRef(t.$ref);Y({context:e,schema:a,state:{...r,$ref:t.$ref,isProperty:false}});}let i=[];return i.push(o),t.type&&typeof t.type!="string"&&t.type.includes("null")&&i.push({type:"null"}),s=B({items:i,mutateSchemaOneItem:true,schema:s}),s},Qt=({context:e,irSchema:t,schema:r,state:s})=>{switch(t||(t=ft({schema:r}),vn({irSchema:t,schema:r})),r.type){case "array":return Bf({context:e,irSchema:t,schema:r,state:s});case "boolean":return _f({irSchema:t});case "integer":case "number":return zf({irSchema:t,schema:r});case "null":return Kf({irSchema:t});case "object":return Wf({context:e,irSchema:t,schema:r,state:s});case "string":return Hf({irSchema:t});default:return Oa({irSchema:t,schema:r})}},Jf=({context:e,irSchema:t,schema:r,state:s})=>{t||(t=ft({schema:r}));let o={};vn({irSchema:o,schema:r}),r.type.includes("null")&&o.default===null&&delete o.default;let i=[];for(let a of r.type)if(a==="null")i.push({type:"null"});else {let p=Qt({context:e,irSchema:{...o},schema:{...r,type:a},state:s});i.push(p);}return t=B({items:i,schema:t}),t},Yf=({context:e,schema:t,state:r})=>{let s=ft({schema:t});vn({irSchema:s,schema:t});let o=Ze({schema:t});return o.length===1?Qt({context:e,irSchema:s,schema:{...t,type:o[0]},state:r}):Jf({context:e,irSchema:s,schema:{...t,type:o},state:r})},Oa=({irSchema:e,schema:t})=>(e||(e=ft({schema:t})),e.type="unknown",vn({irSchema:e,schema:t}),e),Y=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),t.$ref?Gf({context:e,schema:t,state:r}):t.enum?Zf({context:e,schema:t,state:r}):t.allOf?Qf({context:e,schema:t,state:r}):t.anyOf?Uf({context:e,schema:t,state:r}):t.oneOf?Xf({context:e,schema:t,state:r}):t.type||t.properties?Yf({context:e,schema:t,state:r}):Oa({schema:t})),Sa=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[V(e)]=Y({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var Ta=e=>e.includes("boolean")||e.includes("integer")||e.includes("number")||e.includes("string"),Ut=({context:e,name:t,schema:r})=>{if(Se(e.config.parser.pagination).test(t))return  true;if(r.$ref){let o=e.resolveRef(r.$ref);if("content"in o||"in"in o){let i;if("in"in o&&(i=o.schema),!i){let a=mt({content:o.content}),p=a.find(c=>c.type==="json")||a[0];p?.schema&&(i=p.schema);}return i?Ut({context:e,name:t,schema:i}):false}return Ut({context:e,name:t,schema:o})}for(let o in r.properties)if(Se(e.config.parser.pagination).test(o)){let a=r.properties[o];if(typeof a!="boolean"){let p=Ze({schema:a});if(!p.length){let m=(a.anyOf??a.oneOf??[]).filter(f=>f.type!=="null");if(m.length===1){let f=Ze({schema:m[0]});if(Ta(f))return o}}if(Ta(p))return o}}for(let o of r.allOf??[]){let i=Ut({context:e,name:t,schema:o});if(i)return i}return  false};var el=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},tl=({context:e,method:t,operation:r,path:s,state:o})=>{let i={id:_t({context:e,id:r.operationId,method:t,path:s,state:o}),method:t,path:s};return r.operationId&&(i.operationId=r.operationId),el({irOperation:i,operation:r}),i},rl=({context:e,method:t,operation:r,path:s,securitySchemesMap:o,state:i})=>{let a=tl({context:e,method:t,operation:r,path:s,state:i});if(r.parameters&&(a.parameters=r.parameters),r.requestBody){let p="$ref"in r.requestBody?e.resolveRef(r.requestBody.$ref):r.requestBody,c=mt({content:p.content}),m=c.find(f=>f.type==="json")||c[0];if(m){let f=Ut({context:e,name:"",schema:{description:p.description,...m.schema}});a.body={mediaType:m.mediaType,schema:Y({context:e,schema:{description:p.description,..."$ref"in r.requestBody?r.requestBody:m.schema},state:void 0})},f&&(a.body.pagination=f),p.required&&(a.body.required=p.required),m.type&&(a.body.type=m.type);}}for(let p in r.responses){a.responses||(a.responses={});let c=r.responses[p],m="$ref"in c?e.resolveRef(c.$ref):c,f=mt({content:m.content}),l=f.find(d=>d.type==="json")||f[0];l?a.responses[p]={mediaType:l.mediaType,schema:Y({context:e,schema:{description:m.description,...ba({content:l})},state:void 0})}:a.responses[p]={schema:{description:m.description,type:p==="204"?"void":"unknown"}};}if(r.security){let p=new Map;for(let c of r.security)for(let m in c){let f=o.get(m);f&&p.set(m,f);}p.size&&(a.security=Array.from(p.values()));}return a},Ra=({context:e,method:t,operation:r,path:s,securitySchemesMap:o,state:i})=>(r.servers&&(e.ir.servers=[...e.ir.servers??[],...r.servers]),{parsed:rl({context:e,method:t,operation:r,path:s,securitySchemesMap:o,state:i})}),lt=({context:e,method:t,path:r,...s})=>{e.ir.paths||(e.ir.paths={}),e.ir.paths[r]||(e.ir.paths[r]={});let{parsed:o}=Ra({context:e,method:t,path:r,...s});e.ir.paths[r][t]=o;},dt=({context:e,key:t,method:r,...s})=>{e.ir.webhooks||(e.ir.webhooks={}),e.ir.webhooks[t]||(e.ir.webhooks[t]={});let{parsed:o}=Ra({context:e,method:r,path:t,...s});e.ir.webhooks[t][r]=o;};var nl=e=>{switch(e){case "query":return  false;default:return}},sl=e=>{switch(e){case "deepObject":case "form":return  true;default:return  false}},ol=e=>{switch(e){case "header":case "path":return "simple";case "cookie":case "query":return "form"}},U=({context:e,parameters:t})=>{if(!t||!Object.keys(t).length)return;let r={};for(let s of t){let o="$ref"in s?e.dereference(s):s;r[o.in]||(r[o.in]={}),r[o.in][o.name.toLocaleLowerCase()]=Ia({context:e,parameter:o});}return r},Ia=({context:e,parameter:t})=>{let r=t.schema;if(!r){let m=mt({content:t.content}),f=m.find(l=>l.type==="json")||m[0];f&&(r=f.schema);}let s={deprecated:t.deprecated,description:t.description,...r},o=Ut({context:e,name:t.name,schema:s}),i=t.style||ol(t.in),a=t.explode!==void 0?t.explode:sl(i),c={allowReserved:t.allowReserved!==void 0?t.allowReserved:nl(t.in),explode:a,location:t.in,name:t.name,schema:Y({context:e,schema:s,state:void 0}),style:i};return t.deprecated&&(c.deprecated=t.deprecated),t.description&&(c.description=t.description),o&&(c.pagination=o),t.required&&(c.required=t.required),c},Pa=({$ref:e,context:t,parameter:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.parameters||(t.ir.components.parameters={}),t.ir.components.parameters[V(e)]=Ia({context:t,parameter:r});};var il=({context:e,requestBody:t})=>{let r=mt({content:t.content}),s=r.find(p=>p.type==="json")||r[0],o=s?s.schema:void 0,i={description:t.description,...o},a={schema:Y({context:e,schema:i,state:void 0})};return t.description&&(a.description=t.description),t.required&&(a.required=t.required),a},Aa=({$ref:e,context:t,requestBody:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.requestBodies||(t.ir.components.requestBodies={}),t.ir.components.requestBodies[V(e)]=il({context:t,requestBody:r});};var Ea=({context:e})=>{if(e.spec.servers){e.ir.servers=e.spec.servers;return}if(typeof e.config.input.path=="string"){let t=Qe(e.config.input.path);e.ir.servers=[{url:`${t.protocol?`${t.protocol}://`:""}${t.host}${t.port?`:${t.port}`:""}`}];}e.ir.servers||(e.ir.servers=[{url:"/"}]);};var Na=(e,t)=>{let r=t.timeEvent("validate"),s=[],o=new Map;if(e.paths)for(let i of Object.entries(e.paths)){let a=i[0],p=i[1];for(let c of oe){let m=p[c];if(!m)continue;let f=$({method:c,path:a});m.operationId&&(o.has(m.operationId)?s.push({code:"duplicate_key",context:{key:"operationId",value:m.operationId},message:"Duplicate `operationId` found. Each `operationId` must be unique.",path:["paths",a,c,"operationId"],severity:"error"}):o.set(m.operationId,f));}}if(e.servers){(typeof e.servers!="object"||!Array.isArray(e.servers))&&s.push({code:"invalid_type",message:"`servers` must be an array.",path:[],severity:"error"});for(let i=0;i<e.servers.length;i++){let a=e.servers[i];!a||typeof a!="object"?s.push({code:"invalid_type",context:{actual:typeof a,expected:"object"},message:"Each entry in `servers` must be an object.",path:["servers",i],severity:"error"}):a.url||s.push({code:"missing_required_field",context:{field:"url"},message:"Missing required field `url` in server object.",path:["servers",i],severity:"error"});}}return r.timeEnd(),{issues:s,valid:!s.some(i=>i.severity==="error")}};var ja=({context:e,securitySchemesMap:t})=>{let r={ids:new Map};for(let s in e.spec.webhooks){let o=e.spec.webhooks[s],i="$ref"in o?{...e.resolveRef(o.$ref),...o}:o,a={context:e,key:s,operation:{description:i.description,parameters:U({context:e,parameters:i.parameters}),security:e.spec.security,servers:i.servers,summary:i.summary},securitySchemesMap:t,state:r};i.delete&&dt({...a,method:"delete",operation:{...a.operation,...i.delete,parameters:j({source:U({context:e,parameters:i.delete.parameters}),target:a.operation.parameters})}}),i.get&&dt({...a,method:"get",operation:{...a.operation,...i.get,parameters:j({source:U({context:e,parameters:i.get.parameters}),target:a.operation.parameters})}}),i.head&&dt({...a,method:"head",operation:{...a.operation,...i.head,parameters:j({source:U({context:e,parameters:i.head.parameters}),target:a.operation.parameters})}}),i.options&&dt({...a,method:"options",operation:{...a.operation,...i.options,parameters:j({source:U({context:e,parameters:i.options.parameters}),target:a.operation.parameters})}}),i.patch&&dt({...a,method:"patch",operation:{...a.operation,...i.patch,parameters:j({source:U({context:e,parameters:i.patch.parameters}),target:a.operation.parameters})}}),i.post&&dt({...a,method:"post",operation:{...a.operation,...i.post,parameters:j({source:U({context:e,parameters:i.post.parameters}),target:a.operation.parameters})}}),i.put&&dt({...a,method:"put",operation:{...a.operation,...i.put,parameters:j({source:U({context:e,parameters:i.put.parameters}),target:a.operation.parameters})}}),i.trace&&dt({...a,method:"trace",operation:{...a.operation,...i.trace,parameters:j({source:U({context:e,parameters:i.trace.parameters}),target:a.operation.parameters})}});}};var no=e=>{if(e.config.parser.validate_EXPERIMENTAL){let o=Na(e.spec,e.logger);hr({context:e,result:o});}if(dr(e.config.parser.filters)){let o=lr(e.config.parser.filters,e.spec,e.logger),{graph:i}=Pt(e.spec,e.logger),{resourceMetadata:a}=yr(i,e.logger),p=ur({filters:o,logger:e.logger,resourceMetadata:a});xa({...p,logger:e.logger,preserveOrder:o.preserveOrder,spec:e.spec});}gr({context:e});let r={ids:new Map},s=new Map;if(e.spec.components){for(let o in e.spec.components.securitySchemes){let i=e.spec.components.securitySchemes[o],a="$ref"in i?e.resolveRef(i.$ref):i;s.set(o,a);}for(let o in e.spec.components.parameters){let i=`#/components/parameters/${o}`,a=e.spec.components.parameters[o],p="$ref"in a?e.resolveRef(a.$ref):a;Pa({$ref:i,context:e,parameter:p});}for(let o in e.spec.components.requestBodies){let i=`#/components/requestBodies/${o}`,a=e.spec.components.requestBodies[o],p="$ref"in a?e.resolveRef(a.$ref):a;Aa({$ref:i,context:e,requestBody:p});}for(let o in e.spec.components.schemas){let i=`#/components/schemas/${o}`,a=e.spec.components.schemas[o];Sa({$ref:i,context:e,schema:a});}}Ea({context:e});for(let o in e.spec.paths){let i=e.spec.paths[o],a=i.$ref?{...e.resolveRef(i.$ref),...i}:i,p={context:e,operation:{description:a.description,parameters:U({context:e,parameters:a.parameters}),security:e.spec.security,servers:a.servers,summary:a.summary},path:o,securitySchemesMap:s,state:r};a.delete&&lt({...p,method:"delete",operation:{...p.operation,...a.delete,parameters:j({source:U({context:e,parameters:a.delete.parameters}),target:p.operation.parameters})}}),a.get&&lt({...p,method:"get",operation:{...p.operation,...a.get,parameters:j({source:U({context:e,parameters:a.get.parameters}),target:p.operation.parameters})}}),a.head&&lt({...p,method:"head",operation:{...p.operation,...a.head,parameters:j({source:U({context:e,parameters:a.head.parameters}),target:p.operation.parameters})}}),a.options&&lt({...p,method:"options",operation:{...p.operation,...a.options,parameters:j({source:U({context:e,parameters:a.options.parameters}),target:p.operation.parameters})}}),a.patch&&lt({...p,method:"patch",operation:{...p.operation,...a.patch,parameters:j({source:U({context:e,parameters:a.patch.parameters}),target:p.operation.parameters})}}),a.post&&lt({...p,method:"post",operation:{...p.operation,...a.post,parameters:j({source:U({context:e,parameters:a.post.parameters}),target:p.operation.parameters})}}),a.put&&lt({...p,method:"put",operation:{...p.operation,...a.put,parameters:j({source:U({context:e,parameters:a.put.parameters}),target:p.operation.parameters})}}),a.trace&&lt({...p,method:"trace",operation:{...p.operation,...a.trace,parameters:j({source:U({context:e,parameters:a.trace.parameters}),target:p.operation.parameters})}});}ja({context:e,securitySchemesMap:s});};var wn="#/components/schemas/";var Or=({config:e,name:t})=>{let r=e.plugins["@hey-api/sdk"];if(r?.config.classNameBuilder){let s="";return typeof r.config.classNameBuilder=="function"?s=r.config.classNameBuilder(t):s=r.config.classNameBuilder.replace("{{name}}",t),s}return t},ka=e=>A().plugins["@hey-api/typescript"]?.config.style==="PascalCase"?E({case:"PascalCase",value:e}):e,Ca=e=>{let t=ka(e);return Bt(t).replace(Re,"_$1")};function jt(e,t,r){return r.indexOf(e)===t}function $a(e,t){let r=e.toLocaleLowerCase(),s=t.toLocaleLowerCase();return r.localeCompare(s,"en")}var Kr=(e,t)=>$a(e.name,t.name);function Fa(e){return e.sort(Kr)}var cl=(e,t)=>{if(t)return t;if(typeof e=="number")return `'_${e}'`;let r="";return typeof e=="string"&&(r=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_").replace(/^([^$_\p{ID_Start}])/u,"_$1").replace(/(\p{Lowercase})(\p{Uppercase}+)/gu,"$1_$2")),r=r.trim(),r||(r="empty_string"),r.toUpperCase()},Ma=e=>e.map(t=>qn(t.value,true)).filter(jt).join(" | "),qn=(e,t=false)=>typeof e=="string"?e.includes("'")&&t?`"${e}"`:`'${e}'`:e,so=e=>{let t=cl(e.value,e.customName),r=qn(e.value);return {key:t,value:r}};var oo=e=>{let t=Ca(e);return {$ref:wn+e,name:t}};var zr=e=>e.format==="date"||e.format==="date-time",io=e=>{let t=A();return e.base==="binary"?n.typeUnionNode({types:["Blob","File"]}):t.plugins["@hey-api/transformers"]?.config.dates&&zr(e)?n.typeNode("Date"):n.typeNode(e.base)},ml=e=>{let t=e.base==="null"?false:e.isNullable,r=io(e);if(e.export==="reference"&&e.$refs.length===1&&e.$refs[0].startsWith(wn)){let o=oo(e.base);r=n.typeNode(o.name);}return n.typeUnionNode({isNullable:t,types:[r]})},fl=e=>{if(e.link){if(Array.isArray(e.link)){let t=e.link.map(s=>je(s));return n.typeTupleNode({isNullable:e.isNullable,types:t})}if(e.export==="array"&&e.maxItems&&e.minItems&&e.maxItems===e.minItems&&e.maxItems<=100){let t=Array(e.maxItems).fill(je(e.link));return n.typeTupleNode({isNullable:e.isNullable,types:t})}return n.typeArrayNode([je(e.link)],e.isNullable)}return n.typeArrayNode([io(e)],e.isNullable)},ll=e=>{let t=e.enum.map(r=>qn(r.value));return n.typeUnionNode({isNullable:e.isNullable,types:t})},dl=e=>{let t=e.link&&!Array.isArray(e.link)?je(e.link):io(e);return n.typeRecordNode(["string"],[t],e.isNullable,true)},La=({model:e,style:t})=>{let r=e.properties.map(o=>n.nodeToString({node:je(o),unescape:true})).filter(jt),s=t==="union"?n.typeUnionNode({isNullable:e.isNullable&&!e.properties.find(o=>o.isNullable),types:r}):n.typeIntersectionNode({isNullable:e.isNullable,types:r});return e.meta?s:n.typeParenthesizedNode({type:s})},ul=e=>{if(!e.properties.length)return n.typeNode("unknown");let t=A(),r=re(t),s=e.properties.map(o=>{let i=o.isRequired?"":"?",a=je(o),p=r?/^\dXX$/.test(o.name)?ot(o.name):o.name:ot(vr(Va(o.name)));return o.name==="[key: string]"&&(p=o.name,i&&(i="",a=n.typeUnionNode({types:[a,"undefined"]}))),{comment:[o.description&&K(o.description),o.deprecated&&"@deprecated"],isReadOnly:o.isReadOnly,isRequired:i==="",name:p,type:a}});return n.typeInterfaceNode({isNullable:e.isNullable,properties:s,useLegacyResolution:true})},je=e=>{switch(e.export){case "all-of":return La({model:e,style:"intersection"});case "any-of":case "one-of":return La({model:e,style:"union"});case "array":return fl(e);case "dictionary":return dl(e);case "enum":return ll(e);case "interface":return ul(e);case "const":case "generic":case "reference":default:return ml(e)}},ke=({client:e,count:t=1,create:r=false,meta:s,nameTransformer:o})=>{let i={created:false,name:""},a=s.name;o&&(a=o(a)),t>1&&(a=`${a}${t}`);let p=e.types[a];return p?p.$ref===s.$ref?i={created:false,name:a}:i=ke({client:e,count:t+1,create:r,meta:s,nameTransformer:o}):r&&(e.types[a]=s,i={created:true,name:a}),i},Da=({client:e,name:t})=>{let r={deleted:false,name:""};return e.types[t]&&(delete e.types[t],r={deleted:true,name:t}),r},Va=e=>{let t=A();return re(t)?E({case:"camelCase",value:Qs(e)}).replace(Re,"_$1"):e};var Ge=e=>e.some(r=>r.isRequired);var wl=({config:e,dependencies:t,logger:r,spec:s})=>{let o=new An({config:e,dependencies:t,logger:r,spec:s});if("swagger"in o.spec)return to(o),o;switch(o.spec.openapi){case "3.0.0":case "3.0.1":case "3.0.2":case "3.0.3":case "3.0.4":return ro(o),o;case "3.1.0":case "3.1.1":return no(o),o;}throw new Error("Unsupported OpenAPI specification")};var T="types";var _a=({dataExpression:e,schema:t})=>{if(t.type!=="integer"||t.format!=="int64")return;let r=e!==void 0?n.callExpression({functionName:"BigInt",parameters:[n.callExpression({functionName:n.propertyAccessExpression({expression:e,name:"toString"})})]}):void 0;if(r){if(typeof e=="string")return [r];if(e)return [n.assignment({left:e,right:r})]}},Ka=({dataExpression:e,schema:t})=>{if(t.type!=="string"||!(t.format==="date"||t.format==="date-time"))return;let r=n.identifier({text:"Date"});if(typeof e=="string")return [n.newExpression({argumentsArray:[n.identifier({text:e})],expression:r})];if(e)return [n.assignment({left:e,right:n.newExpression({argumentsArray:[e],expression:r})})]};var $n=({id:e,type:t})=>{let r="";switch(t){case "data":r="DataResponseTransformer";break;case "error":r="ErrorResponseTransformer";break;case "response":r="ResponseTransformer";break}return `#/ir/${E({case:"camelCase",value:e})}${r}`},ql=({$ref:e,type:t})=>{let r="";switch(t){case "response":r="SchemaResponseTransformer";break}let s=e.split("/");return `${s.slice(0,s.length-1).join("/")}/${E({case:"camelCase",value:s[s.length-1]})}${r}`},za=({$ref:e})=>ql({$ref:e,type:"response"}),Qr="transformers",Fn="data",Wr=e=>e.map(t=>O__default.default.isStatement(t)?t:n.expressionToStatement({expression:t})),Ha=({node:e})=>e.kind===O__default.default.SyntaxKind.ReturnStatement,Qa=({plugin:e,schema:t})=>{let r=n.identifier({text:Fn}),s=Hr({dataExpression:r,plugin:e,schema:t});return s.length&&!Ha({node:s[s.length-1]})&&s.push(n.returnStatement({expression:r})),s},Ua=({$ref:e,file:t,namespace:r})=>{let{name:s,ref:o}=_s(e),i=t.identifiers[s.toLocaleLowerCase()]?.[r]?.[o];if(!i)throw new Error(`Identifier for $ref ${e} in namespace ${r} not found`);return i.name=false,{created:false,name:i.name}},Hr=({dataExpression:e,plugin:t,schema:r})=>{let s=t.context.file({id:Qr});if(r.$ref){let o=s.identifier({$ref:za({$ref:r.$ref}),create:true,namespace:"value"});if(o.created&&o.name){let i=t.context.resolveIrRef(r.$ref),a=Qa({plugin:t,schema:i});if(a.length){let p=n.constVariable({expression:n.arrowFunction({async:false,multiLine:true,parameters:[{name:Fn,type:n.keywordTypeNode({keyword:"any"})}],statements:Wr(a)}),name:o.name});s.add(p);}else o=Ua({$ref:za({$ref:r.$ref}),file:s,namespace:"value"});}if(o.name){let i=n.callExpression({functionName:o.name,parameters:[e]});if(e)return typeof e=="string"&&e==="item"?[n.returnStatement({expression:i})]:[typeof e=="string"?i:n.assignment({left:e,right:i})]}return []}if(r.type==="array"){if(!e||typeof e=="string")return [];let o=r.items?Hr({dataExpression:"item",plugin:t,schema:r.items?.[0]?r.items[0]:{...r,type:void 0}}):[];if(!o.length)return [];let i=Wr(o);return i.some(p=>Ha({node:p}))||i.push(n.returnStatement({expression:n.identifier({text:"item"})})),[n.assignment({left:e,right:n.callExpression({functionName:n.propertyAccessExpression({expression:e,name:"map"}),parameters:[n.arrowFunction({multiLine:true,parameters:[{name:"item",type:"any"}],statements:i})]})})]}if(r.type==="object"){let o=[],i=r.required??[];for(let a in r.properties){let p=r.properties[a],c=n.propertyAccessExpression({expression:e||Fn,name:a}),m=Hr({dataExpression:c,plugin:t,schema:p});if(!m.length)continue;let f=!p.items?.find(d=>d.type==="null");i.includes(a)&&f?o=o.concat(m):o.push(n.ifStatement({expression:c,thenStatement:n.block({statements:Wr(m)})}));}return o}if(r.items){if(r.items.length===1)return Hr({dataExpression:"item",plugin:t,schema:r.items[0]});let o=[];if(r.logicalOperator==="and"||r.items.length===2&&r.items.find(i=>i.type==="null"||i.type==="void")){for(let i of r.items){let a=Hr({dataExpression:e||"item",plugin:t,schema:i});if(a.length)if(e)o=o.concat(a);else {let p=n.identifier({text:"item"});o.push(n.ifStatement({expression:p,thenStatement:n.block({statements:Wr(a)})}),n.returnStatement({expression:p}));}}return o}r.type!=="enum"&&((r.items??[]).every(i=>["boolean","integer","null","number","string"].includes(i.type))||console.warn(`\u2757\uFE0F Transformers warning: schema ${JSON.stringify(r)} is too complex and won't be currently processed. This will likely produce an incomplete transformer which is not what you want. Please open an issue if you'd like this improved https://github.com/hey-api/openapi-ts/issues`));}for(let o of t.config.transformers??[]){let i=o({config:t.config,dataExpression:e,file:s,schema:r});if(i)return i}return []},Za=({plugin:e})=>{let t=e.createFile({id:Qr,path:e.output});e.config.dates&&(e.config.transformers=[...e.config.transformers??[],Ka]),e.config.bigInt&&(e.config.transformers=[...e.config.transformers??[],_a]),e.forEach("operation",({operation:r})=>{let{response:s}=Ke(r);if(!s)return;if(s.items&&s.items.length>1){e.context.config.logs.level==="debug"&&console.warn(`\u2757\uFE0F Transformers warning: route ${$(r)} has ${s.items.length} non-void success responses. This is currently not handled and we will not generate a response transformer. Please open an issue if you'd like this feature https://github.com/hey-api/openapi-ts/issues`);return}let o=e.getPlugin("@hey-api/typescript"),a=e.context.file({id:T}).getName(o.api.getId({operation:r,type:"response"}));if(!a)return;let p=t.identifier({$ref:$n({id:r.id,type:"response"}),create:true,namespace:"value"});if(!p.name)return;let c=Qa({plugin:e,schema:s});if(c.length){t.import({asType:true,module:t.relativePathToFile({context:e.context,id:T}),name:a});let m=n.constVariable({exportConst:true,expression:n.arrowFunction({async:true,multiLine:true,parameters:[{name:Fn,type:n.keywordTypeNode({keyword:"any"})}],returnType:n.typeReferenceNode({typeArguments:[n.typeReferenceNode({typeName:a})],typeName:"Promise"}),statements:Wr(c)}),name:p.name});t.add(m);}else p=Ua({$ref:$n({id:r.id,type:"response"}),file:t,namespace:"value"});});};var $l=({securitySchemeObject:e})=>{if(e.type==="openIdConnect")return {scheme:"bearer",type:"http"};if(e.type==="oauth2")return e.flows.password||e.flows.authorizationCode||e.flows.clientCredentials||e.flows.implicit?{scheme:"bearer",type:"http"}:void 0;if(e.type==="apiKey")return e.in==="header"?{name:e.name,type:"apiKey"}:e.in==="query"||e.in=="cookie"?{in:e.in,name:e.name,type:"apiKey"}:void 0;if(e.type==="http"){let t=e.scheme.toLowerCase();return t==="bearer"||t==="basic"?{scheme:t,type:"http"}:void 0}},Xa=({operation:e,plugin:t})=>{if(!e.security||!t.config.auth)return [];let r=[];for(let s of e.security){let o=$l({securitySchemeObject:s});o?r.push(o):console.warn(`\u2757\uFE0F SDK warning: unsupported security scheme. Please open an issue if you'd like it added https://github.com/hey-api/openapi-ts/issues
${JSON.stringify(s,null,2)}`);}return r};var Ga=({operation:e,plugin:t})=>{if(!t.config.validator.request)return;let r=t.getPlugin(t.config.validator.request);if(!(!r||!r.api.createRequestValidator))return r.api.createRequestValidator({file:t.context.file({id:"sdk"}),operation:e,plugin:r})},Ja=({operation:e,plugin:t})=>{if(!t.config.validator.response)return;let r=t.getPlugin(t.config.validator.response);if(!(!r||!r.api.createResponseValidator))return r.api.createResponseValidator({file:t.context.file({id:"sdk"}),operation:e,plugin:r})};var Ya=({context:e,value:t})=>{let r=E({case:"PascalCase",value:Rt(t)});return Or({config:e.config,name:r})},Fl=({operation:e,plugin:t})=>t.config.methodNameBuilder?t.config.methodNameBuilder(e):!t.config.asClass&&e.id.match(Re)?`${e.id}_`:e.id,qe=({context:e,operation:t,plugin:r})=>{let s=new Map,o,i,a=[];if(r.config.classStructure==="auto"&&t.operationId&&(a=t.operationId.split(/[./]/).filter(Boolean),a.length>1)){let c=a.pop();i=E({case:"camelCase",value:Rt(c)}),o=a.pop();}let p=r.config.instance?[r.config.instance]:t.tags??["default"];for(let c of p){let m=Ya({context:e,value:o||c}),f=[c];o&&(a.includes(c)||c===o?f=[...a,o]:f=[c,...a,o]),s.set(c,{className:m,methodName:i||Fl({operation:t,plugin:r}),path:f.map(l=>Ya({context:e,value:l}))});}return s},Ur=({file:e,operation:t,plugin:r,throwOnError:s})=>{let i=k(r.context.config).name==="@hey-api/client-nuxt",a=r.getPlugin("@hey-api/typescript"),p=r.context.file({id:T}),c=e.import({asType:true,module:e.relativePathToFile({context:r.context,id:T}),name:p.getName(a.api.getId({operation:t,type:"data"}))}),m=M.Options.name;if(i){let f=e.import({asType:true,module:e.relativePathToFile({context:r.context,id:T}),name:p.getName(a.api.getId({operation:t,type:i?"response":"responses"}))});return `${m}<${ar}, ${c.name||"unknown"}, ${f.name||"unknown"}, ${Be}>`}return s?`${m}<${c.name||"unknown"}, ${s}>`:c.name?`${m}<${c.name}>`:m},co=({file:e,isRequiredOptions:t,operation:r,plugin:s})=>{let o={argNames:[],fields:[],parameters:[]},i=s.getPlugin("@hey-api/typescript"),a={usedTypeIDs:new Set},c=k(s.context.config).name==="@hey-api/client-nuxt";if(s.config.params_EXPERIMENTAL==="experiment"){let m=s.context.file({id:T});if(r.parameters?.path)for(let f in r.parameters.path){let l=r.parameters.path[f],d=Ae(l.name);o.argNames.push(d),o.fields.push({in:"path",key:d}),o.parameters.push({isRequired:l.required,name:d,type:i.api.schemaToType({onRef:y=>{e.import({asType:true,module:e.relativePathToFile({context:s.context,id:T}),name:m.getName(y)});},plugin:i,schema:l.schema,state:a})});}if(r.parameters?.query)for(let f in r.parameters.query){let l=r.parameters.query[f],d=Ae(l.name);o.argNames.push(d),o.fields.push({in:"path",key:d}),o.parameters.push({isRequired:l.required,name:d,type:i.api.schemaToType({onRef:y=>{e.import({asType:true,module:e.relativePathToFile({context:s.context,id:T}),name:m.getName(y)});},plugin:i,schema:l.schema,state:a})});}if(r.body){let f="body";o.argNames.push(f),o.fields.push({in:"body"}),o.parameters.push({isRequired:r.body.required,name:f,type:i.api.schemaToType({onRef:l=>{e.import({asType:true,module:e.relativePathToFile({context:s.context,id:T}),name:m.getName(l)});},plugin:i,schema:r.body.schema,state:a})});}}return o.parameters.push({isRequired:t,name:"options",type:Ur({file:e,operation:r,plugin:s,throwOnError:c?void 0:"ThrowOnError"})}),o},Ml=e=>{if(!e)return;let t=e.split(";")[0]?.trim();if(t){if(t.startsWith("application/json")||t.endsWith("+json"))return "json";if(["application/","audio/","image/","video/"].some(r=>t.startsWith(r)))return "blob";if(t.startsWith("text/"))return "text"}},mo=({isRequiredOptions:e,opParameters:t,operation:r,plugin:s})=>{let o=s.context.file({id:"sdk"}),i=o.nameWithoutExtension(),a=k(s.context.config),p=a.name==="@hey-api/client-nuxt",c=s.getPlugin("@hey-api/typescript"),m=s.context.file({id:T}),f=o.import({asType:true,module:o.relativePathToFile({context:s.context,id:T}),name:m.getName(c.api.getId({operation:r,type:p?"response":"responses"}))}),l=o.import({asType:true,module:o.relativePathToFile({context:s.context,id:T}),name:m.getName(c.api.getId({operation:r,type:p?"error":"errors"}))}),d=[];if(r.body)switch(r.body.type){case "form-data":{let H=o.import({module:J({config:s.context.config,sourceOutput:i}),name:"formDataBodySerializer"});d.push({spread:H.name});break}case "json":break;case "text":case "octet-stream":d.push({key:"bodySerializer",value:null});break;case "url-search-params":{let H=o.import({module:J({config:s.context.config,sourceOutput:i}),name:"urlSearchParamsBodySerializer"});d.push({spread:H.name});break}}for(let H in r.parameters?.query){let xe=r.parameters.query[H];if((xe.schema.type==="array"||xe.schema.type==="tuple")&&(xe.style!=="form"||!xe.explode)){d.push({key:"querySerializer",value:[{key:"array",value:[{key:"explode",value:false},{key:"style",value:"form"}]}]});break}}let y=Ga({operation:r,plugin:s});if(y&&d.push({key:"requestValidator",value:y}),s.config.transformer==="@hey-api/transformers"){let H=s.context.file({id:Qr}).identifier({$ref:$n({id:r.id,type:"response"}),namespace:"value"});H.name&&(o.import({module:o.relativePathToFile({context:s.context,id:Qr}),name:H.name}),d.push({key:"responseTransformer",value:H.name}));}let g=false,h;for(let H in r.responses){let xe=r.responses[H];!h&&a.name==="@hey-api/client-axios"&&Ws({statusCode:H})==="2XX"&&(h=Ml(xe.mediaType),h&&d.push({key:"responseType",value:h})),xe.mediaType==="text/event-stream"&&(g=true);}let b=Ja({operation:r,plugin:s});b&&d.push({key:"responseValidator",value:b}),s.config.responseStyle==="data"&&d.push({key:"responseStyle",value:s.config.responseStyle});let S=Xa({context:s.context,operation:r,plugin:s});S.length&&d.push({key:"security",value:n.arrayLiteralExpression({elements:S})}),d.push({key:"url",value:r.path}),d.push({spread:"options"});let C=[],F=t.argNames.length;if(F){let H=[],xe=[];for(let bt of t.argNames)H.push(n.identifier({text:bt}));for(let bt of t.fields){let an=[];"in"in bt&&(an.push({key:"in",value:bt.in}),bt.key&&an.push({key:"key",value:bt.key}),bt.map&&an.push({key:"map",value:bt.map})),xe.push(n.objectExpression({obj:an}));}let Gt=o.import({module:J({config:s.context.config,sourceOutput:i}),name:"buildClientParams"});C.push(n.constVariable({expression:n.callExpression({functionName:Gt.name,parameters:[n.arrayLiteralExpression({elements:H}),n.arrayLiteralExpression({elements:xe})]}),name:"params"})),d.push({spread:"params"});}if(r.body){let H=r.parameters?.header?.["content-type"];if(!!!H?.required){let Gt=[{key:H?.name??"Content-Type",value:r.body.type==="form-data"?null:r.body.mediaType},{spread:n.propertyAccessExpression({expression:n.identifier({text:"options"}),isOptional:!e,name:"headers"})}];F&&Gt.push({spread:n.propertyAccessExpression({expression:n.identifier({text:"params"}),name:"headers"})}),d.push({key:"headers",value:Gt});}}let v=f.name||"unknown",L=l.name||"unknown",Z=s.config.client?o.import({alias:"_heyApiClient",module:o.relativePathToFile({context:s.context,id:le}),name:"client"}):void 0,D=n.propertyAccessExpression({expression:n.identifier({text:"options"}),isOptional:!e,name:"client"}),X;s.config.instance?X=n.binaryExpression({left:D,operator:"??",right:n.propertyAccessExpression({expression:n.this(),name:"_client"})}):Z?.name?X=n.binaryExpression({left:D,operator:"??",right:n.identifier({text:Z.name})}):X=D;let he=[];p?he.push(ar,`${v} | ${Be}`,L,Be):he.push(v,L,"ThrowOnError"),s.config.responseStyle==="data"&&he.push(n.stringLiteral({text:s.config.responseStyle}));let wt=g?n.propertyAccessExpression({expression:X,name:n.identifier({text:"sse"})}):X;return wt=n.propertyAccessExpression({expression:wt,name:n.identifier({text:r.method})}),C.push(n.returnFunctionCall({args:[n.objectExpression({identifiers:["responseTransformer"],obj:d})],name:wt,types:he})),C};var W=({operation:e})=>{let t=[];return e.summary&&t.push(K(e.summary)),e.description&&t.push(K(e.description)),e.deprecated&&t.push("@deprecated"),t.length?t:void 0},ee=({context:e,operation:t})=>{let s=k(e.config).name==="@hey-api/client-nuxt",o=e.config.plugins["@hey-api/sdk"];return o&&!o.config.client&&!o.config.instance||s||fr(t)},Sr=({operation:e})=>{for(let t in e.responses)if(e.responses[t].mediaType==="text/event-stream")return  true;return  false};var Zr="/http/requests",fo="/http/resources";var Ll=({file:e,plugin:t})=>{let r=new Map,s=new Set,o=t.getPlugin("@hey-api/sdk");t.forEach("operation",({operation:a})=>{let p=ee({context:t.context,operation:a}),c=qe({context:t.context,operation:a,plugin:o});for(let m of c.values())m.path.forEach((f,l)=>{r.has(f)||r.set(f,{className:f,classes:new Set,methods:new Set,nodes:[],root:!l});let d=m.path[l-1];if(d&&d!==f){let S=r.get(d);S.classes.add(f),r.set(d,S);}if(!(m.path.length===l+1))return;let g=r.get(f),h=t.config.httpRequests.methodNameBuilder(a);if(g.methods.has(h))return;let b=Vl({file:e,isRequiredOptions:p,methodName:h,operation:a,plugin:t});g.nodes.length?g.nodes.push(n.identifier({text:`
`}),b):g.nodes.push(b),g.methods.add(h),r.set(f,g);});});let i=a=>{if(s.has(a.className))return;if(a.classes.size)for(let c of a.classes){let m=r.get(c);i(m),a.nodes.push(n.propertyDeclaration({initializer:n.newExpression({argumentsArray:[],expression:n.identifier({text:P({config:{case:"preserve",name:t.config.httpRequests.classNameBuilder},name:m.className})})}),name:E({case:"camelCase",value:m.className})}));}let p=n.classDeclaration({decorator:a.root?{args:[{providedIn:"root"}],name:"Injectable"}:void 0,exportClass:a.root,name:P({config:{case:"preserve",name:t.config.httpRequests.classNameBuilder},name:a.className}),nodes:a.nodes});e.add(p),s.add(a.className);};for(let a of r.values())i(a);},Dl=({file:e,plugin:t})=>{t.forEach("operation",({operation:r})=>{let s=ee({context:t.context,operation:r}),o=t.config.httpRequests.methodNameBuilder(r),i=Bl({file:e,functionName:o,isRequiredOptions:s,operation:r,plugin:t});e.add(i);});},ep=({file:e,operation:t,plugin:r})=>{let s=e.import({alias:"_heyApiClient",module:e.relativePathToFile({context:r.context,id:le}),name:"client"}),o=n.propertyAccessExpression({expression:n.identifier({text:"options"}),isOptional:true,name:"client"});return n.callExpression({functionName:n.propertyAccessExpression({expression:n.binaryExpression({left:o,operator:"??",right:n.identifier({text:s.name})}),name:"requestOptions"}),parameters:[n.objectExpression({obj:[{key:"responseStyle",value:n.identifier({text:"'data'"})},{key:"method",value:n.identifier({text:`'${t.method.toUpperCase()}'`})},{key:"url",value:n.identifier({text:`'${t.path}'`})},{spread:"options"}]})]})},Vl=({file:e,isRequiredOptions:t,methodName:r,operation:s,plugin:o})=>{let i=o.getPlugin("@hey-api/typescript"),a=o.context.file({id:T}),p=e.import({asType:true,module:e.relativePathToFile({context:o.context,id:T}),name:a.getName(i.api.getId({operation:s,type:"data"}))});return n.methodDeclaration({accessLevel:"public",comment:W({operation:s}),name:r,parameters:[{isRequired:t,name:"options",type:`Options<${p.name||"unknown"}, ThrowOnError>`}],returnType:"HttpRequest<unknown>",statements:[n.returnStatement({expression:ep({file:e,operation:s,plugin:o})})],types:[{default:false,extends:"boolean",name:"ThrowOnError"}]})},Bl=({file:e,functionName:t,isRequiredOptions:r,operation:s,plugin:o})=>{let i=o.getPlugin("@hey-api/typescript"),a=o.context.file({id:T}),p=e.import({asType:true,module:e.relativePathToFile({context:o.context,id:T}),name:a.getName(i.api.getId({operation:s,type:"data"}))});return n.constVariable({comment:W({operation:s}),exportConst:true,expression:n.arrowFunction({parameters:[{isRequired:r,name:"options",type:`Options<${p.name||"unknown"}, ThrowOnError>`}],returnType:"HttpRequest<unknown>",statements:[n.returnStatement({expression:ep({file:e,operation:s,plugin:o})})],types:[{default:false,extends:"boolean",name:"ThrowOnError"}]}),name:t})},tp=({plugin:e})=>{let t=e.createFile({id:`${e.name}${Zr}`,path:`${e.output}${Zr}`});e.config.httpRequests.asClass&&t.import({module:"@angular/core",name:"Injectable"}),t.import({module:"@angular/common/http",name:"HttpRequest"}),t.import({module:t.relativePathToFile({context:e.context,id:"sdk"}),name:"Options"}),e.config.httpRequests.asClass?Ll({file:t,plugin:e}):Dl({file:t,plugin:e});};var rp=(e,t)=>O__default.default.factory.createVariableStatement(void 0,O__default.default.factory.createVariableDeclarationList([O__default.default.factory.createVariableDeclaration(e,void 0,void 0,t)],O__default.default.NodeFlags.Const)),_l=({file:e,plugin:t})=>{let r=new Map,s=new Set,o=t.getPlugin("@hey-api/sdk");t.forEach("operation",({operation:a})=>{let p=ee({context:t.context,operation:a}),c=qe({context:t.context,operation:a,plugin:o});for(let m of c.values())m.path.forEach((f,l)=>{r.has(f)||r.set(f,{className:f,classes:new Set,methods:new Set,nodes:[],root:!l});let d=m.path[l-1];if(d&&d!==f){let S=r.get(d);S.classes.add(f),r.set(d,S);}if(!(m.path.length===l+1))return;let g=r.get(f),h=t.config.httpResources.methodNameBuilder(a);if(g.methods.has(h))return;let b=zl({file:e,isRequiredOptions:p,methodName:h,operation:a,plugin:t});g.nodes.length?g.nodes.push(n.identifier({text:`
`}),b):g.nodes.push(b),g.methods.add(h),r.set(f,g);});});let i=a=>{if(s.has(a.className))return;if(a.classes.size)for(let c of a.classes){let m=r.get(c);i(m),a.nodes.push(n.propertyDeclaration({initializer:n.newExpression({argumentsArray:[],expression:n.identifier({text:P({config:{case:"preserve",name:t.config.httpResources.classNameBuilder},name:m.className})})}),name:E({case:"camelCase",value:m.className})}));}let p=n.classDeclaration({decorator:a.root?{args:[{providedIn:"root"}],name:"Injectable"}:void 0,exportClass:a.root,name:P({config:{case:"preserve",name:t.config.httpResources.classNameBuilder},name:a.className}),nodes:a.nodes});e.add(p),s.add(a.className);};for(let a of r.values())i(a);},Kl=({file:e,plugin:t})=>{t.forEach("operation",({operation:r})=>{let s=ee({context:t.context,operation:r}),o=Wl({file:e,functionName:t.config.httpResources.methodNameBuilder(r),isRequiredOptions:s,operation:r,plugin:t});e.add(o);});},np=({file:e,operation:t,plugin:r,responseTypeName:s})=>{let o=r.getPlugin("@hey-api/sdk");if(r.config.httpRequests.asClass){let a=qe({context:r.context,operation:t,plugin:o}),p=Array.from(a.values())[0];if(p){let c=p.path[0],m=P({config:{case:"preserve",name:r.config.httpRequests.classNameBuilder},name:c}),f=n.callExpression({functionName:"inject",parameters:[n.identifier({text:m})]});for(let d=1;d<p.path.length;d++){let y=p.path[d];y&&(f=n.propertyAccessExpression({expression:f,name:E({case:"camelCase",value:y})}));}let l=r.config.httpRequests.methodNameBuilder(t);return f=n.propertyAccessExpression({expression:f,name:l}),n.callExpression({functionName:"httpResource",parameters:[n.arrowFunction({parameters:[],statements:[rp("opts",n.conditionalExpression({condition:n.identifier({text:"options"}),whenFalse:n.identifier({text:"undefined"}),whenTrue:n.callExpression({functionName:"options",parameters:[]})})),n.returnStatement({expression:n.conditionalExpression({condition:n.identifier({text:"opts"}),whenFalse:n.identifier({text:"undefined"}),whenTrue:n.callExpression({functionName:f,parameters:[n.identifier({text:"opts"})]})})})]})],types:[n.typeNode(s)]})}}else {let a=r.config.httpRequests.methodNameBuilder(t),p=e.import({module:e.relativePathToFile({context:r.context,id:`${r.name}${Zr}`}),name:a});return n.callExpression({functionName:"httpResource",parameters:[n.arrowFunction({parameters:[],statements:[rp("opts",n.conditionalExpression({condition:n.identifier({text:"options"}),whenFalse:n.identifier({text:"undefined"}),whenTrue:n.callExpression({functionName:"options",parameters:[]})})),n.returnStatement({expression:n.conditionalExpression({condition:n.identifier({text:"opts"}),whenFalse:n.identifier({text:"undefined"}),whenTrue:n.callExpression({functionName:p.name,parameters:[n.identifier({text:"opts"})]})})})]})],types:[n.typeNode(s)]})}return n.callExpression({functionName:"httpResource",parameters:[n.arrowFunction({parameters:[],statements:[n.returnStatement({expression:n.identifier({text:"undefined"})})]})],types:[n.typeNode(s)]})},zl=({file:e,isRequiredOptions:t,methodName:r,operation:s,plugin:o})=>{let i=o.getPlugin("@hey-api/typescript"),a=o.context.file({id:T}),p=e.import({asType:true,module:e.relativePathToFile({context:o.context,id:T}),name:a.getName(i.api.getId({operation:s,type:"data"}))}),c=e.import({asType:true,module:e.relativePathToFile({context:o.context,id:T}),name:a.getName(i.api.getId({operation:s,type:"response"}))});return n.methodDeclaration({accessLevel:"public",comment:W({operation:s}),name:r,parameters:[{isRequired:t,name:"options",type:`() => Options<${p.name||"unknown"}, ThrowOnError> | undefined`}],returnType:void 0,statements:[n.returnStatement({expression:np({file:e,operation:s,plugin:o,responseTypeName:c.name||"unknown"})})],types:[{default:false,extends:"boolean",name:"ThrowOnError"}]})},Wl=({file:e,functionName:t,isRequiredOptions:r,operation:s,plugin:o})=>{let i=o.getPlugin("@hey-api/typescript"),a=o.context.file({id:T}),p=e.import({asType:true,module:e.relativePathToFile({context:o.context,id:T}),name:a.getName(i.api.getId({operation:s,type:"data"}))}),c=e.import({asType:true,module:e.relativePathToFile({context:o.context,id:T}),name:a.getName(i.api.getId({operation:s,type:"response"}))});return n.constVariable({comment:W({operation:s}),exportConst:true,expression:n.arrowFunction({parameters:[{isRequired:r,name:"options",type:`() => Options<${p.name||"unknown"}, ThrowOnError> | undefined`}],statements:[n.returnStatement({expression:np({file:e,operation:s,plugin:o,responseTypeName:c.name||"unknown"})})],types:[{default:false,extends:"boolean",name:"ThrowOnError"}]}),name:t})},sp=({plugin:e})=>{let t=e.createFile({id:`${e.name}${fo}`,path:`${e.output}${fo}`});e.config.httpResources.asClass&&t.import({module:"@angular/core",name:"Injectable"}),e.config.httpRequests.asClass&&t.import({module:"@angular/core",name:"inject"}),t.import({module:"@angular/common/http",name:"httpResource"}),t.import({module:t.relativePathToFile({context:e.context,id:"sdk"}),name:"Options"}),e.config.httpResources.asClass?_l({file:t,plugin:e}):Kl({file:t,plugin:e});};var op=({plugin:e})=>{e.config.httpRequests.enabled&&tp({plugin:e}),e.config.httpResources.enabled&&sp({plugin:e});};var Ln={config:{exportFromIndex:false},dependencies:["@hey-api/client-angular","@hey-api/sdk"],handler:op,name:"@angular/common",output:"@angular/common",resolveConfig:(e,t)=>{if(e.config.httpRequests=t.valueToObject({defaultValue:{asClass:false,classNameBuilder:"{{name}}Requests",enabled:true},mappers:{boolean:r=>({enabled:r})},value:e.config.httpRequests}),!e.config.httpRequests.methodNameBuilder){let{asClass:r}=e.config.httpRequests;e.config.httpRequests.methodNameBuilder=s=>r?String(s.id):`${String(s.id)}Request`;}if(e.config.httpResources=t.valueToObject({defaultValue:{asClass:false,classNameBuilder:"{{name}}Resources",enabled:true},mappers:{boolean:r=>({enabled:r})},value:e.config.httpResources}),!e.config.httpResources.methodNameBuilder){let{asClass:r}=e.config.httpResources;e.config.httpResources.methodNameBuilder=s=>r?String(s.id):`${String(s.id)}Resource`;}}};var Je={baseUrl:true,bundle:true,exportFromIndex:false},Ye={dependencies:["@hey-api/typescript"],output:"client",tags:["client"]};var Ql=({plugin:e})=>{let{baseUrl:t}=e.config;if(t===false)return;if(typeof t=="string")return t;let{servers:r}=e.context.ir;if(r)return r[typeof t=="number"?t:0]?.url},ip=({plugin:e})=>{let t=e.context.file({id:le}),r=J({config:e.context.config,sourceOutput:t.nameWithoutExtension()}),s=t.import({module:r,name:"createClient"}),o=t.import({module:r,name:"createConfig"}),i=e.getPlugin("@hey-api/typescript"),a=e.context.file({id:T}),p=t.import({asType:true,module:t.relativePathToFile({context:e.context,id:T}),name:a.getName(i.api.getId({type:"ClientOptions"}))}),c=e.config.runtimeConfigPath?t.import({module:t.relativePathToFile({context:e.context,id:e.config.runtimeConfigPath}),name:"createClientConfig"}):void 0,m=[],f=Ql({plugin:e});if(f){let y=Qe(f);if(y.protocol&&y.host&&!f.includes("{"))m.push({key:de(e.context.config),value:f});else if(f!=="/"&&f.startsWith("/")){let g=f.endsWith("/")?f.slice(0,-1):f;m.push({key:de(e.context.config),value:g});}}"throwOnError"in e.config&&e.config.throwOnError&&m.push({key:"throwOnError",value:true});let l=[n.callExpression({functionName:o.name,parameters:m.length?[n.objectExpression({obj:m})]:void 0,types:p.name?[n.typeReferenceNode({typeName:p.name})]:void 0})],d=n.constVariable({exportConst:true,expression:n.callExpression({functionName:s.name,parameters:c?[n.callExpression({functionName:c.name,parameters:l})]:l}),name:"client"});t.add(d);};var ap=({plugin:e})=>{let t=e.context.file({id:le}),r=J({config:e.context.config,sourceOutput:t.nameWithoutExtension()}),s=e.getPlugin("@hey-api/typescript"),o=e.context.file({id:T}),i=t.import({asType:true,module:t.relativePathToFile({context:e.context,id:T}),name:o.getName(s.api.getId({type:"ClientOptions"}))}),a=t.import({asType:true,module:r,name:"Config"}),p=t.import({alias:"DefaultClientOptions",asType:true,module:r,name:"ClientOptions"}),c=n.typeReferenceNode({typeName:p.name}),m=n.typeReferenceNode({typeName:"T"}),f=n.typeAliasDeclaration({comment:["The `createClientConfig()` function will be called on client initialization","and the returned object will become the client's initial configuration.","","You may want to initialize your client this way instead of calling","`setConfig()`. This is useful for example if you're using Next.js","to ensure your client always has the correct values."],exportType:true,name:"CreateClientConfig",type:n.functionTypeNode({parameters:[n.parameterDeclaration({name:"override",required:false,type:n.typeReferenceNode({typeArguments:[n.typeIntersectionNode({types:[c,m]})],typeName:a.name})})],returnType:n.typeReferenceNode({typeArguments:[n.typeIntersectionNode({types:[n.typeReferenceNode({typeArguments:[c],typeName:"Required"}),m]})],typeName:a.name})}),typeParameters:[{default:i.name?n.typeReferenceNode({typeName:i.name}):void 0,extends:c,name:"T"}]});t.add(f);};var et=({plugin:e})=>{e.createFile({id:le,path:e.output}),ap({plugin:e}),ip({plugin:e});};var Dn={...Ye,config:{...Je,throwOnError:false},handler:et,name:"@hey-api/client-angular"};var Vn={...Ye,config:{...Je,throwOnError:false},handler:et,name:"@hey-api/client-axios"};var Bn={...Ye,config:{...Je,throwOnError:false},handler:et,name:"@hey-api/client-fetch"};var _n={...Ye,config:{...Je,throwOnError:false},handler:et,name:"@hey-api/client-next"};var Kn={...Ye,config:Je,handler:et,name:"@hey-api/client-nuxt"};var zn={config:{},handler:()=>{},name:"legacy/angular",output:"client",tags:["client"]};var Wn={config:{},handler:()=>{},name:"legacy/axios",output:"client",tags:["client"]};var Hn={config:{},handler:()=>{},name:"legacy/fetch",output:"client",tags:["client"]};var Qn={config:{},handler:()=>{},name:"legacy/node",output:"client",tags:["client"]};var Un={config:{},handler:()=>{},name:"legacy/xhr",output:"client",tags:["client"]};var Zn="schemas",lo=({plugin:e,schema:t})=>{e.config.type==="form"&&(t.description&&delete t.description,t["x-enum-descriptions"]&&delete t["x-enum-descriptions"],t["x-enum-varnames"]&&delete t["x-enum-varnames"],t["x-enumNames"]&&delete t["x-enumNames"],t.title&&delete t.title);},Tr=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(o=>Tr({context:e,plugin:t,schema:o}));let s=structuredClone(r);if(s.$ref)return s.$ref=decodeURI(s.$ref),s;if(lo({plugin:t,schema:s}),s.additionalProperties&&typeof s.additionalProperties!="boolean"&&(s.additionalProperties=Tr({context:e,plugin:t,schema:s.additionalProperties})),s.allOf&&(s.allOf=s.allOf.map(o=>Tr({context:e,plugin:t,schema:o}))),s.items&&(s.items=Tr({context:e,plugin:t,schema:s.items})),s.properties)for(let o in s.properties){let i=s.properties[o];typeof i!="boolean"&&(s.properties[o]=Tr({context:e,plugin:t,schema:i}));}return s},Ct=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(o=>Ct({context:e,plugin:t,schema:o}));let s=structuredClone(r);if("$ref"in s)return s.$ref=decodeURI(s.$ref),s;if(lo({plugin:t,schema:s}),s.additionalProperties&&typeof s.additionalProperties!="boolean"&&(s.additionalProperties=Ct({context:e,plugin:t,schema:s.additionalProperties})),s.allOf&&(s.allOf=s.allOf.map(o=>Ct({context:e,plugin:t,schema:o}))),s.anyOf&&(s.anyOf=s.anyOf.map(o=>Ct({context:e,plugin:t,schema:o}))),s.items&&(s.items=Ct({context:e,plugin:t,schema:s.items})),s.oneOf&&(s.oneOf=s.oneOf.map(o=>Ct({context:e,plugin:t,schema:o}))),s.properties)for(let o in s.properties){let i=s.properties[o];typeof i!="boolean"&&(s.properties[o]=Ct({context:e,plugin:t,schema:i}));}return s},ut=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(o=>ut({context:e,plugin:t,schema:o}));let s=structuredClone(r);if(lo({plugin:t,schema:s}),s.$ref&&(s.$ref=decodeURI(s.$ref)),s.additionalProperties&&typeof s.additionalProperties!="boolean"&&(s.additionalProperties=ut({context:e,plugin:t,schema:s.additionalProperties})),s.allOf&&(s.allOf=s.allOf.map(o=>ut({context:e,plugin:t,schema:o}))),s.anyOf&&(s.anyOf=s.anyOf.map(o=>ut({context:e,plugin:t,schema:o}))),s.items&&(s.items=ut({context:e,plugin:t,schema:s.items})),s.oneOf&&(s.oneOf=s.oneOf.map(o=>ut({context:e,plugin:t,schema:o}))),s.prefixItems&&(s.prefixItems=s.prefixItems.map(o=>ut({context:e,plugin:t,schema:o}))),s.properties)for(let o in s.properties){let i=s.properties[o];typeof i!="boolean"&&(s.properties[o]=ut({context:e,plugin:t,schema:i}));}return s},uo=({name:e,plugin:t,schema:r})=>{let s="";return t.config.nameBuilder&&(typeof t.config.nameBuilder=="function"?s=t.config.nameBuilder(e,r):s=t.config.nameBuilder.replace("{{name}}",e)),s||(s=`${e}Schema`),Ae(s)},sd=({context:e,plugin:t})=>{if(e.spec.definitions)for(let r in e.spec.definitions){let s=e.spec.definitions[r],o=Tr({context:e,plugin:t,schema:s}),i=n.constVariable({assertion:"const",exportConst:true,expression:n.objectExpression({obj:o}),name:uo({name:r,plugin:t,schema:s})});e.file({id:Zn}).add(i);}},od=({context:e,plugin:t})=>{if(e.spec.components)for(let r in e.spec.components.schemas){let s=e.spec.components.schemas[r],o=Ct({context:e,plugin:t,schema:s}),i=n.constVariable({assertion:"const",exportConst:true,expression:n.objectExpression({obj:o}),name:uo({name:r,plugin:t,schema:s})});e.file({id:Zn}).add(i);}},id=({context:e,plugin:t})=>{if(e.spec.components)for(let r in e.spec.components.schemas){let s=e.spec.components.schemas[r],o=ut({context:e,plugin:t,schema:s}),i=n.constVariable({assertion:"const",exportConst:true,expression:n.objectExpression({obj:o}),name:uo({name:r,plugin:t,schema:s})});e.file({id:Zn}).add(i);}},pp=({plugin:e})=>{if(e.createFile({id:Zn,path:e.output}),"swagger"in e.context.spec){sd({context:e.context,plugin:e});return}switch(e.context.spec.openapi){case "3.0.0":case "3.0.1":case "3.0.2":case "3.0.3":case "3.0.4":od({context:e.context,plugin:e});break;case "3.1.0":case "3.1.1":id({context:e.context,plugin:e});break;default:throw new Error("Unsupported OpenAPI specification")}};var yo=(e,t)=>{let r=A();if(Array.isArray(e))return e.map(o=>yo(o));if(typeof e!="object"||e===null)return e;let s={...e};return Object.entries(s).forEach(([o,i])=>{if(r.plugins["@hey-api/schemas"]?.config.type==="form"&&["description","x-enum-descriptions","x-enum-varnames","x-enumNames","title"].includes(o)&&t!=="properties"){delete s[o];return}o==="$ref"&&typeof i=="string"&&(s[o]=decodeURIComponent(i)),i&&typeof i=="object"&&(s[o]=yo(i,o));}),s},ad=(e,t)=>{let r=A(),s=Bt(e),o=r.plugins["@hey-api/schemas"];return o?.config.nameBuilder?typeof o.config.nameBuilder=="function"?o.config.nameBuilder(s,t):o.config.nameBuilder.replace("{{name}}",s):`${s}Schema`},cp=({files:e,openApi:t,plugin:r})=>{let s=A();e.schemas=new _e({dir:s.output.path,exportFromIndex:r.config.exportFromIndex,id:"schemas",name:"schemas.ts"});let o=(i,a)=>{let p=yo(a),c=n.objectExpression({obj:p}),m=n.constVariable({assertion:"const",exportConst:true,expression:c,name:ad(i,a)});e.schemas.add(m);};"swagger"in t&&Object.entries(t.definitions??{}).forEach(([i,a])=>{o(i,a);}),"openapi"in t&&Object.entries(t.components?.schemas??{}).forEach(([i,a])=>{o(i,a);});};var Xn={config:{exportFromIndex:false,nameBuilder:e=>`${e}Schema`,type:"json"},handler:pp,handlerLegacy:cp,name:"@hey-api/schemas",output:"schemas"};var Zt=({meta:e,onImport:t,...r})=>{if(!e)return {created:false,name:""};let{created:s,name:o}=ke({meta:e,...r});return o&&t(o),{created:s,name:o}},up=e=>`${e}ModelResponseTransformer`,Xt=e=>`${E({case:"PascalCase",value:e})}Data`,Rr=e=>`${E({case:"PascalCase",value:e})}Error`,go=e=>`${e}Transformer`,tt=e=>`${E({case:"PascalCase",value:e})}Response`,ho=({importedType:e,throwOnError:t})=>{let r=M.OptionsLegacyParser.name;return t?`${r}<${e||"unknown"}, ${t}>`:e?`${r}<${e}>`:r},mp=(e,t)=>{let r=A(),{name:s}=ke({client:e,meta:{$ref:t.name,name:t.name},nameTransformer:Xt}),o=Ge(t.parameters);if(!re(r))return [{isRequired:o,name:"options",type:ho({importedType:s,throwOnError:"ThrowOnError"})}];if(!t.parameters.length)return [];let i=a=>{if(a.default!==void 0)return JSON.stringify(a.default,null,4)};return r.useOptions?[{default:o?void 0:{},name:"data",type:s}]:t.parameters.map(a=>{let p=`${s}['${a.name}']`;return {default:a?.default,isRequired:(!a.isRequired&&!i(a)?"?":"")=="",name:a.name,type:p}})},fp=(e,t)=>{let r=A(),s=n.typeNode("void");if(t.responses.filter(a=>a.responseTypes.includes("success")).length){let{name:a}=ke({client:e,meta:{$ref:t.name,name:t.name},nameTransformer:tt});s=n.typeUnionNode({types:[a]});}return r.useOptions&&r.plugins["@hey-api/sdk"]?.config.response==="response"&&(s=n.typeNode("ApiResult",[s])),k(r).name==="legacy/angular"?s=n.typeNode("Observable",[s]):s=n.typeNode("CancelablePromise",[s]),s},lp=e=>{let t=A();if(!re(t))return [e.deprecated&&"@deprecated",e.summary&&K(e.summary),e.description&&K(e.description)];let r=[];e.parameters.length&&(t.useOptions?r=["@param data The data for the request.",...e.parameters.map(i=>`@param data.${i.name} ${i.description?K(i.description):""}`)]:r=e.parameters.map(i=>`@param ${i.name} ${i.description?K(i.description):""}`));let s=e.responses.filter(i=>i.responseTypes.includes("success"));return [e.deprecated&&"@deprecated",e.summary&&K(e.summary),e.description&&K(e.description),...r,...s.map(i=>`@returns ${i.type} ${i.description?K(i.description):""}`),"@throws ApiError"]},cd=({client:e,onClientImport:t,onImport:r,operation:s})=>{let o=A(),i=tt(s.name),{name:a}=ke({client:e,meta:{$ref:`transformers/${i}`,name:i},nameTransformer:go});if(a&&r(a),!re(o)){let f=[{spread:"options"}],d=s.parameters.filter(y=>y.in==="body"||y.in==="formData").map(y=>y.mediaType||(y.in==="formData"?"multipart/form-data":void 0)).filter(Boolean).filter(jt);return d.length===1&&(d[0]==="multipart/form-data"&&(f=[...f,{spread:"formDataBodySerializer"},{key:"headers",value:[{key:"Content-Type",value:null},{spread:"options?.headers"}]}],t?.("formDataBodySerializer")),d[0]==="application/x-www-form-urlencoded"&&(f=[...f,{spread:"urlSearchParamsBodySerializer"},{key:"headers",value:[{key:"Content-Type",value:d[0]},{spread:"options?.headers"}]}],t?.("urlSearchParamsBodySerializer"))),f=[...f,{key:"url",value:s.path}],a&&(f=[...f,{key:"responseTransformer",value:a}]),n.objectExpression({identifiers:["responseTransformer"],obj:f})}let p=f=>f.reduce((l,d)=>{let y=d.prop,g=o.useOptions?`data.${d.name}`:d.name;return y===g?l[y]=y:ot(y)===y?l[y]=g:l[`'${y}'`]=g,l},{}),c={method:s.method,url:s.path};s.parametersPath.length&&(c.path=p(s.parametersPath)),s.parametersCookie.length&&(c.cookies=p(s.parametersCookie)),s.parametersHeader.length&&(c.headers=p(s.parametersHeader)),s.parametersQuery.length&&(c.query=p(s.parametersQuery)),s.parametersForm.length&&(c.formData=p(s.parametersForm)),s.parametersBody&&(s.parametersBody.in==="formData"&&(o.useOptions?c.formData=`data.${s.parametersBody.name}`:c.formData=s.parametersBody.name),s.parametersBody.in==="body"&&(o.useOptions?c.body=`data.${s.parametersBody.name}`:c.body=s.parametersBody.name)),s.parametersBody?.mediaType&&(c.mediaType=s.parametersBody?.mediaType),s.responseHeader&&(c.responseHeader=s.responseHeader),a&&(c.responseTransformer=a);let m=s.responses.filter(f=>f.responseTypes.includes("error"));if(m.length>0){let f={};m.forEach(l=>{f[l.code]=l.description??"";}),c.errors=f;}return n.objectExpression({identifiers:["body","cookies","formData","headers","path","query","responseTransformer"],obj:c,shorthand:true})},ge=({config:e,handleIllegal:t,id:r,operation:s})=>e.plugins["@hey-api/sdk"]?.config.methodNameBuilder?e.plugins["@hey-api/sdk"].config.methodNameBuilder(s):t&&r.match(Re)?`${r}_`:r,dp=({client:e,onClientImport:t,onImport:r,operation:s})=>{let o=A(),i=cd({client:e,onClientImport:t,onImport:r,operation:s});if(!re(o)){let p=ke({client:e,meta:{$ref:s.name,name:s.name},nameTransformer:Rr}).name,m=s.responses.filter(f=>f.responseTypes.includes("success")).length?ke({client:e,meta:{$ref:s.name,name:s.name},nameTransformer:tt}).name:"void";return [n.returnFunctionCall({args:[i],name:`(options?.client ?? client).${s.method.toLocaleLowerCase()}`,types:p&&m?[m,p,"ThrowOnError"]:p?["unknown",p,"ThrowOnError"]:m?[m,"unknown","ThrowOnError"]:[]})]}return qt(o)?[n.returnFunctionCall({args:[i],name:"this.httpRequest.request"})]:k(o).name==="legacy/angular"?[n.returnFunctionCall({args:["OpenAPI","this.http",i],name:"__request"})]:[n.returnFunctionCall({args:["OpenAPI",i],name:"__request"})]},md=({client:e,onClientImport:t,onImport:r,onNode:s,service:o})=>{let i=A(),a=k(i),p=re(i);for(let d of o.operations)d.parameters.length&&Zt({client:e,meta:{$ref:d.name,name:d.name},nameTransformer:Xt,onImport:r}),p||Zt({client:e,meta:{$ref:d.name,name:d.name},nameTransformer:Rr,onImport:r}),d.responses.filter(g=>g.responseTypes.includes("success")).length&&Zt({client:e,meta:{$ref:d.name,name:d.name},nameTransformer:tt,onImport:r});let c={default:("throwOnError"in a.config?a.config.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"};if(!i.plugins["@hey-api/sdk"]?.config.asClass&&!qt(i)){for(let d of o.operations){let y={parameters:mp(e,d),returnType:p?fp(e,d):void 0,statements:dp({client:e,onClientImport:t,onImport:r,operation:d}),types:p?void 0:[c]},g=a.name==="legacy/angular"?n.anonymousFunction(y):n.arrowFunction(y),h=n.constVariable({comment:lp(d),exportConst:true,expression:g,name:ge({config:i,handleIllegal:true,id:d.name,operation:d})});s(h);}return}let m=o.operations.map(d=>n.methodDeclaration({accessLevel:"public",comment:lp(d),isStatic:qt(i)===void 0&&a.name!=="legacy/angular",name:ge({config:i,id:d.name,operation:d}),parameters:mp(e,d),returnType:p?fp(e,d):void 0,statements:dp({client:e,onClientImport:t,onImport:r,operation:d}),types:p?void 0:[c]}));if(!m.length)return;qt(i)?m=[n.constructorDeclaration({multiLine:false,parameters:[{accessLevel:"public",isReadOnly:true,name:"httpRequest",type:"BaseHttpRequest"}]}),...m]:a.name==="legacy/angular"&&(m=[n.constructorDeclaration({multiLine:false,parameters:[{accessLevel:"public",isReadOnly:true,name:"http",type:"HttpClient"}]}),...m]);let f=[];m.forEach((d,y)=>{y&&f.push(n.identifier({text:`
`})),f.push(d);});let l=n.classDeclaration({decorator:a.name==="legacy/angular"?{args:[{providedIn:"root"}],name:"Injectable"}:void 0,exportClass:true,name:Or({config:i,name:o.name}),nodes:f});s(l);},yp=({client:e,files:t,plugin:r})=>{let s=A(),o=re(s),i="sdk";if(t.sdk=new _e({dir:s.output.path,exportFromIndex:r.config.exportFromIndex,id:"sdk",name:`${i}.ts`}),!o)t.sdk.import({module:J({config:s,sourceOutput:i}),name:"createClient"}),t.sdk.import({module:J({config:s,sourceOutput:i}),name:"createConfig"}),t.sdk.import({...M.OptionsLegacyParser,module:J({config:s,sourceOutput:i})});else if(k(s).name==="legacy/angular"?(t.sdk.import({module:"@angular/core",name:"Injectable"}),qt(s)||t.sdk.import({module:"@angular/common/http",name:"HttpClient"}),t.sdk.import({asType:true,module:"rxjs",name:"Observable"})):t.sdk.import({asType:true,module:"./core/CancelablePromise",name:"CancelablePromise"}),s.plugins["@hey-api/sdk"]?.config.response==="response"&&t.sdk.import({asType:true,module:"./core/ApiResult",name:"ApiResult"}),qt(s)){let p=k(s);t.sdk.import({asType:p.name!=="legacy/angular",module:"./core/BaseHttpRequest",name:"BaseHttpRequest"});}else t.sdk.import({module:"./core/OpenAPI",name:"OpenAPI"}),t.sdk.import({alias:"__request",module:"./core/request",name:"request"});if(!o){let a=k(s),p=n.constVariable({exportConst:true,expression:n.callExpression({functionName:"createClient",parameters:[n.callExpression({functionName:"createConfig",parameters:["throwOnError"in a&&a.throwOnError?n.objectExpression({obj:[{key:"throwOnError",value:true}]}):void 0]})]}),name:"client"});t.sdk.add(p);}for(let a of e.services)md({client:e,onClientImport:p=>{t.sdk.import({module:J({config:s,sourceOutput:i}),name:p});},onImport:p=>{t.sdk.import({asType:!p.endsWith("Transformer"),module:`./${t.types.nameWithoutExtension()}`,name:p});},onNode:p=>{t.sdk.add(p);},service:a});};var gp=({clientOptions:e,plugin:t})=>{let r=t.context.file({id:"sdk"}),o=k(t.context.config).name==="@hey-api/client-nuxt",i=J({config:t.context.config,sourceOutput:r.nameWithoutExtension()}),a=r.import({asType:true,module:i,name:"TDataShape"}),p=r.import({asType:true,module:i,name:"Client"}),c=n.typeAliasDeclaration({exportType:true,name:"Options",type:n.typeIntersectionNode({types:[n.typeReferenceNode({typeArguments:o?[n.typeReferenceNode({typeName:"TComposable"}),n.typeReferenceNode({typeName:"TData"}),n.typeReferenceNode({typeName:Vs}),n.typeReferenceNode({typeName:Be})]:[n.typeReferenceNode({typeName:"TData"}),n.typeReferenceNode({typeName:"ThrowOnError"})],typeName:e.name}),n.typeInterfaceNode({properties:[{comment:["You can provide a client instance returned by `createClient()` instead of","individual options. This might be also useful if you want to implement a","custom client."],isRequired:!t.config.client,name:"client",type:n.typeReferenceNode({typeName:p.name})},{comment:["You can pass arbitrary values through the `meta` object. This can be","used to access values that aren't defined as part of the SDK function."],isRequired:false,name:"meta",type:n.typeReferenceNode({typeArguments:[n.keywordTypeNode({keyword:"string"}),n.keywordTypeNode({keyword:"unknown"})],typeName:"Record"})}],useLegacyResolution:false})]}),typeParameters:o?[n.typeParameterDeclaration({constraint:n.typeReferenceNode({typeName:"Composable"}),name:"TComposable"}),n.typeParameterDeclaration({constraint:n.typeReferenceNode({typeName:a.name}),defaultType:n.typeReferenceNode({typeName:a.name}),name:"TData"}),n.typeParameterDeclaration({defaultType:n.keywordTypeNode({keyword:"unknown"}),name:Vs}),n.typeParameterDeclaration({defaultType:n.keywordTypeNode({keyword:"undefined"}),name:Be})]:[n.typeParameterDeclaration({constraint:n.typeReferenceNode({typeName:a.name}),defaultType:n.typeReferenceNode({typeName:a.name}),name:"TData"}),n.typeParameterDeclaration({constraint:n.keywordTypeNode({keyword:"boolean"}),defaultType:n.keywordTypeNode({keyword:"boolean"}),name:"ThrowOnError"})]});r.add(c);};var ld=({plugin:e})=>{let t=n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:n.this(),name:"_client"}),operator:"=",right:n.propertyAccessExpression({expression:n.identifier({text:"args"}),name:"client"})})});return [n.propertyDeclaration({initializer:e.config.client?n.identifier({text:"_heyApiClient"}):void 0,modifier:"protected",name:"_client",type:O__default.default.factory.createTypeReferenceNode("Client")}),n.identifier({text:`
`}),n.constructorDeclaration({multiLine:true,parameters:[{isRequired:!e.config.client,name:"args",type:n.typeInterfaceNode({properties:[{isRequired:!e.config.client,name:"client",type:"Client"}],useLegacyResolution:false})}],statements:[e.config.client?n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"args"}),isOptional:true,name:"client"}),thenStatement:n.block({statements:[t]})}):t]})]},dd=({plugin:e})=>{let t=k(e.context.config),r=t.name==="@hey-api/client-angular",s=t.name==="@hey-api/client-nuxt",o=e.context.file({id:"sdk"}),i=new Map,a=new Set,p=e.config.instance?ld({plugin:e}):[];e.forEach("operation",({operation:m})=>{let f=ee({context:e.context,operation:m}),l=e.getPlugin("@hey-api/typescript"),d=e.context.file({id:T}),y=o.import({asType:true,module:o.relativePathToFile({context:e.context,id:T}),name:s?d.getName(l.api.getId({operation:m,type:"response"})):void 0}),g=qe({context:e.context,operation:m,plugin:e});for(let h of g.values())h.path.forEach((b,S)=>{i.has(b)||i.set(b,{className:b,classes:new Set,methods:new Set,nodes:[],root:!S});let C=h.path[S-1];if(C&&C!==b){let X=i.get(C);X.classes.add(b),i.set(C,X);}if(!(h.path.length===S+1))return;let v=i.get(b);if(v.methods.has(h.methodName))return;let L=co({file:o,isRequiredOptions:f,operation:m,plugin:e}),Z=mo({isRequiredOptions:f,opParameters:L,operation:m,plugin:e}),D=n.methodDeclaration({accessLevel:"public",comment:W({operation:m}),isStatic:r?false:!e.config.instance,name:h.methodName,parameters:L.parameters,returnType:void 0,statements:Z,types:s?[{extends:n.typeNode("Composable"),name:ar},{default:y.name?n.typeReferenceNode({typeName:y.name}):n.typeNode("undefined"),extends:y.name?n.typeReferenceNode({typeName:y.name}):void 0,name:Be}]:[{default:("throwOnError"in t.config?t.config.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"}]});v.nodes.length?v.nodes.push(n.identifier({text:`
`}),D):v.nodes.push(D),v.methods.add(h.methodName),i.set(b,v);});});let c=m=>{if(a.has(m.className))return;if(m.classes.size)for(let l of m.classes){let d=i.get(l);c(d),m.nodes.push(n.propertyDeclaration({initializer:e.config.instance?n.newExpression({argumentsArray:e.config.instance?[n.objectExpression({multiLine:false,obj:[{key:"client",value:n.propertyAccessExpression({expression:n.this(),name:"_client"})}]})]:[],expression:n.identifier({text:d.className})}):n.identifier({text:d.className}),modifier:e.config.instance?void 0:"static",name:E({case:"camelCase",value:d.className})}));}let f=n.classDeclaration({decorator:m.root&&r?{args:[{providedIn:"root"}],name:"Injectable"}:void 0,exportClass:m.root,extendedClasses:e.config.instance?["_HeyApiClient"]:void 0,name:m.className,nodes:m.nodes});o.add(f),a.add(m.className);};if(p.length){let m=n.classDeclaration({exportClass:false,name:"_HeyApiClient",nodes:p});o.add(m);}for(let m of i.values())c(m);},ud=({plugin:e})=>{let t=k(e.context.config),r=t.name==="@hey-api/client-nuxt",s=e.context.file({id:"sdk"});e.forEach("operation",({operation:o})=>{let i=ee({context:e.context,operation:o}),a=e.getPlugin("@hey-api/typescript"),p=e.context.file({id:T}),c=s.import({asType:true,module:s.relativePathToFile({context:e.context,id:T}),name:r?p.getName(a.api.getId({operation:o,type:"response"})):void 0}),m=co({file:s,isRequiredOptions:i,operation:o,plugin:e}),f=mo({isRequiredOptions:i,opParameters:m,operation:o,plugin:e}),l=n.constVariable({comment:W({operation:o}),exportConst:true,expression:n.arrowFunction({parameters:m.parameters,returnType:void 0,statements:f,types:r?[{extends:n.typeNode("Composable"),name:ar},{default:c.name?n.typeReferenceNode({typeName:c.name}):n.typeNode("undefined"),extends:c.name?n.typeReferenceNode({typeName:c.name}):void 0,name:Be}]:[{default:("throwOnError"in t.config?t.config.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"}]}),name:ge({config:e.context.config,handleIllegal:true,id:o.id,operation:o})});s.add(l);});},hp=({plugin:e})=>{let t=e.createFile({id:"sdk",path:e.output}),r=J({config:e.context.config,sourceOutput:t.nameWithoutExtension()}),s=t.import({...M.Options,alias:"ClientOptions",module:r}),o=k(e.context.config),i=o.name==="@hey-api/client-angular";o.name==="@hey-api/client-nuxt"&&t.import({asType:true,module:r,name:"Composable"}),i&&e.config.asClass&&t.import({module:"@angular/core",name:"Injectable"}),gp({clientOptions:s,plugin:e}),e.config.asClass?dd({plugin:e}):ud({plugin:e});};var Gn={config:{asClass:false,auth:true,classNameBuilder:"{{name}}",classStructure:"auto",client:true,exportFromIndex:true,instance:false,operationId:true,params_EXPERIMENTAL:"default",response:"body",responseStyle:"fields",transformer:false,validator:false},dependencies:["@hey-api/typescript"],handler:hp,handlerLegacy:yp,name:"@hey-api/sdk",output:"sdk",resolveConfig:(e,t)=>{e.config.client?(typeof e.config.client=="boolean"&&(e.config.client=t.pluginByTag("client",{defaultPlugin:"@hey-api/client-fetch"})),e.dependencies.add(e.config.client)):e.config.client=false,e.config.transformer?(typeof e.config.transformer=="boolean"&&(e.config.transformer=t.pluginByTag("transformer")),e.dependencies.add(e.config.transformer)):e.config.transformer=false,typeof e.config.validator!="object"&&(e.config.validator={request:e.config.validator,response:e.config.validator}),e.config.validator.request?(typeof e.config.validator.request=="boolean"&&(e.config.validator.request=t.pluginByTag("validator")),e.dependencies.add(e.config.validator.request)):e.config.validator.request=false,e.config.validator.response?(typeof e.config.validator.response=="boolean"&&(e.config.validator.response=t.pluginByTag("validator")),e.dependencies.add(e.config.validator.response)):e.config.validator.response=false,e.config.instance?(typeof e.config.instance!="string"&&(e.config.instance="Sdk"),e.config.asClass=true):e.config.instance=false,e.config.classNameBuilder==="{{name}}"&&e.config.client==="@hey-api/client-angular"&&(e.config.classNameBuilder="{{name}}Service");}};var gd="$OpenApiTs",ce={$refs:[],base:"",description:null,enum:[],enums:[],export:"interface",imports:[],in:"",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"",properties:[],template:null,type:""},hd=({comments:e,leadingComment:t,meta:r,obj:s,onNode:o,...i})=>{if(!r)return;let{created:a,name:p}=ke({create:true,meta:r,...i});if(a){let m=A().plugins["@hey-api/typescript"],f=n.enumDeclaration({asConst:typeof m?.config.enums=="object"&&m.config.enums.mode==="typescript-const",comments:e,leadingComment:t,name:p,obj:s});o(f);}},yt=({comment:e,meta:t,onCreated:r,onNode:s,type:o,...i})=>{if(!t)return {created:false,name:""};let a=ke({create:true,meta:t,...i}),{created:p,name:c}=a;if(p){let m=n.typeAliasDeclaration({comment:e,exportType:true,name:c,type:o});s(m),r?.(c);}return a},xd=e=>{let t=[];xp(e),e.model.enums.forEach(r=>Od({...e,model:r,onNode:s=>{t.push(s);}})),t.length&&e.onNode(n.namespaceDeclaration({name:e.model.name,statements:t}));},bd=({client:e,model:t,onNode:r})=>{let s=A(),o={},i={};t.enum.forEach(c=>{let{key:m,value:f}=so(c);o[m]=f;let l=c.customDescription||c.description;l&&(i[m]=[K(l)]);});let a=[t.description&&K(t.description),t.deprecated&&"@deprecated"],p=s.plugins["@hey-api/typescript"];if(p?.config&&typeof p.config.enums=="object"&&p.config.enums.enabled&&(p.config.enums.mode==="typescript"||p.config.enums.mode==="typescript-const")){hd({asConst:p.config.enums.mode==="typescript-const",client:e,comments:i,leadingComment:a,meta:t.meta,obj:o,onNode:r});return}yt({client:e,comment:a,meta:t.meta,onCreated:c=>{let m=s.plugins["@hey-api/typescript"];if(m?.config&&typeof m.config.enums=="object"&&m.config.enums.enabled&&m.config.enums.mode==="javascript"){let f=n.objectExpression({multiLine:true,obj:Object.entries(o).map(([d,y])=>({comments:i[d],key:d,value:y})),unescape:true}),l=n.constVariable({assertion:"const",comment:a,exportConst:true,expression:f,name:c});r(l);}},onNode:r,type:Ma(t.enum)});},Od=({model:e,onNode:t})=>{let r={},s={};e.enum.forEach(a=>{let{key:p,value:c}=so(a);r[p]=c;let m=a.customDescription||a.description;m&&(s[p]=[K(m)]);});let i=A().plugins["@hey-api/typescript"];t(n.enumDeclaration({asConst:typeof i?.config.enums=="object"&&i.config.enums.mode==="typescript-const",comments:s,leadingComment:[e.description&&K(e.description),e.deprecated&&"@deprecated"],name:e.meta?.name||e.name,obj:r}));},xp=({client:e,model:t,onNode:r})=>{yt({client:e,comment:[t.description&&K(t.description),t.deprecated&&"@deprecated"],meta:t.meta,onNode:r,type:je(t)});},Sd=e=>{switch(e.model.export){case "all-of":case "any-of":case "one-of":case "interface":return xd(e);case "enum":return bd(e);default:return xp(e)}},Td=({client:e,onNode:t})=>{let r={},s=A();if(!s.plugins["@hey-api/sdk"]&&!s.plugins["@hey-api/typescript"]?.config.tree)return;let o=re(s);for(let a of e.services)for(let p of a.operations){if(!p.parameters.length&&!p.responses.length)continue;r[p.path]||(r[p.path]={});let c=r[p.path];c[p.method]||(c[p.method]={});let m=c[p.method];if(m.$ref=p.name,p.responses.length>0){if(m.res||(m.res={}),Array.isArray(m.res))continue;p.responses.forEach(l=>{m.res[l.code]=l;});}if(p.parameters.length>0){let l={mediaType:null,...ce,in:"body",name:"body",prop:"body"},d=p.parameters.filter(S=>S.in==="body");d.length||(d=p.parameters.filter(S=>S.in==="formData")),d.length===1?l={...ce,...d[0],in:"body",isRequired:d[0].isRequired,name:"body",prop:"body"}:d.length>1&&(l={...ce,in:"body",isRequired:d.some(S=>S.isRequired),mediaType:"multipart/form-data",name:"body",prop:"body",properties:d});let y={...ce,in:"header",isRequired:Ge(p.parameters.filter(S=>S.in==="header")),mediaType:null,name:o?"header":"headers",prop:o?"header":"headers",properties:p.parameters.filter(S=>S.in==="header").sort(Kr)},g={...ce,in:"path",isRequired:Ge(p.parameters.filter(S=>S.in==="path")),mediaType:null,name:"path",prop:"path",properties:p.parameters.filter(S=>S.in==="path").sort(Kr)},h={...ce,in:"query",isRequired:Ge(p.parameters.filter(S=>S.in==="query")),mediaType:null,name:"query",prop:"query",properties:p.parameters.filter(S=>S.in==="query").sort(Kr)},b=o?Fa([...p.parameters]):[l,y,g,h].filter(S=>S.properties.length||S.$refs.length||S.mediaType);m.req=b,yt({client:e,meta:{$ref:p.name,name:p.name},nameTransformer:Xt,onNode:t,type:je({...ce,properties:b})});}let f=p.responses.filter(l=>l.responseTypes.includes("success"));if(f.length>0){yt({client:e,meta:{$ref:p.name,name:p.name},nameTransformer:tt,onNode:t,type:je({...ce,export:"any-of",properties:f})});let l=p.responses.filter(d=>d.responseTypes.includes("error"));o||yt({client:e,meta:{$ref:p.name,name:p.name},nameTransformer:Rr,onNode:t,type:je(l.length?{...ce,export:"one-of",properties:l}:{...ce,base:"unknown"})});}}let i=Object.entries(r).map(([a,p])=>{let c=Object.entries(p).map(([f,l])=>{let d=f,y=[];if(l.req){let h=l.$ref,{name:b}=ke({client:e,meta:{$ref:h,name:h},nameTransformer:Xt}),S={...ce,base:b,export:"reference",isRequired:true,name:"req",properties:[],type:b};y=[...y,S];}if(l.res){let h=Object.entries(l.res).map(([S,C])=>({...ce,...C,isRequired:true,name:String(S)})),b={...ce,isRequired:true,name:"res",properties:h};y=[...y,b];}return {...ce,isRequired:true,name:d.toLocaleLowerCase(),properties:y}}).filter(Boolean);return {...ce,isRequired:true,name:`'${a}'`,properties:c}});s.plugins["@hey-api/typescript"]?.config.tree&&yt({client:e,meta:{$ref:"@hey-api/openapi-ts",name:gd},onNode:t,type:je({...ce,properties:i})});},bp=({client:e,files:t,plugin:r})=>{let s=A();t.types=new _e({dir:s.output.path,exportFromIndex:r.config.exportFromIndex,id:"types",name:"types.ts"});let o=i=>{t.types?.add(i);};for(let i of e.models)Sd({client:e,model:i,onNode:o});Td({client:e,onNode:o});};var vt="data",Rd=e=>e.base==="unknown"&&e.export==="generic"&&e.type==="unknown",Op=({client:e,model:t})=>t.$refs.map(s=>{let o=e.models.find(i=>i.meta?.$ref===s);if(!o)throw new Error(`Ref ${s} could not be found. Transformers cannot be generated without having access to all refs.`);return o}),Sp=e=>{let t=e.model.meta.name,{name:r}=yt({...e,meta:{$ref:`transformers/${t}`,name:t},nameTransformer:up,onCreated:o=>{let i=Jn({...e,meta:{$ref:`transformers/${t}`,name:o},path:[vt]});Tp({...e,async:false,name:o,statements:i});},type:`(${vt}: any) => ${t}`});return {created:!!e.client.types[r],name:r}},Id=e=>{let{model:t}=e,r=Op(e);if(r.length===1){let{created:s,name:o}=Sp({...e,model:r[0]});return s?[n.transformArrayMutation({path:e.path,transformerName:o})]:[]}return zr(t)||t.link&&!Array.isArray(t.link)&&t.link.export==="any-of"&&t.link.properties.find(s=>zr(s))?[n.transformArrayMap({path:e.path,transformExpression:n.conditionalExpression({condition:n.identifier({text:"item"}),whenFalse:n.identifier({text:"item"}),whenTrue:n.transformNewDate({parameterName:"item"})})})]:[]},Pd=e=>{let{model:t}=e,r=[...e.path,t.name];return t.type==="string"&&t.export!=="array"&&zr(t)?[n.transformDateMutation({path:r})]:Jn({...e,model:t,path:r})},Jn=e=>{let{model:t}=e;switch(t.export){case "array":return Id(e);case "interface":return t.properties.flatMap(r=>Pd({...e,model:r}));case "reference":{if(t.$refs.length!==1)return [];let r=Op(e),{created:s,name:o}=Sp({...e,model:r[0]});return s?t.in==="response"?[n.expressionToStatement({expression:n.callExpression({functionName:o,parameters:[vt]})})]:n.transformFunctionMutation({path:e.path,transformerName:o}):[]}default:return []}},Tp=({async:e,client:t,name:r,onNode:s,onRemoveNode:o,statements:i})=>{let a={created:false,name:r};if(!i.length)return Da({client:t,name:r}),o?.(),a;let p=n.arrowFunction({async:e,multiLine:true,parameters:[{name:vt}],statements:[...i,n.returnVariable({expression:vt})]}),c=n.constVariable({exportConst:true,expression:p,name:r,typeName:r});return s(c),{created:true,name:r}},Rp=({client:e,files:t})=>{let r=A(),s=i=>{t.types?.add(i);},o=()=>{t.types?.removeNode_LEGACY();};for(let i of e.services)for(let a of i.operations){let p=a.responses.filter(f=>f.responseTypes.includes("success"));if(!p.length)continue;let c=p.filter(f=>!Rd(f));if(!c.length)continue;if(c.length>1){r.logs.level==="debug"&&console.warn(`\u2757\uFE0F Transformers warning: route ${$(a)} has ${c.length} non-void success responses. This is currently not handled and we will not generate a response transformer. Please open an issue if you'd like this feature https://github.com/hey-api/openapi-ts/issues`);continue}let m=tt(a.name);yt({client:e,meta:{$ref:`transformers/${m}`,name:m},nameTransformer:go,onCreated:f=>{let l=p.length>1?p.flatMap(d=>{let y=Jn({client:e,meta:{$ref:`transformers/${m}`,name:m},model:d,onNode:s,onRemoveNode:o,path:[vt]});return y.length?[n.ifStatement({expression:n.safeAccessExpression(["data"]),thenStatement:n.block({statements:y})})]:[]}):Jn({client:e,meta:{$ref:`transformers/${m}`,name:m},model:p[0],onNode:s,onRemoveNode:o,path:[vt]});Tp({async:true,client:e,name:f,onNode:s,onRemoveNode:o,statements:l});},onNode:s,type:`(${vt}: any) => Promise<${m}>`});}};var Yn={config:{bigInt:true,dates:true,exportFromIndex:false},dependencies:["@hey-api/typescript"],handler:Za,handlerLegacy:Rp,name:"@hey-api/transformers",output:"transformers",tags:["transformer"]};var Pp=({context:e,name:t})=>(ne.lastIndex=0,ne.test(t)?t.startsWith("-")?O__default.default.factory.createStringLiteral(t):O__default.default.factory.createNumericLiteral(t):E({case:e.config.output.case,value:t}));var Te=({schema:e})=>{let t=[];return e.title&&t.push(K(e.title)),e.description&&t.push(K(e.description)),e.deprecated&&t.push("@deprecated"),t.length?t:void 0};var es=n.keywordTypeNode({keyword:"string"}),Nd=({server:e})=>{let t=Qe(e.url);return t.protocol&&t.host?n.literalTypeNode({literal:n.stringLiteral({text:e.url})}):n.templateLiteralType({value:[t.protocol||es,"://",t.host||es,t.port?`:${t.port}`:"",t.path||""]})},Ap=({nodeInfo:e,plugin:t,servers:r})=>{let s=t.context.file({id:T}),o=k(t.context.config),i=r.map(c=>Nd({server:c}));r.length?"strictBaseUrl"in o.config&&o.config.strictBaseUrl||i.push(n.typeIntersectionNode({types:[es,O__default.default.factory.createTypeLiteralNode([])]})):i.push(es);let a=n.typeInterfaceNode({properties:[{name:de(t.context.config),type:n.typeUnionNode({types:i})}],useLegacyResolution:false}),p=n.typeAliasDeclaration({exportType:e.exported,name:e.node,type:a});s.add(p);};var xo=({parameters:e})=>{let t={type:"object"};if(e){let r={},s=[];for(let o in e){let i=e[o];r[i.name]=Q({detectFormat:false,schema:i.schema}),i.required&&s.push(i.name);}t.properties=r,s.length&&(t.required=s);}return t},jd=({operation:e,plugin:t,state:r})=>{let s=t.context.file({id:T}),o={type:"object"},i=[];o.properties||(o.properties={}),e.body?(o.properties.body=e.body.schema,e.body.required&&i.push("body")):o.properties.body={type:"never"},e.parameters?.header&&(o.properties.headers=xo({parameters:e.parameters.header}),o.properties.headers.required&&i.push("headers")),e.parameters?.path?(o.properties.path=xo({parameters:e.parameters.path}),o.properties.path.required&&i.push("path")):o.properties.path={type:"never"},e.parameters?.query?(o.properties.query=xo({parameters:e.parameters.query}),o.properties.query.required&&i.push("query")):o.properties.query={type:"never"},o.properties.url={const:e.path,type:"string"},i.push("url"),o.required=i;let a=P({config:t.config.requests,name:e.id}),p=s.updateNode(t.api.getId({operation:e,type:"data"}),{exported:true,name:a}),c=te({onRef:void 0,plugin:t,schema:o,state:r}),m=n.typeAliasDeclaration({exportType:p.exported,name:p.node,type:c});s.add(m);},Ep=({operation:e,plugin:t,state:r})=>{jd({operation:e,plugin:t,state:r});let s=t.context.file({id:T}),{error:o,errors:i,response:a,responses:p}=Ke(e);if(i){let c=P({config:t.config.errors,name:e.id}),m=s.updateNode(t.api.getId({operation:e,type:"errors"}),{exported:true,name:c}),f=te({onRef:void 0,plugin:t,schema:i,state:r}),l=n.typeAliasDeclaration({exportType:m.exported,name:m.node,type:f});if(s.add(l),o){let d=P({config:{case:t.config.errors.case,name:t.config.errors.error},name:e.id}),y=s.updateNode(t.api.getId({operation:e,type:"error"}),{exported:true,name:d}),g=n.indexedAccessTypeNode({indexType:O__default.default.factory.createTypeOperatorNode(O__default.default.SyntaxKind.KeyOfKeyword,m.node),objectType:m.node}),h=n.typeAliasDeclaration({exportType:y.exported,name:y.node,type:g});s.add(h);}}if(p){let c=P({config:t.config.responses,name:e.id}),m=s.updateNode(t.api.getId({operation:e,type:"responses"}),{exported:true,name:c}),f=te({onRef:void 0,plugin:t,schema:p,state:r}),l=n.typeAliasDeclaration({exportType:m.exported,name:m.node,type:f});if(s.add(l),a){let d=P({config:{case:t.config.responses.case,name:t.config.responses.response},name:e.id}),y=s.updateNode(t.api.getId({operation:e,type:"response"}),{exported:true,name:d}),g=n.indexedAccessTypeNode({indexType:O__default.default.factory.createTypeOperatorNode(O__default.default.SyntaxKind.KeyOfKeyword,m.node),objectType:m.node}),h=n.typeAliasDeclaration({exportType:y.exported,name:y.node,type:g});s.add(h);}}};var kd=({operation:e,plugin:t,state:r})=>{let s=t.context.file({id:T}),o={type:"object"},i=[];if(o.properties||(o.properties={}),e.body){let f=P({config:{case:t.config.webhooks.case,name:t.config.webhooks.payload},name:e.id}),l=t.api.getId({operation:e,type:"webhook-payload"}),d=s.updateNode(l,{exported:true,name:f}),y=te({onRef:void 0,plugin:t,schema:e.body.schema,state:r}),g=n.typeAliasDeclaration({comment:Te({schema:e.body.schema}),exportType:d.exported,name:d.node,type:y});s.add(g),o.properties.body={$ref:l},i.push("body");}else o.properties.body={type:"never"};o.properties.key={const:e.path,type:"string"},i.push("key"),o.properties.path={type:"never"},o.properties.query={type:"never"},o.required=i;let a=P({config:t.config.webhooks,name:e.id}),p=s.updateNode(t.api.getId({operation:e,type:"webhook-request"}),{exported:true,name:a}),c=te({onRef:void 0,plugin:t,schema:o,state:r}),m=n.typeAliasDeclaration({exportType:p.exported,name:p.node,type:c});return s.add(m),a},Np=({operation:e,plugin:t,state:r})=>kd({operation:e,plugin:t,state:r});var jp=({nodeInfo:e,plugin:t,webhookNames:r})=>{let s=t.context.file({id:T});if(!r.length)return;let o=n.typeUnionNode({types:r.map(a=>n.typeReferenceNode({typeName:a}))}),i=n.typeAliasDeclaration({exportType:e.exported,name:e.node,type:o});s.add(i);};var Cd=({plugin:e,schema:t})=>{let r=[];return {obj:(t.items??[]).map((o,i)=>{let a=typeof o.const;r.includes(a)||r.push(a);let p;return o.title?p=o.title:a==="number"||a==="string"?p=`${o.const}`:a==="boolean"?p=o.const?"true":"false":o.const===null?p="null":p=`${i}`,p&&(p=E({case:e.config.enums.case,stripLeadingSeparators:false,value:p}),ne.lastIndex=0,ne.test(p)&&e.config.enums.enabled&&(e.config.enums.mode==="typescript"||e.config.enums.mode==="typescript-const")&&(p=`_${p}`)),{comments:Te({schema:o}),key:p,value:o.const}}),typeofItems:r}},vd=({onRef:e,plugin:t,schema:r,state:s})=>{if(!r.items)return n.typeArrayNode(n.keywordTypeNode({keyword:"unknown"}));r=Q({detectFormat:false,schema:r});let o=[];for(let i of r.items){let a=te({onRef:e,plugin:t,schema:i,state:s});o.push(a);}return o.length===1?n.typeArrayNode(o[0]):r.logicalOperator==="and"?n.typeArrayNode(n.typeIntersectionNode({types:o})):n.typeArrayNode(n.typeUnionNode({types:o}))},wd=({schema:e})=>e.const!==void 0?n.literalTypeNode({literal:n.ots.boolean(e.const)}):n.keywordTypeNode({keyword:"boolean"}),qd=({onRef:e,plugin:t,schema:r,state:s})=>te({onRef:e,plugin:t,schema:{...r,type:void 0},state:s}),$d=({plugin:e,schema:t})=>t.const!==void 0?n.literalTypeNode({literal:n.ots.number(t.const)}):t.type==="integer"&&t.format==="int64"&&e.getPlugin("@hey-api/transformers")?.config.bigInt?n.typeReferenceNode({typeName:"bigint"}):n.keywordTypeNode({keyword:"number"}),Fd=({onRef:e,plugin:t,schema:r,state:s})=>{let o,i,a=[],p=[],c=r.required??[],m=false;for(let g in r.properties){let h=r.properties[g],b=te({onRef:e,plugin:t,schema:h,state:s}),S=c.includes(g);a.push({comment:Te({schema:h}),isReadOnly:h.accessScope==="read",isRequired:S,name:Pp({context:t.context,name:g}),type:b}),p.push(h),S||(m=true);}if(r.patternProperties)for(let g in r.patternProperties){let h=r.patternProperties[g];p.unshift(h);}let f=!!r.patternProperties&&Object.keys(r.patternProperties).length>0,l=r.additionalProperties,d=l!==false&&l?l:void 0;if(f||!!d&&(d.type!=="never"||!p.length)){let g=d;g&&g.type!=="never"?p.unshift(g):!f&&!p.length&&g&&g.type==="never"&&(p=[g]),m&&p.push({type:"undefined"}),i={isRequired:!r.propertyNames,name:"key",type:p.length===1?te({onRef:e,plugin:t,schema:p[0],state:s}):te({onRef:e,plugin:t,schema:{items:p,logicalOperator:"or"},state:s})},r.propertyNames?.$ref&&(o=te({onRef:e,plugin:t,schema:{$ref:r.propertyNames.$ref},state:s}));}return n.typeInterfaceNode({indexKey:o,indexProperty:i,properties:a,useLegacyResolution:false})},Md=({plugin:e,schema:t,state:r})=>{if(t.const!==void 0)return n.literalTypeNode({literal:n.stringLiteral({text:t.const})});if(t.format){if(t.format==="binary")return n.typeUnionNode({types:[n.typeReferenceNode({typeName:"Blob"}),n.typeReferenceNode({typeName:"File"})]});if((t.format==="date-time"||t.format==="date")&&e.getPlugin("@hey-api/transformers")?.config.dates)return n.typeReferenceNode({typeName:"Date"});if(t.format==="typeid"&&typeof t.example=="string"){let s=String(t.example).split("_");s.pop();let o=s.join("_");r.usedTypeIDs.add(o);let i=Ae(E({case:e.config.case,value:o+"_id"}));return n.typeReferenceNode({typeName:i})}}return n.keywordTypeNode({keyword:"string"})},Ld=({onRef:e,plugin:t,schema:r,state:s})=>{let o=[];if(r.const&&Array.isArray(r.const))o=r.const.map(i=>n.valueToExpression({value:i})??n.identifier({text:"unknown"}));else if(r.items)for(let i of r.items){let a=te({onRef:e,plugin:t,schema:i,state:s});o.push(a);}return n.typeTupleNode({types:o})},Cp=({onRef:e,plugin:t,schema:r,state:s})=>{let o=t.getPlugin("@hey-api/transformers");if(o?.config.typeTransformers)for(let i of o.config.typeTransformers){let a=t.context.file({id:T}),p=i({file:a,schema:r});if(p)return p}switch(r.type){case "array":return vd({onRef:e,plugin:t,schema:r,state:s});case "boolean":return wd({schema:r});case "enum":return qd({onRef:e,plugin:t,schema:r,state:s});case "integer":case "number":return $d({plugin:t,schema:r});case "never":return n.keywordTypeNode({keyword:"never"});case "null":return n.literalTypeNode({literal:n.null()});case "object":return Fd({onRef:e,plugin:t,schema:r,state:s});case "string":return Md({plugin:t,schema:r,state:s});case "tuple":return Ld({onRef:e,plugin:t,schema:r,state:s});case "undefined":return n.keywordTypeNode({keyword:"undefined"});case "unknown":return n.keywordTypeNode({keyword:"unknown"});case "void":return n.keywordTypeNode({keyword:"void"})}},te=({onRef:e,plugin:t,schema:r,state:s})=>{let o=t.context.file({id:T});if(r.$ref)return e&&e(t.api.getId({type:"ref",value:r.$ref})),o.getNode(t.api.getId({type:"ref",value:r.$ref})).node;if(r.type)return Cp({onRef:e,plugin:t,schema:r,state:s});if(r.items){if(r=Q({detectFormat:false,schema:r}),r.items){let i=[];for(let a of r.items){let p=te({onRef:e,plugin:t,schema:a,state:s});i.push(p);}return r.logicalOperator==="and"?n.typeIntersectionNode({types:i}):n.typeUnionNode({types:i})}return te({onRef:e,plugin:t,schema:r,state:s})}return Cp({onRef:e,plugin:t,schema:{type:"unknown"},state:s})},Dd=({id:e,plugin:t,schema:r,type:s})=>{let o=t.context.file({id:T}),i=o.getNode(t.api.getId({type:"ref",value:e}));if(r.type==="enum"&&t.config.enums.enabled){let p=Cd({plugin:t,schema:r});if(t.config.enums.mode==="javascript"){t.config.enums.constantsIgnoreNull&&p.typeofItems.includes("object")&&(p.obj=p.obj.filter(d=>d.value!==null));let c=n.constVariable({assertion:"const",comment:Te({schema:r}),exportConst:i.exported,expression:n.objectExpression({multiLine:true,obj:p.obj}),name:i.node});o.add(c);let m=n.typeOfExpression({text:i.node.typeName}),f=O__default.default.factory.createTypeOperatorNode(O__default.default.SyntaxKind.KeyOfKeyword,m),l=n.typeAliasDeclaration({comment:Te({schema:r}),exportType:i.exported,name:i.node,type:n.indexedAccessTypeNode({indexType:f,objectType:m})});o.add(l);return}else if((t.config.enums.mode==="typescript"||t.config.enums.mode==="typescript-const")&&!p.typeofItems.some(m=>m!=="number"&&m!=="string")){let m=n.enumDeclaration({asConst:t.config.enums.mode==="typescript-const",leadingComment:Te({schema:r}),name:i.node,obj:p.obj});o.add(m);return}}let a=n.typeAliasDeclaration({comment:Te({schema:r}),exportType:i.exported,name:i.node,type:s});o.add(a);},bo=({id:e,plugin:t,schema:r,state:s})=>{let o=t.context.file({id:T}),i=te({onRef:void 0,plugin:t,schema:r,state:s}),a=P({config:t.config.definitions,name:V(e)});o.updateNode(t.api.getId({type:"ref",value:e}),{exported:true,name:a}),Dd({id:e,plugin:t,schema:r,type:i});},vp=({plugin:e})=>{let t={usedTypeIDs:new Set},r=e.createFile({case:e.config.case,id:T,path:e.output}),s=P({config:{case:e.config.case},name:"ClientOptions"}),o=r.updateNode(e.api.getId({type:"ClientOptions"}),{exported:true,name:s}),i=P({config:{case:e.config.case},name:"Webhooks"}),a=r.updateNode(e.api.getId({type:"Webhooks"}),{exported:true,name:i}),p=[],c=[];if(e.forEach("operation","parameter","requestBody","schema","server","webhook",m=>{if(m.type==="operation")Ep({operation:m.operation,plugin:e,state:t});else if(m.type==="parameter")bo({id:m.$ref,plugin:e,schema:m.parameter.schema,state:t});else if(m.type==="requestBody")bo({id:m.$ref,plugin:e,schema:m.requestBody.schema,state:t});else if(m.type==="schema")bo({id:m.$ref,plugin:e,schema:m.schema,state:t});else if(m.type==="server")p.push(m.server);else if(m.type==="webhook"){let f=Np({operation:m.operation,plugin:e,state:t});c.push(f);}}),t.usedTypeIDs.size){let m=n.typeParameterDeclaration({constraint:n.keywordTypeNode({keyword:"string"}),name:"T"}),f=n.typeAliasDeclaration({exportType:true,name:"TypeID",type:n.templateLiteralType({value:[n.typeReferenceNode({typeName:"T"}),"_",n.keywordTypeNode({keyword:"string"})]}),typeParameters:[m]});r.add(f);for(let l of t.usedTypeIDs.values()){let d=Ae(E({case:e.config.case,value:l+"_id"})),y=n.typeAliasDeclaration({exportType:true,name:d,type:n.typeReferenceNode({typeArguments:[n.literalTypeNode({literal:n.stringLiteral({text:l})})],typeName:"TypeID"})});r.add(y);}}Ap({nodeInfo:o,plugin:e,servers:p}),jp({nodeInfo:a,plugin:e,webhookNames:c});};var Vd=e=>{switch(e.type){case "data":case "error":case "errors":case "response":case "responses":case "webhook-payload":case "webhook-request":return `${e.operation.id}-${e.type}`;case "ref":return e.value;default:return e.type}},wp={getId:Vd,schemaToType:e=>te({onRef:void 0,...e})};var rs={api:wp,config:{case:"PascalCase",exportFromIndex:true,style:"preserve",tree:false},handler:vp,handlerLegacy:bp,name:"@hey-api/typescript",output:"types",resolveConfig:(e,t)=>{e.config.definitions=t.valueToObject({defaultValue:{case:e.config.case??"PascalCase",name:"{{name}}"},mappers:{function:r=>({name:r}),string:r=>({name:r})},value:e.config.definitions}),e.config.enums=t.valueToObject({defaultValue:{case:"SCREAMING_SNAKE_CASE",constantsIgnoreNull:false,enabled:!!e.config.enums,mode:"javascript"},mappers:{boolean:r=>({enabled:r}),string:r=>({mode:r})},value:e.config.enums}),e.config.errors=t.valueToObject({defaultValue:{case:e.config.case??"PascalCase",error:"{{name}}Error",name:"{{name}}Errors"},mappers:{function:r=>({name:r}),string:r=>({name:r})},value:e.config.errors}),e.config.requests=t.valueToObject({defaultValue:{case:e.config.case??"PascalCase",name:"{{name}}Data"},mappers:{function:r=>({name:r}),string:r=>({name:r})},value:e.config.requests}),e.config.responses=t.valueToObject({defaultValue:{case:e.config.case??"PascalCase",name:"{{name}}Responses",response:"{{name}}Response"},mappers:{function:r=>({name:r}),string:r=>({name:r})},value:e.config.responses}),e.config.webhooks=t.valueToObject({defaultValue:{case:e.config.case??"PascalCase",name:"{{name}}WebhookRequest",payload:"{{name}}WebhookPayload"},mappers:{function:r=>({name:r}),string:r=>({name:r})},value:e.config.webhooks});}};var ns=(e,t,r)=>{let s=e.config[r].meta;if(!s)return;let o=s(t);if(Object.keys(o).length)return n.valueToExpression({value:o})};var qp=()=>({hasCreateQueryKeyParamsFunction:false,hasMutations:false,hasQueries:false,hasUsedQueryFn:false});var $p=({files:e,operation:t,plugin:r,states:s})=>{let o="";r.config.groupByTag&&(o=t.tags?.[0]||"default");let i=o?`${r.name}/${o}`:r.name;if(!e.has(i)){let a=o?`${r.output}/${o}`:r.output,p=r.createFile({case:r.config.case,id:i,path:a});e.set(i,p),s.set(i,qp()),p.import({...M.Options,module:p.relativePathToFile({context:r.context,id:"sdk"})});}return {file:e.get(i),state:s.get(i)}},Ir=({file:e,operation:t,plugin:r})=>{let s=r.getPlugin("@hey-api/sdk");return Ur({file:e,operation:t,plugin:s})},ss=({file:e,operation:t,plugin:r})=>{let s=r.getPlugin("@hey-api/typescript"),o=r.context.file({id:T}),a={asType:true,name:e.import({asType:true,module:e.relativePathToFile({context:r.context,id:T}),name:o.getName(s.api.getId({operation:t,type:"error"}))}).name||""};if(a.name||(a={asType:true,name:"Error"}),k(r.context.config).name==="@hey-api/client-axios"){let c=e.import({asType:true,module:"axios",name:"AxiosError"});a={...c,name:`${c.name}<${a.name}>`};}return a},os=({file:e,operation:t,plugin:r})=>{let s=r.getPlugin("@hey-api/typescript"),o=r.context.file({id:T});return e.import({asType:true,module:e.relativePathToFile({context:r.context,id:T}),name:o.getName(s.api.getId({operation:t,type:"response"}))}).name||"unknown"};var Fp="UseMutationOptions",Mp=({file:e,operation:t,plugin:r,queryFn:s,state:o})=>{if(!r.config.mutationOptions.enabled||!r.hooks.operation.isMutation(t))return;o.hasMutations||(o.hasMutations=true,e.import({asType:true,module:r.name,name:Fp})),o.hasUsedQueryFn=true;let i=Ir({file:e,operation:t,plugin:r}),a=ss({file:e,operation:t,plugin:r}),p=os({file:e,operation:t,plugin:r}),c=e.identifier({$ref:`#/pinia-colada-mutation-options/${t.id}`,case:r.config.mutationOptions.case,create:true,nameTransformer:r.config.mutationOptions.name,namespace:"value"}),m="fnOptions",f=n.awaitExpression({expression:n.callExpression({functionName:s,parameters:[n.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:m},{key:"throwOnError",value:true}]})]})}),l=[];r.getPlugin("@hey-api/sdk")?.config.responseStyle==="data"?l.push(n.returnVariable({expression:f})):l.push(n.constVariable({destructure:true,expression:f,name:"data"}),n.returnVariable({expression:"data"}));let d=[{key:"mutation",value:n.arrowFunction({async:true,multiLine:true,parameters:[{name:m}],statements:l})}],y=ns(r,t,"mutationOptions");y&&d.push({key:"meta",value:y});let g=ee({context:r.context,operation:t}),h=n.constVariable({comment:r.config.comments?W({operation:t}):void 0,exportConst:true,expression:n.arrowFunction({parameters:[{isRequired:g,name:"options",type:i}],returnType:`${Fp}<${p}, ${i}, ${a.name}>`,statements:[n.returnStatement({expression:n.objectExpression({obj:d})})]}),name:c.name||""});e.add(h);};var Lp="createQueryKey",Dp="QueryKey",Xr="TOptions",is=n.identifier({text:"options"}),Vp=({file:e,plugin:t})=>{let r=e.identifier({$ref:`#/pinia-colada-create-query-key/${Lp}`,case:t.config.case,create:true,namespace:"value"});if(r.name){let s=n.indexedAccessTypeNode({indexType:n.literalTypeNode({literal:n.ots.number(0)}),objectType:n.typeReferenceNode({typeArguments:[n.typeReferenceNode({typeName:Xr})],typeName:Dp})}),o=de(t.context.config),i=n.constVariable({expression:n.arrowFunction({multiLine:true,parameters:[{name:"id",type:n.typeReferenceNode({typeName:"string"})},{isRequired:false,name:"options",type:n.typeReferenceNode({typeName:Xr})},{isRequired:false,name:"tags",type:n.typeReferenceNode({typeName:"ReadonlyArray<string>"})}],returnType:n.typeTupleNode({types:[s]}),statements:[n.constVariable({assertion:s,expression:n.objectExpression({multiLine:false,obj:[{key:"_id",value:n.identifier({text:"id"})},{key:o,value:n.identifier({text:`options?.${o} || (options?.client ?? _heyApiClient).getConfig().${o}`})}]}),name:"params",typeName:s}),n.ifStatement({expression:n.identifier({text:"tags"}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"tags"}),right:n.asExpression({expression:n.asExpression({expression:n.identifier({text:"tags"}),type:n.keywordTypeNode({keyword:"unknown"})}),type:n.keywordTypeNode({keyword:"undefined"})})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:is,isOptional:true,name:n.identifier({text:"body"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"body"}),right:n.propertyAccessExpression({expression:"options",name:"body"})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:is,isOptional:true,name:n.identifier({text:"headers"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"headers"}),right:n.asExpression({expression:n.asExpression({expression:n.propertyAccessExpression({expression:"options",name:"headers"}),type:n.keywordTypeNode({keyword:"unknown"})}),type:n.keywordTypeNode({keyword:"undefined"})})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:is,isOptional:true,name:n.identifier({text:"path"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"path"}),right:n.propertyAccessExpression({expression:"options",name:"path"})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:is,isOptional:true,name:n.identifier({text:"query"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"query"}),right:n.asExpression({expression:n.asExpression({expression:n.propertyAccessExpression({expression:"options",name:"query"}),type:n.keywordTypeNode({keyword:"unknown"})}),type:n.keywordTypeNode({keyword:"undefined"})})})})]})}),n.returnStatement({expression:n.arrayLiteralExpression({elements:[n.identifier({text:"params"})]})})],types:[{extends:n.typeReferenceNode({typeName:n.identifier({text:M.Options.name})}),name:Xr}]}),name:r.name});e.add(i);}},_d=({file:e,id:t,operation:r,plugin:s})=>{let o=e.identifier({$ref:`#/pinia-colada-create-query-key/${Lp}`,case:s.config.case,namespace:"value"}),i=s.config.queryKeys,a;return i.tags&&r.tags&&r.tags.length>0&&(a=n.arrayLiteralExpression({elements:r.tags.map(c=>n.stringLiteral({text:c}))})),n.callExpression({functionName:o.name||"",parameters:[n.ots.string(t),"options",a]})},Bp=({file:e,plugin:t})=>{e.import({asType:true,module:t.name,name:"_JSONValue"});let r=[{name:"_id",type:n.keywordTypeNode({keyword:"string"})},{isRequired:false,name:de(t.context.config),type:n.typeReferenceNode({typeName:"_JSONValue"})},{isRequired:false,name:"headers",type:n.typeReferenceNode({typeName:"_JSONValue"})},{isRequired:false,name:"query",type:n.typeReferenceNode({typeName:"_JSONValue"})},{isRequired:false,name:"tags",type:n.typeReferenceNode({typeName:"_JSONValue"})}],s=n.typeAliasDeclaration({exportType:true,name:Dp,type:n.typeTupleNode({types:[n.typeIntersectionNode({types:[n.typeReferenceNode({typeName:`Pick<${Xr}, 'body' | 'path'>`}),n.typeInterfaceNode({properties:r,useLegacyResolution:true})]})]}),typeParameters:[{extends:n.typeReferenceNode({typeName:n.identifier({text:M.Options.name})}),name:Xr}]});e.add(s);},_p=({file:e,operation:t,plugin:r})=>{let s=Ir({file:e,operation:t,plugin:r}),o=e.identifier({$ref:`#/pinia-colada-query-key/${t.id}`,case:r.config.queryKeys.case,create:true,nameTransformer:r.config.queryKeys.name,namespace:"value"});return n.constVariable({exportConst:true,expression:n.arrowFunction({parameters:[{isRequired:fr(t),name:"options",type:s}],statements:_d({file:e,id:t.id,operation:t,plugin:r})}),name:o.name||""})};var Kp="UseQueryOptions",Oo="options",zp=({file:e,operation:t,plugin:r,queryFn:s,state:o})=>{if(!r.config.queryOptions.enabled||!r.hooks.operation.isQuery(t)||Sr({operation:t}))return;let i=ee({context:r.context,operation:t});o.hasQueries||(o.hasQueries=true,o.hasCreateQueryKeyParamsFunction||(Bp({file:e,plugin:r}),Vp({file:e,plugin:r}),o.hasCreateQueryKeyParamsFunction=true),e.import({asType:true,module:r.name,name:Kp})),o.hasUsedQueryFn=true;let a=_p({file:e,operation:t,plugin:r});e.add(a);let p=Ir({file:e,operation:t,plugin:r}),c=ss({file:e,operation:t,plugin:r}),m=os({file:e,operation:t,plugin:r}),f=e.identifier({$ref:`#/pinia-colada-query-options/${t.id}`,case:r.config.queryOptions.case,create:true,nameTransformer:r.config.queryOptions.name,namespace:"value"}),l="context",d=e.identifier({$ref:`#/pinia-colada-query-key/${t.id}`,case:r.config.queryKeys.case,nameTransformer:r.config.queryKeys.name,namespace:"value"}),y=n.awaitExpression({expression:n.callExpression({functionName:s,parameters:[n.objectExpression({multiLine:true,obj:[{spread:Oo},{spread:l},{key:"throwOnError",value:true}]})]})}),g=[];r.getPlugin("@hey-api/sdk")?.config.responseStyle==="data"?g.push(n.returnVariable({expression:y})):g.push(n.constVariable({destructure:true,expression:y,name:"data"}),n.returnVariable({expression:"data"}));let h=[{key:"key",value:n.callExpression({functionName:d.name||"",parameters:[Oo]})},{key:"query",value:n.arrowFunction({async:true,multiLine:true,parameters:[{name:l}],statements:g})}],b=ns(r,t,"queryOptions");b&&h.push({key:"meta",value:b});let S=n.constVariable({comment:r.config.comments?W({operation:t}):void 0,exportConst:true,expression:n.arrowFunction({parameters:[{isRequired:i,name:Oo,type:p}],returnType:`${Kp}<${m}, ${c.name}>`,statements:[n.returnStatement({expression:n.objectExpression({obj:h})})]}),name:f.name||""});e.add(S);};var Wp=({plugin:e})=>{let t=new Map,r=new Map;if(e.forEach("operation",({operation:s})=>{let{file:o,state:i}=$p({files:t,operation:s,plugin:e,states:r});i.hasUsedQueryFn=false;let a=e.getPlugin("@hey-api/sdk"),p=a.config.asClass?qe({context:e.context,operation:s,plugin:a}):void 0,c=p?p.values().next().value:void 0,m=(c?[c.path[0],...c.path.slice(1).map(f=>E({case:"camelCase",value:f})),c.methodName].filter(Boolean):[ge({config:e.context.config,handleIllegal:true,id:s.id,operation:s})]).join(".");zp({file:o,operation:s,plugin:e,queryFn:m,state:i}),Mp({file:o,operation:s,plugin:e,queryFn:m,state:i}),i.hasUsedQueryFn&&o.import({module:o.relativePathToFile({context:e.context,id:"sdk"}),name:m.split(".")[0]});}),t.forEach((s,o)=>{r.get(o).hasQueries&&s.import({alias:"_heyApiClient",module:s.relativePathToFile({context:e.context,id:le}),name:"client"});}),e.config.groupByTag&&e.config.exportFromIndex){let s=e.createFile({case:e.config.case,id:`${e.name}/index`,path:`${e.output}/index`});t.forEach((o,i)=>{if(i!==e.name){let a=i.split("/").pop();s.add(n.exportAllDeclaration({module:`./${a}`}));}});}};var as={config:{case:"camelCase",comments:true,exportFromIndex:false,groupByTag:false},dependencies:["@hey-api/typescript","@hey-api/sdk"],handler:Wp,name:"@pinia/colada",output:"@pinia/colada",resolveConfig:(e,t)=>{e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Query"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryOptions});}};var Pr=(e,t,r)=>{let s=e.config[r].meta;if(!s)return;let o=s(t);if(Object.keys(o).length)return n.valueToExpression({value:o})};var rt=({operation:e,plugin:t})=>{let r=t.context.file({id:t.name}),s=t.getPlugin("@hey-api/sdk");return Ur({file:r,operation:e,plugin:s})},ps=({operation:e,plugin:t})=>{let r=t.context.file({id:t.name}),s=t.getPlugin("@hey-api/typescript"),o=t.context.file({id:T}),a={asType:true,name:r.import({asType:true,module:r.relativePathToFile({context:t.context,id:T}),name:o.getName(s.api.getId({operation:e,type:"error"}))}).name||""};if(a.name||(a=r.import({asType:true,module:t.name,name:"DefaultError"})),k(t.context.config).name==="@hey-api/client-axios"){let c=r.import({asType:true,module:"axios",name:"AxiosError"});a={...c,name:`${c.name}<${a.name}>`};}return a},cs=({operation:e,plugin:t})=>{let r=t.context.file({id:t.name}),s=t.getPlugin("@hey-api/typescript"),o=t.context.file({id:T});return r.import({asType:true,module:r.relativePathToFile({context:t.context,id:T}),name:o.getName(s.api.getId({operation:e,type:"response"}))}).name||"unknown"};var Qp="createQueryKey",fs="QueryKey",Gr="TOptions",Hp=n.identifier({text:"infinite"}),ms=n.identifier({text:"options"}),ls=({plugin:e})=>{let t=e.context.file({id:e.name}),r=t.identifier({$ref:`#/tanstack-query-create-query-key/${Qp}`,case:e.config.case,create:true,namespace:"value"});if(r.name){let s=n.indexedAccessTypeNode({indexType:n.literalTypeNode({literal:n.ots.number(0)}),objectType:n.typeReferenceNode({typeArguments:[n.typeReferenceNode({typeName:Gr})],typeName:fs})}),o=de(e.context.config),i=n.constVariable({expression:n.arrowFunction({multiLine:true,parameters:[{name:"id",type:n.typeReferenceNode({typeName:"string"})},{isRequired:false,name:"options",type:n.typeReferenceNode({typeName:Gr})},{isRequired:false,name:"infinite",type:n.typeReferenceNode({typeName:"boolean"})},{isRequired:false,name:"tags",type:n.typeReferenceNode({typeName:"ReadonlyArray<string>"})}],returnType:n.typeTupleNode({types:[s]}),statements:[n.constVariable({assertion:s,expression:n.objectExpression({multiLine:false,obj:[{key:"_id",value:n.identifier({text:"id"})},{key:o,value:n.identifier({text:`options?.${o} || (options?.client ?? _heyApiClient).getConfig().${o}`})}]}),name:"params",typeName:s}),n.ifStatement({expression:Hp,thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"_infinite"}),right:Hp})})]})}),n.ifStatement({expression:n.identifier({text:"tags"}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"tags"}),right:n.identifier({text:"tags"})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:ms,isOptional:true,name:n.identifier({text:"body"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"body"}),right:n.propertyAccessExpression({expression:"options",name:"body"})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:ms,isOptional:true,name:n.identifier({text:"headers"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"headers"}),right:n.propertyAccessExpression({expression:"options",name:"headers"})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:ms,isOptional:true,name:n.identifier({text:"path"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"path"}),right:n.propertyAccessExpression({expression:"options",name:"path"})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:ms,isOptional:true,name:n.identifier({text:"query"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"query"}),right:n.propertyAccessExpression({expression:"options",name:"query"})})})]})}),n.returnStatement({expression:n.arrayLiteralExpression({elements:[n.identifier({text:"params"})]})})],types:[{extends:n.typeReferenceNode({typeName:n.identifier({text:M.Options.name})}),name:Gr}]}),name:r.name});t.add(i);}},zd=({id:e,isInfinite:t,operation:r,plugin:s})=>{let i=s.context.file({id:s.name}).identifier({$ref:`#/tanstack-query-create-query-key/${Qp}`,case:s.config.case,namespace:"value"}),a=t?s.config.infiniteQueryKeys:s.config.queryKeys,p;return a.tags&&r.tags&&r.tags.length>0&&(p=n.arrayLiteralExpression({elements:r.tags.map(m=>n.stringLiteral({text:m}))})),n.callExpression({functionName:i.name||"",parameters:[n.ots.string(e),"options",t||p?n.ots.boolean(!!t):void 0,p]})},ds=({plugin:e})=>{let t=e.context.file({id:e.name}),r=[{name:"_id",type:n.keywordTypeNode({keyword:"string"})},{isRequired:false,name:"_infinite",type:n.keywordTypeNode({keyword:"boolean"})},{isRequired:false,name:"tags",type:n.typeReferenceNode({typeName:"ReadonlyArray<string>"})}],s=n.typeAliasDeclaration({exportType:true,name:fs,type:n.typeTupleNode({types:[n.typeIntersectionNode({types:[n.typeReferenceNode({typeName:`Pick<${Gr}, '${de(e.context.config)}' | 'body' | 'headers' | 'path' | 'query'>`}),n.typeInterfaceNode({properties:r,useLegacyResolution:true})]})]}),typeParameters:[{extends:n.typeReferenceNode({typeName:n.identifier({text:M.Options.name})}),name:Gr}]});t.add(s);},us=({isInfinite:e,operation:t,plugin:r,typeQueryKey:s})=>{let o=r.context.file({id:r.name}),i=rt({operation:t,plugin:r}),a=e?o.identifier({$ref:`#/tanstack-query-infinite-query-key/${t.id}`,case:r.config.infiniteQueryKeys.case,create:true,nameTransformer:r.config.infiniteQueryKeys.name,namespace:"value"}):o.identifier({$ref:`#/tanstack-query-query-key/${t.id}`,case:r.config.queryKeys.case,create:true,nameTransformer:r.config.queryKeys.name,namespace:"value"});return n.constVariable({exportConst:true,expression:n.arrowFunction({parameters:[{isRequired:fr(t),name:"options",type:i}],returnType:e?s:void 0,statements:zd({id:t.id,isInfinite:e,operation:t,plugin:r})}),name:a.name||""})};var Zp="createInfiniteParams",Up="infiniteQueryOptions",Hd=({plugin:e})=>{let t=e.context.file({id:e.name}),r=t.identifier({$ref:`#/tanstack-query-create-infinite-params/${Zp}`,case:e.config.case,create:true,namespace:"value"}),s=n.constVariable({expression:n.arrowFunction({multiLine:true,parameters:[{name:"queryKey",type:n.typeReferenceNode({typeName:`QueryKey<${M.Options.name}>`})},{name:"page",type:n.typeReferenceNode({typeName:"K"})}],statements:[n.constVariable({expression:n.objectExpression({obj:[{spread:n.propertyAccessExpression({expression:"queryKey",name:0})}]}),name:"params"}),n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"page"}),name:n.identifier({text:"body"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"body"}),right:n.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].body"},{assertion:"any",spread:"page.body"}]})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"page"}),name:n.identifier({text:"headers"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"headers"}),right:n.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].headers"},{spread:"page.headers"}]})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"page"}),name:n.identifier({text:"path"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"path"}),right:n.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].path"},{assertion:"any",spread:"page.path"}]})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"page"}),name:n.identifier({text:"query"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"query"}),right:n.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].query"},{assertion:"any",spread:"page.query"}]})})})]})}),n.returnVariable({expression:n.asExpression({expression:n.asExpression({expression:n.identifier({text:"params"}),type:n.keywordTypeNode({keyword:"unknown"})}),type:O__default.default.factory.createTypeQueryNode(n.identifier({text:"page"}))})})],types:[{extends:n.typeReferenceNode({typeName:n.identifier({text:`Pick<QueryKey<${M.Options.name}>[0], 'body' | 'headers' | 'path' | 'query'>`})}),name:"K"}]}),name:r.name||""});t.add(s);},Xp=({operation:e,plugin:t,queryFn:r,state:s})=>{let o=Ki({context:t.context,operation:e});if(!o)return;let i=t.context.file({id:t.name}),a=ee({context:t.context,operation:e});s.hasInfiniteQueries||(s.hasInfiniteQueries=true,s.hasCreateQueryKeyParamsFunction||(ds({plugin:t}),ls({plugin:t}),s.hasCreateQueryKeyParamsFunction=true),s.hasCreateInfiniteParamsFunction||(Hd({plugin:t}),s.hasCreateInfiniteParamsFunction=true),i.import({module:t.name,name:Up}),s.typeInfiniteData=i.import({asType:true,module:t.name,name:"InfiniteData"})),s.hasUsedQueryFn=true;let p=rt({operation:e,plugin:t}),c=ps({operation:e,plugin:t}),m=cs({operation:e,plugin:t}),f=`${fs}<${p}>`,l=`Pick<${f}[0], 'body' | 'headers' | 'path' | 'query'>`,d=t.getPlugin("@hey-api/typescript"),y={usedTypeIDs:new Set},g=d.api.schemaToType({plugin:d,schema:o.schema,state:y}),h=`${me({node:g,unescape:true})} | ${l}`,b=us({isInfinite:true,operation:e,plugin:t,typeQueryKey:f});i.add(b);let S=i.identifier({$ref:`#/tanstack-query-infinite-query-key/${e.id}`,case:t.config.infiniteQueryKeys.case,nameTransformer:t.config.infiniteQueryKeys.name,namespace:"value"}),C=n.awaitExpression({expression:n.callExpression({functionName:r,parameters:[n.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"params"},{key:"signal",shorthand:true,value:n.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),F=i.identifier({$ref:`#/tanstack-query-create-infinite-params/${Zp}`,case:t.config.case,namespace:"value"}),v=[n.constVariable({comment:[{jsdoc:false,lines:["@ts-ignore"]}],expression:n.conditionalExpression({condition:n.binaryExpression({left:n.typeOfExpression({text:"pageParam"}),operator:"===",right:n.ots.string("object")}),whenFalse:n.objectExpression({multiLine:true,obj:[{key:o.in,value:n.objectExpression({multiLine:true,obj:[{key:o.name,value:n.identifier({text:"pageParam"})}]})}]}),whenTrue:n.identifier({text:"pageParam"})}),name:"page",typeName:l}),n.constVariable({expression:n.callExpression({functionName:F.name||"",parameters:["queryKey","page"]}),name:"params"})];t.getPlugin("@hey-api/sdk")?.config.responseStyle==="data"?v.push(n.returnVariable({expression:C})):v.push(n.constVariable({destructure:true,expression:C,name:"data"}),n.returnVariable({expression:"data"}));let L=i.identifier({$ref:`#/tanstack-query-infinite-query-options/${e.id}`,case:t.config.infiniteQueryOptions.case,create:true,nameTransformer:t.config.infiniteQueryOptions.name,namespace:"value"}),Z=[{key:"queryFn",value:n.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"pageParam"},{name:"queryKey"},{name:"signal"}]}],statements:v})},{key:"queryKey",value:n.callExpression({functionName:S.name||"",parameters:["options"]})}],D=Pr(t,e,"infiniteQueryOptions");D&&Z.push({key:"meta",value:D});let X=n.constVariable({comment:t.config.comments?W({operation:e}):void 0,exportConst:true,expression:n.arrowFunction({parameters:[{isRequired:a,name:"options",type:p}],statements:[n.returnFunctionCall({args:[n.objectExpression({comments:[{jsdoc:false,lines:["@ts-ignore"]}],obj:Z})],name:Up,types:[m,c.name||"unknown",`${typeof s.typeInfiniteData=="string"?s.typeInfiniteData:s.typeInfiniteData.name}<${m}>`,f,h]})]}),name:L.name||""});i.add(X);};var Gp="mutationOptions",Jp=({operation:e,plugin:t,queryFn:r,state:s})=>{let o=t.name==="@tanstack/angular-query-experimental"||t.name==="@tanstack/svelte-query"||t.name==="@tanstack/solid-query"?"MutationOptions":"UseMutationOptions",i=t.context.file({id:t.name});s.hasMutations||(s.hasMutations=true,i.import({asType:true,module:t.name,name:o})),s.hasUsedQueryFn=true;let a=rt({operation:e,plugin:t}),p=ps({operation:e,plugin:t}),c=cs({operation:e,plugin:t}),m=`${o}<${c}, ${p.name}, ${a}>`,f="fnOptions",l=n.awaitExpression({expression:n.callExpression({functionName:r,parameters:[n.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:f},{key:"throwOnError",value:true}]})]})}),d=[];t.getPlugin("@hey-api/sdk")?.config.responseStyle==="data"?d.push(n.returnVariable({expression:l})):d.push(n.constVariable({destructure:true,expression:l,name:"data"}),n.returnVariable({expression:"data"}));let y=i.identifier({$ref:`#/tanstack-query-mutation-options/${e.id}`,case:t.config.mutationOptions.case,create:true,nameTransformer:t.config.mutationOptions.name,namespace:"value"}),g=[{key:"mutationFn",value:n.arrowFunction({async:true,multiLine:true,parameters:[{name:f}],statements:d})}],h=Pr(t,e,"mutationOptions");h&&g.push({key:"meta",value:h});let b=n.arrowFunction({parameters:[{isRequired:false,name:"options",type:`Partial<${a}>`}],returnType:m,statements:[n.constVariable({expression:n.objectExpression({obj:g}),name:Gp,typeName:m}),n.returnVariable({expression:Gp})]}),S=n.constVariable({comment:t.config.comments?W({operation:e}):void 0,exportConst:true,expression:b,name:y.name||""});i.add(S);};var Yp="queryOptions",So="options",ec=({operation:e,plugin:t,queryFn:r,state:s})=>{if(Sr({operation:e}))return;let o=t.context.file({id:t.name}),i=ee({context:t.context,operation:e});s.hasQueries||(s.hasQueries=true,s.hasCreateQueryKeyParamsFunction||(ds({plugin:t}),ls({plugin:t}),s.hasCreateQueryKeyParamsFunction=true),o.import({module:t.name,name:Yp})),s.hasUsedQueryFn=true;let a=us({isInfinite:false,operation:e,plugin:t});o.add(a);let p=rt({operation:e,plugin:t}),c=o.identifier({$ref:`#/tanstack-query-query-key/${e.id}`,case:t.config.queryKeys.case,nameTransformer:t.config.queryKeys.name,namespace:"value"}),m=n.awaitExpression({expression:n.callExpression({functionName:r,parameters:[n.objectExpression({multiLine:true,obj:[{spread:So},{spread:"queryKey[0]"},{key:"signal",shorthand:true,value:n.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),f=[];t.getPlugin("@hey-api/sdk")?.config.responseStyle==="data"?f.push(n.returnVariable({expression:m})):f.push(n.constVariable({destructure:true,expression:m,name:"data"}),n.returnVariable({expression:"data"}));let l=o.identifier({$ref:`#/tanstack-query-query-options/${e.id}`,case:t.config.queryOptions.case,create:true,nameTransformer:t.config.queryOptions.name,namespace:"value"}),d=[{key:"queryFn",value:n.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"queryKey"},{name:"signal"}]}],statements:f})},{key:"queryKey",value:n.callExpression({functionName:c.name||"",parameters:[So]})}],y=Pr(t,e,"queryOptions");y&&d.push({key:"meta",value:y});let g=n.constVariable({comment:t.config.comments?W({operation:e}):void 0,exportConst:t.config.queryOptions.exported,expression:n.arrowFunction({parameters:[{isRequired:i,name:So,type:p}],statements:[n.returnFunctionCall({args:[n.objectExpression({obj:d})],name:Yp})]}),name:l.name||""});o.add(g);};var tc="useQuery",rc="options",nc=({operation:e,plugin:t,state:r})=>{if(Sr({operation:e}))return;let s=t.context.file({id:t.name});r.hasUseQuery||(r.hasUseQuery=true,s.import({module:t.name,name:tc}));let o=s.identifier({$ref:`#/tanstack-query-use-query/${e.id}`,case:"useQuery"in t.config?t.config.useQuery.case:void 0,create:true,nameTransformer:"useQuery"in t.config?t.config.useQuery.name:void 0,namespace:"value"}),i=s.identifier({$ref:`#/tanstack-query-query-options/${e.id}`,case:t.config.queryOptions.case,nameTransformer:t.config.queryOptions.name,namespace:"value"}),a=ee({context:t.context,operation:e}),p=rt({operation:e,plugin:t}),c=n.constVariable({comment:t.config.comments?W({operation:e}):void 0,exportConst:true,expression:n.arrowFunction({parameters:[{isRequired:a,name:rc,type:p}],statements:[n.returnStatement({expression:n.callExpression({functionName:tc,parameters:[n.callExpression({functionName:i.name||"",parameters:[rc]})]})})]}),name:o.name||""});s.add(c);};var nt=({plugin:e})=>{let t=e.createFile({case:e.config.case,id:e.name,path:e.output}),r={hasCreateInfiniteParamsFunction:false,hasCreateQueryKeyParamsFunction:false,hasInfiniteQueries:false,hasMutations:false,hasQueries:false,hasUsedQueryFn:false,typeInfiniteData:void 0};t.import({...M.Options,module:t.relativePathToFile({context:e.context,id:"sdk"})}),e.forEach("operation",({operation:s})=>{r.hasUsedQueryFn=false;let o=e.getPlugin("@hey-api/sdk"),i=o?.config.asClass?qe({context:e.context,operation:s,plugin:o}):void 0,a=i?i.values().next().value:void 0,p=(a?[a.path[0],...a.path.slice(1).map(c=>E({case:"camelCase",value:c})),a.methodName].filter(Boolean):[ge({config:e.context.config,handleIllegal:true,id:s.id,operation:s})]).join(".");e.hooks.operation.isQuery(s)&&(e.config.queryOptions.enabled&&ec({operation:s,plugin:e,queryFn:p,state:r}),e.config.infiniteQueryOptions.enabled&&Xp({operation:s,plugin:e,queryFn:p,state:r}),"useQuery"in e.config&&e.config.useQuery.enabled&&nc({operation:s,plugin:e,state:r})),e.hooks.operation.isMutation(s)&&e.config.mutationOptions.enabled&&Jp({operation:s,plugin:e,queryFn:p,state:r}),r.hasUsedQueryFn&&t.import({module:t.relativePathToFile({context:e.context,id:"sdk"}),name:p.split(".")[0]});}),(r.hasQueries||r.hasInfiniteQueries)&&t.import({alias:"_heyApiClient",module:t.relativePathToFile({context:e.context,id:le}),name:"client"});};var Qd=e=>`${ge({config:A(),id:e.name,operation:e})}InfiniteOptions`,Ud=e=>`${ge({config:A(),id:e.name,operation:e})}Mutation`,Zd=({config:e,id:t,operation:r})=>`${ge({config:e,id:t,operation:r})}Options`,ys=({config:e,id:t,isInfinite:r,operation:s})=>`${ge({config:e,id:t,operation:s})}${r?"Infinite":""}QueryKey`,Xd=e=>{switch(e.in){case "formData":return "body";case "header":return "headers";default:return e.in}},Gd="createInfiniteParams",lc="createQueryKey",sc="infiniteQueryOptions",oc="mutationOptions",Ro="QueryKey",ic="queryOptions",Yr="TOptions",Jd=({file:e})=>{let t=n.constVariable({expression:n.arrowFunction({multiLine:true,parameters:[{name:"queryKey",type:n.typeNode(`QueryKey<${M.OptionsLegacyParser.name}>`)},{name:"page",type:n.typeNode("K")}],statements:[n.constVariable({expression:n.identifier({text:"queryKey[0]"}),name:"params"}),n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"page"}),name:n.identifier({text:"body"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"body"}),right:n.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].body"},{assertion:"any",spread:"page.body"}]})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"page"}),name:n.identifier({text:"headers"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"headers"}),right:n.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].headers"},{spread:"page.headers"}]})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"page"}),name:n.identifier({text:"path"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"path"}),right:n.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].path"},{spread:"page.path"}]})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"page"}),name:n.identifier({text:"query"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"query"}),right:n.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].query"},{spread:"page.query"}]})})})]})}),n.returnVariable({expression:O__default.default.factory.createAsExpression(O__default.default.factory.createAsExpression(n.identifier({text:"params"}),O__default.default.factory.createKeywordTypeNode(O__default.default.SyntaxKind.UnknownKeyword)),O__default.default.factory.createTypeQueryNode(n.identifier({text:"page"})))})],types:[{extends:n.typeReferenceNode({typeName:n.identifier({text:`Pick<QueryKey<${M.OptionsLegacyParser.name}>[0], 'body' | 'headers' | 'path' | 'query'>`})}),name:"K"}]}),name:Gd});e.add(t);},ac=({file:e})=>{let t=n.indexedAccessTypeNode({indexType:n.typeNode(0),objectType:n.typeNode(Ro,[n.typeNode(Yr)])}),r=n.identifier({text:"infinite"}),s=de(A()),o=n.constVariable({expression:n.arrowFunction({multiLine:true,parameters:[{name:"id",type:n.typeNode("string")},{isRequired:false,name:"options",type:n.typeNode(Yr)},{isRequired:false,name:"infinite",type:n.typeNode("boolean")}],returnType:t,statements:[n.constVariable({assertion:t,expression:n.objectExpression({multiLine:false,obj:[{key:"_id",value:n.identifier({text:"id"})},{key:s,value:n.identifier({text:`options?.${s} || (options?.client ?? _heyApiClient).getConfig().${s}`})}]}),name:"params",typeName:t}),n.ifStatement({expression:r,thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"_infinite"}),right:r})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"options"}),isOptional:true,name:n.identifier({text:"body"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"body"}),right:n.propertyAccessExpression({expression:"options",name:"body"})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"options"}),isOptional:true,name:n.identifier({text:"headers"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"headers"}),right:n.propertyAccessExpression({expression:"options",name:"headers"})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"options"}),isOptional:true,name:n.identifier({text:"path"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"path"}),right:n.propertyAccessExpression({expression:"options",name:"path"})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"options"}),isOptional:true,name:n.identifier({text:"query"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"query"}),right:n.propertyAccessExpression({expression:"options",name:"query"})})})]})}),n.returnVariable({expression:"params"})],types:[{extends:n.typeReferenceNode({typeName:n.identifier({text:M.OptionsLegacyParser.name})}),name:Yr}]}),name:lc});e.add(o);},pc=({file:e})=>{let t=[{name:"_id",type:n.keywordTypeNode({keyword:"string"})},{isRequired:false,name:"_infinite",type:n.keywordTypeNode({keyword:"boolean"})}],r=n.typeAliasDeclaration({name:Ro,type:n.typeTupleNode({types:[n.typeIntersectionNode({types:[n.typeReferenceNode({typeName:`Pick<${Yr}, '${de(A())}' | 'body' | 'headers' | 'path' | 'query'>`}),n.typeInterfaceNode({properties:t,useLegacyResolution:true})]})]}),typeParameters:[{extends:n.typeReferenceNode({typeName:n.identifier({text:M.OptionsLegacyParser.name})}),name:Yr}]});e.add(r);},To=({client:e,file:t,operation:r,typesModulePath:s})=>{let{name:o}=Zt({client:e,meta:r.parameters.length?{$ref:r.name,name:r.name}:void 0,nameTransformer:Xt,onImport:a=>{t.import({asType:true,module:s,name:a});}});return {typeData:ho({importedType:o})}},cc=({client:e,file:t,operation:r,pluginName:s,typesModulePath:o})=>{let i=A(),{name:a}=Zt({client:e,meta:{$ref:r.name,name:r.name},nameTransformer:Rr,onImport:m=>{t.import({asType:true,module:o,name:m});}}),p={asType:true,name:a};if(p.name||(p=t.import({asType:true,module:s,name:"DefaultError"})),k(i).name==="@hey-api/client-axios"){let m=t.import({asType:true,module:"axios",name:"AxiosError"});p={...m,name:`${m.name}<${p.name}>`};}return {typeError:p}},mc=({client:e,file:t,operation:r,typesModulePath:s})=>{let{name:o}=Zt({client:e,meta:{$ref:r.name,name:r.name},nameTransformer:tt,onImport:a=>{t.import({asType:true,module:s,name:a});}});return {typeResponse:o||"void"}},fc=({id:e,isInfinite:t})=>n.arrayLiteralExpression({elements:[n.callExpression({functionName:lc,parameters:[n.ots.string(e),"options",t?n.ots.boolean(true):void 0]})],multiLine:false}),st=({client:e,files:t,plugin:r})=>{let s=A();if(re(s))throw new Error("TanStack Query plugin does not support legacy clients");let o=t[r.name];o.import({...M.OptionsLegacyParser,module:J({config:s,sourceOutput:r.output})});let i=Jt({moduleOutput:t.types.nameWithoutExtension(),sourceOutput:r.output}),a=r.name==="@tanstack/angular-query-experimental"||r.name==="@tanstack/svelte-query"||r.name==="@tanstack/solid-query"?"MutationOptions":"UseMutationOptions",p,c=false,m=false,f=false,l=false,d=false,y=new Map;for(let g of e.services)for(let h of g.operations){let b=$(h);if(y.has(b))continue;y.set(b,true);let S=[s.plugins["@hey-api/sdk"]?.config.asClass&&Or({config:s,name:g.name}),ge({config:s,handleIllegal:!s.plugins["@hey-api/sdk"]?.config.asClass,id:h.name,operation:h})].filter(Boolean).join("."),C=false;if(r.config.queryOptions.enabled&&["GET","POST"].includes(h.method)){d||(d=true,m||(pc({file:o}),ac({file:o}),m=true),o.import({module:r.name,name:ic})),C=true;let{typeData:F}=To({client:e,file:o,operation:h,typesModulePath:i}),v=Ge(h.parameters),L=n.constVariable({exportConst:true,expression:n.arrowFunction({parameters:[{isRequired:v,name:"options",type:F}],statements:fc({id:h.name})}),name:ys({config:s,id:h.name,operation:h})});o.add(L);let Z=n.constVariable({comment:[],exportConst:true,expression:n.arrowFunction({parameters:[{isRequired:v,name:"options",type:F}],statements:[n.returnFunctionCall({args:[n.objectExpression({obj:[{key:"queryFn",value:n.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"queryKey"},{name:"signal"}]}],statements:[n.constVariable({destructure:true,expression:n.awaitExpression({expression:n.callExpression({functionName:S,parameters:[n.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"queryKey[0]"},{key:"signal",shorthand:true,value:n.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),name:"data"}),n.returnVariable({expression:"data"})]})},{key:"queryKey",value:n.callExpression({functionName:ys({config:s,id:h.name,operation:h}),parameters:["options"]})}]})],name:ic})]}),name:Zd({config:s,id:h.name,operation:h})});o.add(Z);}if(r.config.infiniteQueryOptions&&["GET","POST"].includes(h.method)){let F,v=h.parameters.find(L=>{if(Se(s.parser.pagination).test(L.name))return F=L,true;if(L.in==="body"){if(L.export==="reference"){let D=L.$refs[0];return e.models.find(he=>he.meta?.$ref===D)?.properties.find(he=>{if(Se(s.parser.pagination).test(he.name))return F=he,true})}return L.properties.find(D=>{if(Se(s.parser.pagination).test(D.name))return F=D,true})}});if(v&&F){f||(f=true,m||(pc({file:o}),ac({file:o}),m=true),c||(Jd({file:o}),c=true),o.import({module:r.name,name:sc}),p=o.import({asType:true,module:r.name,name:"InfiniteData"})),C=true;let{typeData:L}=To({client:e,file:o,operation:h,typesModulePath:i}),{typeError:Z}=cc({client:e,file:o,operation:h,pluginName:r.name,typesModulePath:i}),{typeResponse:D}=mc({client:e,file:o,operation:h,typesModulePath:i}),X=Ge(h.parameters),he=`${Ro}<${L}>`,wt=`Pick<${he}[0], 'body' | 'headers' | 'path' | 'query'>`,H=`${F.base} | ${wt}`,xe=n.constVariable({exportConst:true,expression:n.arrowFunction({parameters:[{isRequired:X,name:"options",type:L}],returnType:he,statements:fc({id:h.name,isInfinite:true})}),name:ys({config:s,id:h.name,isInfinite:true,operation:h})});o.add(xe);let Gt=n.constVariable({comment:[],exportConst:true,expression:n.arrowFunction({parameters:[{isRequired:X,name:"options",type:L}],statements:[n.returnFunctionCall({args:[n.objectExpression({comments:[{jsdoc:false,lines:["@ts-ignore"]}],obj:[{key:"queryFn",value:n.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"pageParam"},{name:"queryKey"},{name:"signal"}]}],statements:[n.constVariable({comment:[{jsdoc:false,lines:["@ts-ignore"]}],expression:n.conditionalExpression({condition:n.binaryExpression({left:n.typeOfExpression({text:"pageParam"}),operator:"===",right:n.ots.string("object")}),whenFalse:n.objectExpression({multiLine:true,obj:[{key:Xd(v),value:n.objectExpression({multiLine:true,obj:[{key:F.name,value:n.identifier({text:"pageParam"})}]})}]}),whenTrue:n.identifier({text:"pageParam"})}),name:"page",typeName:wt}),n.constVariable({expression:n.callExpression({functionName:"createInfiniteParams",parameters:["queryKey","page"]}),name:"params"}),n.constVariable({destructure:true,expression:n.awaitExpression({expression:n.callExpression({functionName:S,parameters:[n.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"params"},{key:"signal",shorthand:true,value:n.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),name:"data"}),n.returnVariable({expression:"data"})]})},{key:"queryKey",value:n.callExpression({functionName:ys({config:s,id:h.name,isInfinite:true,operation:h}),parameters:["options"]})}]})],name:sc,types:[D,Z.name,`${typeof p=="string"?p:p.name}<${D}>`,he,H]})]}),name:Qd(h)});o.add(Gt);}}if(r.config.mutationOptions&&["DELETE","PATCH","POST","PUT"].includes(h.method)){l||(l=true,o.import({asType:true,module:r.name,name:a})),C=true;let{typeData:F}=To({client:e,file:o,operation:h,typesModulePath:i}),{typeError:v}=cc({client:e,file:o,operation:h,pluginName:r.name,typesModulePath:i}),{typeResponse:L}=mc({client:e,file:o,operation:h,typesModulePath:i}),Z="fnOptions",D=n.arrowFunction({parameters:[{isRequired:false,name:"options",type:`Partial<${F}>`}],statements:[n.constVariable({expression:n.objectExpression({obj:[{key:"mutationFn",value:n.arrowFunction({async:true,multiLine:true,parameters:[{name:Z}],statements:[n.constVariable({destructure:true,expression:n.awaitExpression({expression:n.callExpression({functionName:S,parameters:[n.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:Z},{key:"throwOnError",value:true}]})]})}),name:"data"}),n.returnVariable({expression:"data"})]})}]}),name:oc,typeName:`${a}<${L}, ${v.name}, ${F}>`}),n.returnVariable({expression:oc})]}),X=n.constVariable({comment:[],exportConst:true,expression:D,name:Ud(h)});o.add(X);}(d||f)&&o.import({alias:"_heyApiClient",module:Jt({moduleOutput:t.client.nameWithoutExtension(),sourceOutput:r.output}),name:"client"}),C&&o.import({module:Jt({moduleOutput:t.sdk.nameWithoutExtension(),sourceOutput:r.output}),name:S.split(".")[0]});}};var gs={config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:nt,handlerLegacy:st,name:"@tanstack/angular-query-experimental",output:"@tanstack/angular-query-experimental",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,exported:true,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryOptions});}};var hs={config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:nt,handlerLegacy:st,name:"@tanstack/react-query",output:"@tanstack/react-query",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,exported:true,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryOptions}),e.config.useQuery=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:false,name:"use{{name}}Query"},mappers:{boolean:r=>({enabled:r}),function:r=>({enabled:true,name:r}),object:r=>({enabled:true,...r}),string:r=>({enabled:true,name:r})},value:e.config.useQuery}),e.config.useQuery.enabled&&(e.config.queryOptions.enabled||(e.config.queryOptions.enabled=true,e.config.queryOptions.exported=false));}};var xs={config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:nt,handlerLegacy:st,name:"@tanstack/solid-query",output:"@tanstack/solid-query",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,exported:true,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryOptions});}};var bs={config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:nt,handlerLegacy:st,name:"@tanstack/svelte-query",output:"@tanstack/svelte-query",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,exported:true,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryOptions});}};var Os={config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:nt,handlerLegacy:st,name:"@tanstack/vue-query",output:"@tanstack/vue-query",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,exported:true,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryOptions});}};var dc="fastify",su=({operation:e,plugin:t})=>{let r=t.context.file({id:dc}),s=[],o=t.getPlugin("@hey-api/typescript"),i=t.context.file({id:T}),a=i.getName(o.api.getId({operation:e,type:"data"}));a&&(e.body&&(r.import({asType:true,module:r.relativePathToFile({context:t.context,id:T}),name:a}),s.push({isRequired:e.body.required,name:"Body",type:`${a}['body']`})),e.parameters&&(e.parameters.header&&(r.import({asType:true,module:r.relativePathToFile({context:t.context,id:T}),name:a}),s.push({isRequired:Tt(e.parameters.header),name:"Headers",type:`${a}['headers']`})),e.parameters.path&&(r.import({asType:true,module:r.relativePathToFile({context:t.context,id:T}),name:a}),s.push({isRequired:Tt(e.parameters.path),name:"Params",type:`${a}['path']`})),e.parameters.query&&(r.import({asType:true,module:r.relativePathToFile({context:t.context,id:T}),name:a}),s.push({isRequired:Tt(e.parameters.query),name:"Querystring",type:`${a}['query']`}))));let{errors:p,responses:c}=Ke(e),m,f=i.getName(o.api.getId({operation:e,type:"errors"}));if(f&&p&&p.properties){let h=Object.keys(p.properties);if(h.length){if(!h.includes("default"))r.import({asType:true,module:r.relativePathToFile({context:t.context,id:T}),name:f}),m=n.typeReferenceNode({typeName:f});else if(h.length>1){r.import({asType:true,module:r.relativePathToFile({context:t.context,id:T}),name:f});let S=n.typeReferenceNode({typeName:f}),C=n.literalTypeNode({literal:n.stringLiteral({text:"default"})});m=n.typeReferenceNode({typeArguments:[S,C],typeName:"Omit"});}}}let l,d=i.getName(o.api.getId({operation:e,type:"responses"}));if(d&&c&&c.properties){let h=Object.keys(c.properties);if(h.length){if(!h.includes("default"))r.import({asType:true,module:r.relativePathToFile({context:t.context,id:T}),name:d}),l=n.typeReferenceNode({typeName:d});else if(h.length>1){r.import({asType:true,module:r.relativePathToFile({context:t.context,id:T}),name:d});let S=n.typeReferenceNode({typeName:d}),C=n.literalTypeNode({literal:n.stringLiteral({text:"default"})});l=n.typeReferenceNode({typeArguments:[S,C],typeName:"Omit"});}}}let y=[m,l].filter(Boolean);return y.length&&s.push({name:"Reply",type:n.typeIntersectionNode({types:y})}),s.length?{name:e.id,type:n.typeNode("RouteHandler",[n.typeInterfaceNode({properties:s,useLegacyResolution:false})])}:void 0},uc=({plugin:e})=>{let t=e.createFile({id:dc,path:e.output}),r=[];e.forEach("operation",({operation:o})=>{let i=su({operation:o,plugin:e});i&&r.push(i);});let s=t.identifier({$ref:"RouteHandlers",create:true,namespace:"type"});s.name&&(r.length&&t.import({asType:true,module:"fastify",name:"RouteHandler"}),t.add(n.typeAliasDeclaration({exportType:true,name:s.name,type:n.typeInterfaceNode({properties:r,useLegacyResolution:false})})));};var Ss={config:{exportFromIndex:false},dependencies:["@hey-api/typescript"],handler:uc,name:"fastify",output:"fastify"};var x={actions:{args:n.identifier({text:"args"}),base64:n.identifier({text:"base64"}),bic:n.identifier({text:"bic"}),brand:n.identifier({text:"brand"}),bytes:n.identifier({text:"bytes"}),check:n.identifier({text:"check"}),checkItems:n.identifier({text:"checkItems"}),creditCard:n.identifier({text:"creditCard"}),cuid2:n.identifier({text:"cuid2"}),decimal:n.identifier({text:"decimal"}),description:n.identifier({text:"description"}),digits:n.identifier({text:"digits"}),email:n.identifier({text:"email"}),emoji:n.identifier({text:"emoji"}),empty:n.identifier({text:"empty"}),endsWith:n.identifier({text:"endsWith"}),entries:n.identifier({text:"entries"}),everyItem:n.identifier({text:"everyItem"}),excludes:n.identifier({text:"excludes"}),filterItems:n.identifier({text:"filterItems"}),findItem:n.identifier({text:"findItem"}),finite:n.identifier({text:"finite"}),flavor:n.identifier({text:"flavor"}),graphemes:n.identifier({text:"graphemes"}),gtValue:n.identifier({text:"gtValue"}),hash:n.identifier({text:"hash"}),hexColor:n.identifier({text:"hexColor"}),hexadecimal:n.identifier({text:"hexadecimal"}),imei:n.identifier({text:"imei"}),includes:n.identifier({text:"includes"}),integer:n.identifier({text:"integer"}),ip:n.identifier({text:"ip"}),ipv4:n.identifier({text:"ipv4"}),ipv6:n.identifier({text:"ipv6"}),isoDate:n.identifier({text:"isoDate"}),isoDateTime:n.identifier({text:"isoDateTime"}),isoTime:n.identifier({text:"isoTime"}),isoTimeSecond:n.identifier({text:"isoTimeSecond"}),isoTimestamp:n.identifier({text:"isoTimestamp"}),isoWeek:n.identifier({text:"isoWeek"}),length:n.identifier({text:"length"}),ltValue:n.identifier({text:"ltValue"}),mac:n.identifier({text:"mac"}),mac48:n.identifier({text:"mac48"}),mac64:n.identifier({text:"mac64"}),mapItems:n.identifier({text:"mapItems"}),maxBytes:n.identifier({text:"maxBytes"}),maxEntries:n.identifier({text:"maxEntries"}),maxGraphemes:n.identifier({text:"maxGraphemes"}),maxLength:n.identifier({text:"maxLength"}),maxSize:n.identifier({text:"maxSize"}),maxValue:n.identifier({text:"maxValue"}),maxWords:n.identifier({text:"maxWords"}),metadata:n.identifier({text:"metadata"}),mimeType:n.identifier({text:"mimeType"}),minBytes:n.identifier({text:"minBytes"}),minEntries:n.identifier({text:"minEntries"}),minGraphemes:n.identifier({text:"minGraphemes"}),minLength:n.identifier({text:"minLength"}),minSize:n.identifier({text:"minSize"}),minValue:n.identifier({text:"minValue"}),minWords:n.identifier({text:"minWords"}),multipleOf:n.identifier({text:"multipleOf"}),nanoid:n.identifier({text:"nanoid"}),nonEmpty:n.identifier({text:"nonEmpty"}),normalize:n.identifier({text:"normalize"}),notBytes:n.identifier({text:"notBytes"}),notEntries:n.identifier({text:"notEntries"}),notGraphemes:n.identifier({text:"notGraphemes"}),notLength:n.identifier({text:"notLength"}),notSize:n.identifier({text:"notSize"}),notValue:n.identifier({text:"notValue"}),notValues:n.identifier({text:"notValues"}),notWords:n.identifier({text:"notWords"}),octal:n.identifier({text:"octal"}),parseJson:n.identifier({text:"parseJson"}),partialCheck:n.identifier({text:"partialCheck"}),rawCheck:n.identifier({text:"rawCheck"}),rawTransform:n.identifier({text:"rawTransform"}),readonly:n.identifier({text:"readonly"}),reduceItems:n.identifier({text:"reduceItems"}),regex:n.identifier({text:"regex"}),returns:n.identifier({text:"returns"}),rfcEmail:n.identifier({text:"rfcEmail"}),safeInteger:n.identifier({text:"safeInteger"}),size:n.identifier({text:"size"}),slug:n.identifier({text:"slug"}),someItem:n.identifier({text:"someItem"}),sortItems:n.identifier({text:"sortItems"}),startsWith:n.identifier({text:"startsWith"}),stringifyJson:n.identifier({text:"stringifyJson"}),title:n.identifier({text:"title"}),toLowerCase:n.identifier({text:"toLowerCase"}),toMaxValue:n.identifier({text:"toMaxValue"}),toMinValue:n.identifier({text:"toMinValue"}),toUpperCase:n.identifier({text:"toUpperCase"}),transform:n.identifier({text:"transform"}),trim:n.identifier({text:"trim"}),trimEnd:n.identifier({text:"trimEnd"}),trimStart:n.identifier({text:"trimStart"}),ulid:n.identifier({text:"ulid"}),url:n.identifier({text:"url"}),uuid:n.identifier({text:"uuid"}),value:n.identifier({text:"value"}),values:n.identifier({text:"values"}),words:n.identifier({text:"words"})},async:{argsAsync:n.identifier({text:"argsAsync"}),arrayAsync:n.identifier({text:"arrayAsync"}),awaitAsync:n.identifier({text:"awaitAsync"}),checkAsync:n.identifier({text:"checkAsync"}),checkItemsAsync:n.identifier({text:"checkItemsAsync"}),customAsync:n.identifier({text:"customAsync"}),exactOptionalAsync:n.identifier({text:"exactOptionalAsync"}),fallbackAsync:n.identifier({text:"fallbackAsync"}),forwardAsync:n.identifier({text:"forwardAsync"}),getDefaultsAsync:n.identifier({text:"getDefaultsAsync"}),getFallbacksAsync:n.identifier({text:"getFallbacksAsync"}),intersectAsync:n.identifier({text:"intersectAsync"}),lazyAsync:n.identifier({text:"lazyAsync"}),looseObjectAsync:n.identifier({text:"looseObjectAsync"}),looseTupleAsync:n.identifier({text:"looseTupleAsync"}),mapAsync:n.identifier({text:"mapAsync"}),nonNullableAsync:n.identifier({text:"nonNullableAsync"}),nonNullishAsync:n.identifier({text:"nonNullishAsync"}),nonOptionalAsync:n.identifier({text:"nonOptionalAsync"}),nullableAsync:n.identifier({text:"nullableAsync"}),nullishAsync:n.identifier({text:"nullishAsync"}),objectAsync:n.identifier({text:"objectAsync"}),objectWithRestAsync:n.identifier({text:"objectWithRestAsync"}),optionalAsync:n.identifier({text:"optionalAsync"}),parseAsync:n.identifier({text:"parseAsync"}),parserAsync:n.identifier({text:"parserAsync"}),partialAsync:n.identifier({text:"partialAsync"}),partialCheckAsync:n.identifier({text:"partialCheckAsync"}),pipeAsync:n.identifier({text:"pipeAsync"}),rawCheckAsync:n.identifier({text:"rawCheckAsync"}),rawTransformAsync:n.identifier({text:"rawTransformAsync"}),recordAsync:n.identifier({text:"recordAsync"}),requiredAsync:n.identifier({text:"requiredAsync"}),returnsAsync:n.identifier({text:"returnsAsync"}),safeParseAsync:n.identifier({text:"safeParseAsync"}),safeParserAsync:n.identifier({text:"safeParserAsync"}),setAsync:n.identifier({text:"setAsync"}),strictObjectAsync:n.identifier({text:"strictObjectAsync"}),strictTupleAsync:n.identifier({text:"strictTupleAsync"}),transformAsync:n.identifier({text:"transformAsync"}),tupleAsync:n.identifier({text:"tupleAsync"}),tupleWithRestAsync:n.identifier({text:"tupleWithRestAsync"}),undefinedableAsync:n.identifier({text:"undefinedableAsync"}),unionAsync:n.identifier({text:"unionAsync"}),variantAsync:n.identifier({text:"variantAsync"})},methods:{assert:n.identifier({text:"assert"}),config:n.identifier({text:"config"}),fallback:n.identifier({text:"fallback"}),flatten:n.identifier({text:"flatten"}),forward:n.identifier({text:"forward"}),getDefault:n.identifier({text:"getDefault"}),getDefaults:n.identifier({text:"getDefaults"}),getDescription:n.identifier({text:"getDescription"}),getFallback:n.identifier({text:"getFallback"}),getFallbacks:n.identifier({text:"getFallbacks"}),getMetadata:n.identifier({text:"getMetadata"}),getTitle:n.identifier({text:"getTitle"}),is:n.identifier({text:"is"}),keyof:n.identifier({text:"keyof"}),message:n.identifier({text:"message"}),omit:n.identifier({text:"omit"}),parse:n.identifier({text:"parse"}),parser:n.identifier({text:"parser"}),partial:n.identifier({text:"partial"}),pick:n.identifier({text:"pick"}),pipe:n.identifier({text:"pipe"}),required:n.identifier({text:"required"}),safeParse:n.identifier({text:"safeParse"}),safeParser:n.identifier({text:"safeParser"}),summarize:n.identifier({text:"summarize"}),unwrap:n.identifier({text:"unwrap"})},schemas:{any:n.identifier({text:"any"}),array:n.identifier({text:"array"}),bigInt:n.identifier({text:"bigint"}),blob:n.identifier({text:"blob"}),boolean:n.identifier({text:"boolean"}),custom:n.identifier({text:"custom"}),date:n.identifier({text:"date"}),enum:n.identifier({text:"enum"}),exactOptional:n.identifier({text:"exactOptional"}),file:n.identifier({text:"file"}),function:n.identifier({text:"function"}),instance:n.identifier({text:"instance"}),intersect:n.identifier({text:"intersect"}),lazy:n.identifier({text:"lazy"}),literal:n.identifier({text:"literal"}),looseObject:n.identifier({text:"looseObject"}),looseTuple:n.identifier({text:"looseTuple"}),map:n.identifier({text:"map"}),nan:n.identifier({text:"nan"}),never:n.identifier({text:"never"}),nonNullable:n.identifier({text:"nonNullable"}),nonNullish:n.identifier({text:"nonNullish"}),nonOptional:n.identifier({text:"nonOptional"}),null:n.identifier({text:"null"}),nullable:n.identifier({text:"nullable"}),nullish:n.identifier({text:"nullish"}),number:n.identifier({text:"number"}),object:n.identifier({text:"object"}),objectWithRest:n.identifier({text:"objectWithRest"}),optional:n.identifier({text:"optional"}),picklist:n.identifier({text:"picklist"}),promise:n.identifier({text:"promise"}),record:n.identifier({text:"record"}),set:n.identifier({text:"set"}),strictObject:n.identifier({text:"strictObject"}),strictTuple:n.identifier({text:"strictTuple"}),string:n.identifier({text:"string"}),symbol:n.identifier({text:"symbol"}),tuple:n.identifier({text:"tuple"}),tupleWithRest:n.identifier({text:"tupleWithRest"}),undefined:n.identifier({text:"undefined"}),undefinedable:n.identifier({text:"undefinedable"}),union:n.identifier({text:"union"}),unknown:n.identifier({text:"unknown"}),variant:n.identifier({text:"variant"}),void:n.identifier({text:"void"})},types:{GenericSchema:n.identifier({text:"GenericSchema"})},v:n.identifier({text:"v"})},Ce="valibot";var iu=({file:e,operation:t,plugin:r})=>{let{requests:s}=r.config,o=r.context.file({id:Ce}).identifier({$ref:`#/valibot-response/${t.id}`,nameTransformer:typeof s=="object"?s.name:void 0,namespace:"value"});if(!o.name)return;e.import({module:e.relativePathToFile({context:r.context,id:Ce}),name:o.name}),e.import({alias:x.v.text,module:"valibot",name:"*"});let i="data";return n.arrowFunction({async:true,parameters:[{name:i}],statements:[n.returnStatement({expression:n.awaitExpression({expression:n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.async.parseAsync}),parameters:[n.identifier({text:o.name}),n.identifier({text:i})]})})})]})},au=({file:e,operation:t,plugin:r})=>{let{responses:s}=r.config,o=r.context.file({id:Ce}).identifier({$ref:`#/valibot-response/${t.id}`,nameTransformer:typeof s=="object"?s.name:void 0,namespace:"value"});if(!o.name)return;e.import({module:e.relativePathToFile({context:r.context,id:Ce}),name:o.name}),e.import({alias:x.v.text,module:"valibot",name:"*"});let i="data";return n.arrowFunction({async:true,parameters:[{name:i}],statements:[n.returnStatement({expression:n.awaitExpression({expression:n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.async.parseAsync}),parameters:[n.identifier({text:o.name}),n.identifier({text:i})]})})})]})},yc={createRequestValidator:iu,createResponseValidator:au};var Ts={int16:{max:32767,maxError:"Invalid value: Expected int16 to be <= 2^15-1",min:-32768,minError:"Invalid value: Expected int16 to be >= -2^15",needsBigInt:false},int32:{max:2147483647,maxError:"Invalid value: Expected int32 to be <= 2^31-1",min:-2147483648,minError:"Invalid value: Expected int32 to be >= -2^31",needsBigInt:false},int64:{max:"9223372036854775807",maxError:"Invalid value: Expected int64 to be <= 2^63-1",min:"-9223372036854775808",minError:"Invalid value: Expected int64 to be >= -2^63",needsBigInt:true},int8:{max:127,maxError:"Invalid value: Expected int8 to be <= 2^7-1",min:-128,minError:"Invalid value: Expected int8 to be >= -2^7",needsBigInt:false},uint16:{max:65535,maxError:"Invalid value: Expected uint16 to be <= 2^16-1",min:0,minError:"Invalid value: Expected uint16 to be >= 0",needsBigInt:false},uint32:{max:4294967295,maxError:"Invalid value: Expected uint32 to be <= 2^32-1",min:0,minError:"Invalid value: Expected uint32 to be >= 0",needsBigInt:false},uint64:{max:"18446744073709551615",maxError:"Invalid value: Expected uint64 to be <= 2^64-1",min:"0",minError:"Invalid value: Expected uint64 to be >= 0",needsBigInt:true},uint8:{max:255,maxError:"Invalid value: Expected uint8 to be <= 2^8-1",min:0,minError:"Invalid value: Expected uint8 to be >= 0",needsBigInt:false}},Io=e=>e!==void 0&&e in Ts,gc=e=>Io(e)&&Ts[e].needsBigInt,Ar=({isBigInt:e,value:t})=>{let r=n.valueToExpression({value:t});return e&&(typeof t=="bigint"||typeof t=="number"||typeof t=="string"||typeof t=="boolean")?n.callExpression({functionName:"BigInt",parameters:[r]}):r};var hc=({operation:e,plugin:t,state:r})=>{let s=t.context.file({id:Ce});if(t.config.requests.enabled){let o=new Set,i={properties:{body:{type:"never"},path:{type:"never"},query:{type:"never"}},type:"object"};if(e.parameters){if(e.parameters.header){let p={},c=[];for(let m in e.parameters.header){let f=e.parameters.header[m];p[f.name]=f.schema,f.required&&(c.push(f.name),o.add("headers"));}Object.keys(p).length&&(i.properties.headers={properties:p,required:c,type:"object"});}if(e.parameters.path){let p={},c=[];for(let m in e.parameters.path){let f=e.parameters.path[m];p[f.name]=f.schema,f.required&&(c.push(f.name),o.add("path"));}Object.keys(p).length&&(i.properties.path={properties:p,required:c,type:"object"});}if(e.parameters.query){let p={},c=[];for(let m in e.parameters.query){let f=e.parameters.query[m];p[f.name]=f.schema,f.required&&(c.push(f.name),o.add("query"));}Object.keys(p).length&&(i.properties.query={properties:p,required:c,type:"object"});}}e.body&&(i.properties.body=e.body.schema,e.body.required&&o.add("body")),i.required=[...o];let a=s.identifier({$ref:`#/valibot-data/${e.id}`,case:t.config.requests.case,create:true,nameTransformer:t.config.requests.name,namespace:"value"});fe({$ref:`#/valibot-data/${e.id}`,identifier:a,plugin:t,schema:i,state:r});}if(t.config.responses.enabled&&e.responses){let{response:o}=Ke(e);if(o){let i=s.identifier({$ref:`#/valibot-response/${e.id}`,case:t.config.responses.case,create:true,nameTransformer:t.config.responses.name,namespace:"value"});fe({$ref:`#/valibot-response/${e.id}`,identifier:i,plugin:t,schema:o,state:r});}}};var xc=({operation:e,plugin:t,state:r})=>{let s=t.context.file({id:Ce});if(t.config.webhooks.enabled){let o=new Set,i={properties:{body:{type:"never"},path:{type:"never"},query:{type:"never"}},type:"object"};if(e.parameters){if(e.parameters.header){let p={},c=[];for(let m in e.parameters.header){let f=e.parameters.header[m];p[f.name]=f.schema,f.required&&(c.push(f.name),o.add("headers"));}Object.keys(p).length&&(i.properties.headers={properties:p,required:c,type:"object"});}if(e.parameters.path){let p={},c=[];for(let m in e.parameters.path){let f=e.parameters.path[m];p[f.name]=f.schema,f.required&&(c.push(f.name),o.add("path"));}Object.keys(p).length&&(i.properties.path={properties:p,required:c,type:"object"});}if(e.parameters.query){let p={},c=[];for(let m in e.parameters.query){let f=e.parameters.query[m];p[f.name]=f.schema,f.required&&(c.push(f.name),o.add("query"));}Object.keys(p).length&&(i.properties.query={properties:p,required:c,type:"object"});}}e.body&&(i.properties.body=e.body.schema,e.body.required&&o.add("body")),i.required=[...o];let a=s.identifier({$ref:`#/valibot-webhook/${e.id}`,case:t.config.webhooks.case,create:true,nameTransformer:t.config.webhooks.name,namespace:"value"});fe({$ref:`#/valibot-webhook/${e.id}`,identifier:a,plugin:t,schema:i,state:r});}};var $e=e=>e.length===1?e[0]:n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.methods.pipe}),parameters:e}),pu=({plugin:e,schema:t,state:r})=>{let s=n.propertyAccessExpression({expression:x.v,name:x.schemas.array}),o=[];if(t.items){t=Q({schema:t});let i=t.items.map(a=>{let p=fe({plugin:e,schema:a,state:r});return $e(p)});if(i.length===1){let a=n.callExpression({functionName:s,parameters:i});o.push(a);}else {t.logicalOperator;let a=n.callExpression({functionName:s,parameters:[en()]});o.push(a);}}else {let i=n.callExpression({functionName:s,parameters:[en()]});o.push(i);}if(t.minItems===t.maxItems&&t.minItems!==void 0){let i=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.actions.length}),parameters:[n.valueToExpression({value:t.minItems})]});o.push(i);}else {if(t.minItems!==void 0){let i=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.actions.minLength}),parameters:[n.valueToExpression({value:t.minItems})]});o.push(i);}if(t.maxItems!==void 0){let i=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.actions.maxLength}),parameters:[n.valueToExpression({value:t.maxItems})]});o.push(i);}}return $e(o)},cu=({schema:e})=>typeof e.const=="boolean"?n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.literal}),parameters:[n.ots.boolean(e.const)]}):n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.boolean})}),mu=({schema:e})=>{let t=[],r=false;for(let o of e.items??[])o.type==="string"&&typeof o.const=="string"?t.push(n.stringLiteral({text:o.const})):(o.type==="null"||o.const===null)&&(r=true);if(!t.length)return en();let s=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.picklist}),parameters:[n.arrayLiteralExpression({elements:t,multiLine:false})]});return r&&(s=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.nullable}),parameters:[s]})),s},fu=e=>n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.never})}),lu=e=>n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.null})}),bc=({schema:e})=>{let t=e.format,r=e.type==="integer",s=gc(t),o=Io(t)?Ts[t]:null;if(e.const!==void 0&&e.const!==null){let a=e.const,p;if(typeof a=="number"&&!t)p=n.ots.number(a);else if(typeof a=="number"&&t)s?p=n.callExpression({functionName:"BigInt",parameters:[n.ots.string(a.toString())]}):p=n.ots.number(a);else if(typeof a=="string"&&s){let c=a.endsWith("n")?a.slice(0,-1):a;p=n.callExpression({functionName:"BigInt",parameters:[n.ots.string(c)]});}else if(typeof a=="bigint"){let c=a.toString(),m=c.endsWith("n")?c.slice(0,-1):c;p=n.callExpression({functionName:"BigInt",parameters:[n.ots.string(m)]});}else p=n.valueToExpression({value:a});return n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.literal}),parameters:[p]})}let i=[];if(s){let a=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.union}),parameters:[n.arrayLiteralExpression({elements:[n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.number})}),n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.string})}),n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.bigInt})})],multiLine:false})]});i.push(a);let p=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.actions.transform}),parameters:[n.arrowFunction({parameters:[{name:"x"}],statements:n.callExpression({functionName:"BigInt",parameters:[n.identifier({text:"x"})]})})]});i.push(p);}else {let a=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.number})});i.push(a);}if(!s&&r){let a=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.actions.integer})});i.push(a);}if(o){let a=o.min,p=o.max,c=o.minError,m=o.maxError,f=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.actions.minValue}),parameters:[s?n.callExpression({functionName:"BigInt",parameters:[n.ots.string(a.toString())]}):n.ots.number(a),n.ots.string(c)]});i.push(f);let l=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.actions.maxValue}),parameters:[s?n.callExpression({functionName:"BigInt",parameters:[n.ots.string(p.toString())]}):n.ots.number(p),n.ots.string(m)]});i.push(l);}if(e.exclusiveMinimum!==void 0){let a=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.actions.gtValue}),parameters:[Ar({isBigInt:s,value:e.exclusiveMinimum})]});i.push(a);}else if(e.minimum!==void 0){let a=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.actions.minValue}),parameters:[Ar({isBigInt:s,value:e.minimum})]});i.push(a);}if(e.exclusiveMaximum!==void 0){let a=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.actions.ltValue}),parameters:[Ar({isBigInt:s,value:e.exclusiveMaximum})]});i.push(a);}else if(e.maximum!==void 0){let a=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.actions.maxValue}),parameters:[Ar({isBigInt:s,value:e.maximum})]});i.push(a);}return $e(i)},du=({plugin:e,schema:t,state:r})=>{let s=[],o=t.required??[];for(let a in t.properties){let p=t.properties[a],c=o.includes(a),m=fe({optional:!c,plugin:e,schema:p,state:r});ne.lastIndex=0;let f;ne.test(a)?f=a.startsWith("-")?O__default.default.factory.createStringLiteral(a):O__default.default.factory.createNumericLiteral(a):f=a,(a.match(/^[0-9]/)&&a.match(/\D+/g)||a.match(/\W/g))&&!a.startsWith("'")&&!a.endsWith("'")&&(f=`'${a}'`),s.push(n.propertyAssignment({initializer:$e(m),name:f}));}if(t.additionalProperties&&t.additionalProperties.type==="object"&&!Object.keys(s).length){let a=fe({plugin:e,schema:t.additionalProperties,state:r});return {anyType:"AnyZodObject",expression:n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.record}),parameters:[n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.string}),parameters:[]}),$e(a)]})}}let i=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.object}),parameters:[O__default.default.factory.createObjectLiteralExpression(s,true)]});return {anyType:x.types.GenericSchema.text,expression:i}},uu=({schema:e})=>{if(typeof e.const=="string")return n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.literal}),parameters:[n.ots.string(e.const)]});let t=[],r=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.string})});if(t.push(r),e.format)switch(e.format){case "date":t.push(n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.actions.isoDate})}));break;case "date-time":t.push(n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.actions.isoTimestamp})}));break;case "ipv4":case "ipv6":t.push(n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.actions.ip})}));break;case "uri":t.push(n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.actions.url})}));break;case "email":case "time":case "uuid":t.push(n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:n.identifier({text:e.format})})}));break}if(e.minLength===e.maxLength&&e.minLength!==void 0){let s=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.actions.length}),parameters:[n.valueToExpression({value:e.minLength})]});t.push(s);}else {if(e.minLength!==void 0){let s=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.actions.minLength}),parameters:[n.valueToExpression({value:e.minLength})]});t.push(s);}if(e.maxLength!==void 0){let s=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.actions.maxLength}),parameters:[n.valueToExpression({value:e.maxLength})]});t.push(s);}}if(e.pattern){let s=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.actions.regex}),parameters:[n.regularExpressionLiteral({text:e.pattern})]});t.push(s);}return $e(t)},yu=({plugin:e,schema:t,state:r})=>{if(t.const&&Array.isArray(t.const)){let s=t.const.map(i=>n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.literal}),parameters:[n.valueToExpression({value:i})]}));return n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.tuple}),parameters:[n.arrayLiteralExpression({elements:s})]})}if(t.items){let s=t.items.map(i=>{let a=fe({plugin:e,schema:i,state:r});return $e(a)});return n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.tuple}),parameters:[n.arrayLiteralExpression({elements:s})]})}return en()},gu=e=>n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.undefined})}),en=e=>n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.unknown})}),hu=e=>n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.void})}),Oc=({plugin:e,schema:t,state:r})=>{switch(t.type){case "array":return {expression:pu({plugin:e,schema:t,state:r})};case "boolean":return {expression:cu({schema:t})};case "enum":return {expression:mu({schema:t})};case "integer":case "number":return {expression:bc({schema:t})};case "never":return {expression:fu()};case "null":return {expression:lu()};case "object":return du({plugin:e,schema:t,state:r});case "string":return t.format==="int64"||t.format==="uint64"?{expression:bc({schema:t})}:{expression:uu({schema:t})};case "tuple":return {expression:yu({plugin:e,schema:t,state:r})};case "undefined":return {expression:gu()};case "unknown":return {expression:en()};case "void":return {expression:hu()}}},fe=({$ref:e,identifier:t,optional:r,plugin:s,schema:o,state:i})=>{let a=s.context.file({id:Ce}),p,c=t,m=[];if(e&&(i.circularReferenceTracker.add(e),c||(c=a.identifier({$ref:e,case:i.nameCase,create:true,nameTransformer:i.nameTransformer,namespace:"value"}))),o.$ref){let f=i.circularReferenceTracker.has(o.$ref),l=a.identifier({$ref:o.$ref,case:i.nameCase,nameTransformer:i.nameTransformer,namespace:"value"});if(!l.name){let d=s.context.resolveIrRef(o.$ref),y=fe({$ref:o.$ref,plugin:s,schema:d,state:i});m.push(...y),l=a.identifier({$ref:o.$ref,case:i.nameCase,nameTransformer:i.nameTransformer,namespace:"value"});}if(l.name){let d=n.identifier({text:l.name});if(f){let y=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.lazy}),parameters:[n.arrowFunction({statements:[n.returnStatement({expression:d})]})]});m.push(y),i.hasCircularReference=true;}else m.push(d);}}else if(o.type){let f=Oc({plugin:s,schema:o,state:i});if(p=f.anyType,m.push(f.expression),s.config.metadata&&o.description){let l=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.actions.metadata}),parameters:[n.objectExpression({obj:[{key:"description",value:n.stringLiteral({text:o.description})}]})]});m.push(l);}}else if(o.items)if(o=Q({schema:o}),o.items){let f=o.items.map(l=>{let d=fe({plugin:s,schema:l,state:i});return $e(d)});if(o.logicalOperator==="and"){let l=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.intersect}),parameters:[n.arrayLiteralExpression({elements:f})]});m.push(l);}else {let l=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.union}),parameters:[n.arrayLiteralExpression({elements:f})]});m.push(l);}}else {let f=fe({plugin:s,schema:o,state:i});m.push(...f);}else {let f=Oc({plugin:s,schema:{type:"unknown"},state:i});p=f.anyType,m.push(f.expression);}if(e&&i.circularReferenceTracker.delete(e),m.length&&o.accessScope==="read"){let f=n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.actions.readonly})});m.push(f);}if(m.length){let f;if(o.default!==void 0){let l=o.type==="integer"&&o.format==="int64";f=Ar({isBigInt:l,value:o.default}),f&&(m=[n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.optional}),parameters:[$e(m),f]})]);}r&&!f&&(m=[n.callExpression({functionName:n.propertyAccessExpression({expression:x.v,name:x.schemas.optional}),parameters:[$e(m)]})]);}if(c&&c.name&&c.created){let f=n.constVariable({comment:s.config.comments?Te({schema:o}):void 0,exportConst:true,expression:$e(m),name:c.name,typeName:i.hasCircularReference?n.propertyAccessExpression({expression:x.v,name:p||x.types.GenericSchema.text}):void 0});return a.add(f),[]}return m},Sc=({plugin:e})=>{e.createFile({case:e.config.case,id:Ce,path:e.output}).import({alias:x.v.text,module:"valibot",name:"*"}),e.forEach("operation","parameter","requestBody","schema","webhook",r=>{let s={circularReferenceTracker:new Set,hasCircularReference:false,nameCase:e.config.definitions.case,nameTransformer:e.config.definitions.name};r.type==="operation"?hc({operation:r.operation,plugin:e,state:s}):r.type==="parameter"?fe({$ref:r.$ref,plugin:e,schema:r.parameter.schema,state:s}):r.type==="requestBody"?fe({$ref:r.$ref,plugin:e,schema:r.requestBody.schema,state:s}):r.type==="schema"?fe({$ref:r.$ref,plugin:e,schema:r.schema,state:s}):r.type==="webhook"&&xc({operation:r.operation,plugin:e,state:s});});};var Rs={api:yc,config:{case:"camelCase",comments:true,exportFromIndex:false,metadata:false},handler:Sc,name:"valibot",output:"valibot",resolveConfig:(e,t)=>{e.config.definitions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"v{{name}}"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.definitions}),e.config.requests=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"v{{name}}Data"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.requests}),e.config.responses=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"v{{name}}Response"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.responses}),e.config.webhooks=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"v{{name}}WebhookRequest"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.webhooks});},tags:["validator"]};var u={ZodMiniOptional:n.identifier({text:"ZodMiniOptional"}),ZodOptional:n.identifier({text:"ZodOptional"}),_default:n.identifier({text:"_default"}),and:n.identifier({text:"and"}),array:n.identifier({text:"array"}),bigint:n.identifier({text:"bigint"}),boolean:n.identifier({text:"boolean"}),check:n.identifier({text:"check"}),coerce:n.identifier({text:"coerce"}),date:n.identifier({text:"date"}),datetime:n.identifier({text:"datetime"}),default:n.identifier({text:"default"}),describe:n.identifier({text:"describe"}),email:n.identifier({text:"email"}),enum:n.identifier({text:"enum"}),globalRegistry:n.identifier({text:"globalRegistry"}),gt:n.identifier({text:"gt"}),gte:n.identifier({text:"gte"}),infer:n.identifier({text:"infer"}),int:n.identifier({text:"int"}),intersection:n.identifier({text:"intersection"}),ip:n.identifier({text:"ip"}),ipv4:n.identifier({text:"ipv4"}),ipv6:n.identifier({text:"ipv6"}),iso:n.identifier({text:"iso"}),lazy:n.identifier({text:"lazy"}),length:n.identifier({text:"length"}),literal:n.identifier({text:"literal"}),lt:n.identifier({text:"lt"}),lte:n.identifier({text:"lte"}),max:n.identifier({text:"max"}),maxLength:n.identifier({text:"maxLength"}),min:n.identifier({text:"min"}),minLength:n.identifier({text:"minLength"}),never:n.identifier({text:"never"}),null:n.identifier({text:"null"}),nullable:n.identifier({text:"nullable"}),number:n.identifier({text:"number"}),object:n.identifier({text:"object"}),optional:n.identifier({text:"optional"}),parseAsync:n.identifier({text:"parseAsync"}),readonly:n.identifier({text:"readonly"}),record:n.identifier({text:"record"}),regex:n.identifier({text:"regex"}),register:n.identifier({text:"register"}),string:n.identifier({text:"string"}),time:n.identifier({text:"time"}),tuple:n.identifier({text:"tuple"}),undefined:n.identifier({text:"undefined"}),union:n.identifier({text:"union"}),unknown:n.identifier({text:"unknown"}),url:n.identifier({text:"url"}),uuid:n.identifier({text:"uuid"}),void:n.identifier({text:"void"}),z:n.identifier({text:"z"})},_="zod";var bu=({file:e,operation:t,plugin:r})=>{let o=r.context.file({id:_}).getName(r.api.getId({operation:t,type:"data"}));if(!o)return;e.import({module:e.relativePathToFile({context:r.context,id:_}),name:o});let i="data";return n.arrowFunction({async:true,parameters:[{name:i}],statements:[n.returnStatement({expression:n.awaitExpression({expression:n.callExpression({functionName:n.propertyAccessExpression({expression:n.identifier({text:o}),name:u.parseAsync}),parameters:[n.identifier({text:i})]})})})]})},Ou=({file:e,operation:t,plugin:r})=>{let o=r.context.file({id:_}).getName(r.api.getId({operation:t,type:"responses"}));if(!o)return;e.import({module:e.relativePathToFile({context:r.context,id:_}),name:o});let i="data";return n.arrowFunction({async:true,parameters:[{name:i}],statements:[n.returnStatement({expression:n.awaitExpression({expression:n.callExpression({functionName:n.propertyAccessExpression({expression:n.identifier({text:o}),name:u.parseAsync}),parameters:[n.identifier({text:i})]})})})]})},Su=e=>{switch(e.type){case "data":case "responses":case "type-infer-data":case "type-infer-responses":case "type-infer-webhook-request":case "webhook-request":return `${e.operation.id}-${e.type}`;case "ref":case "type-infer-ref":default:return `${e.type}-${e.value}`}},Tc={createRequestValidator:bu,createResponseValidator:Ou,getId:Su};var Fe=({plugin:e,schema:t,schemaId:r,typeInferId:s,zodSchema:o})=>{let i=e.context.file({id:_}),a=i.addNodeReference(r,{factory:c=>n.typeReferenceNode({typeName:c})}),p=n.constVariable({comment:e.config.comments?Te({schema:t}):void 0,exportConst:true,expression:o.expression,name:a,typeName:o.typeName?n.propertyAccessExpression({expression:u.z,name:o.typeName}):void 0});if(i.add(p),s){let c=i.addNodeReference(s,{factory:l=>n.typeReferenceNode({typeName:l})}),m=i.addNodeReference(r,{factory:l=>n.identifier({text:l})}),f=n.typeAliasDeclaration({exportType:true,name:c,type:n.typeReferenceNode({typeArguments:[n.typeOfExpression({text:m})],typeName:n.propertyAccessExpression({expression:u.z,name:u.infer})})});i.add(f);}};var Er=({plugin:e})=>{let t=e.package.getVersion("zod");if(t&&e.package.satisfies(t,"<4.0.0"))switch(e.config.compatibilityVersion){case 3:default:return "zod";case 4:return "zod/v4";case "mini":return "zod/v4-mini"}switch(e.config.compatibilityVersion){case 3:return "zod/v3";case 4:default:return "zod";case "mini":return "zod/mini"}};var Nr=({getZodSchema:e,operation:t,plugin:r})=>{let s=r.context.file({id:_});if(r.config.requests.enabled){let o=new Set,i={properties:{body:{type:"never"},path:{type:"never"},query:{type:"never"}},type:"object"};if(t.parameters){if(t.parameters.header){let m={},f=[];for(let l in t.parameters.header){let d=t.parameters.header[l];m[d.name]=d.schema,d.required&&(f.push(d.name),o.add("headers"));}Object.keys(m).length&&(i.properties.headers={properties:m,required:f,type:"object"});}if(t.parameters.path){let m={},f=[];for(let l in t.parameters.path){let d=t.parameters.path[l];m[d.name]=d.schema,d.required&&(f.push(d.name),o.add("path"));}Object.keys(m).length&&(i.properties.path={properties:m,required:f,type:"object"});}if(t.parameters.query){let m={},f=[];for(let l in t.parameters.query){let d=t.parameters.query[l];m[d.name]=d.schema,d.required&&(f.push(d.name),o.add("query"));}Object.keys(m).length&&(i.properties.query={properties:m,required:f,type:"object"});}}t.body&&(i.properties.body=t.body.schema,t.body.required&&o.add("body")),i.required=[...o];let a=e(i),p=r.api.getId({operation:t,type:"data"}),c=r.config.requests.types.infer.enabled?r.api.getId({operation:t,type:"type-infer-data"}):void 0;Fe({plugin:r,schema:i,schemaId:p,typeInferId:c,zodSchema:a}),s.updateNodeReferences(p,P({config:r.config.requests,name:t.id})),c&&s.updateNodeReferences(c,P({config:r.config.requests.types.infer,name:t.id}));}if(r.config.responses.enabled&&t.responses){let{response:o}=Ke(t);if(o){let i=e(o),a=r.api.getId({operation:t,type:"responses"}),p=r.config.responses.types.infer.enabled?r.api.getId({operation:t,type:"type-infer-responses"}):void 0;Fe({plugin:r,schema:o,schemaId:a,typeInferId:p,zodSchema:i}),s.updateNodeReferences(a,P({config:r.config.responses,name:t.id})),p&&s.updateNodeReferences(p,P({config:r.config.responses.types.infer,name:t.id}));}}};var jr=({getZodSchema:e,operation:t,plugin:r})=>{let s=r.context.file({id:_});if(r.config.webhooks.enabled){let o=new Set,i={properties:{body:{type:"never"},path:{type:"never"},query:{type:"never"}},type:"object"};if(t.parameters){if(t.parameters.header){let m={},f=[];for(let l in t.parameters.header){let d=t.parameters.header[l];m[d.name]=d.schema,d.required&&(f.push(d.name),o.add("headers"));}Object.keys(m).length&&(i.properties.headers={properties:m,required:f,type:"object"});}if(t.parameters.path){let m={},f=[];for(let l in t.parameters.path){let d=t.parameters.path[l];m[d.name]=d.schema,d.required&&(f.push(d.name),o.add("path"));}Object.keys(m).length&&(i.properties.path={properties:m,required:f,type:"object"});}if(t.parameters.query){let m={},f=[];for(let l in t.parameters.query){let d=t.parameters.query[l];m[d.name]=d.schema,d.required&&(f.push(d.name),o.add("query"));}Object.keys(m).length&&(i.properties.query={properties:m,required:f,type:"object"});}}t.body&&(i.properties.body=t.body.schema,t.body.required&&o.add("body")),i.required=[...o];let a=e(i),p=r.api.getId({operation:t,type:"webhook-request"}),c=r.config.webhooks.types.infer.enabled?r.api.getId({operation:t,type:"type-infer-webhook-request"}):void 0;Fe({plugin:r,schema:i,schemaId:p,typeInferId:c,zodSchema:a}),s.updateNodeReferences(p,P({config:r.config.webhooks,name:t.id})),c&&s.updateNodeReferences(c,P({config:r.config.webhooks.types.infer,name:t.id}));}};var Tu=({plugin:e,schema:t,state:r})=>{let s={},o=n.propertyAccessExpression({expression:u.z,name:u.array});if(!t.items)s.expression=n.callExpression({functionName:o,parameters:[Eo().expression]});else {t=Q({schema:t});let a=t.items.map(p=>{let c=gt({plugin:e,schema:p,state:r});return c.hasCircularReference&&(s.hasCircularReference=true),c.expression});a.length===1?s.expression=n.callExpression({functionName:o,parameters:a}):(t.logicalOperator,s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.array}),parameters:[n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.union}),parameters:[n.arrayLiteralExpression({elements:a})]})]}));}let i=[];return t.minItems===t.maxItems&&t.minItems!==void 0?i.push(n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.length}),parameters:[n.valueToExpression({value:t.minItems})]})):(t.minItems!==void 0&&i.push(n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.minLength}),parameters:[n.valueToExpression({value:t.minItems})]})),t.maxItems!==void 0&&i.push(n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.maxLength}),parameters:[n.valueToExpression({value:t.maxItems})]}))),i.length&&(s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:s.expression,name:u.check}),parameters:i})),s},Ru=({schema:e})=>{let t={};return typeof e.const=="boolean"?(t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.literal}),parameters:[n.ots.boolean(e.const)]}),t):(t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.boolean})}),t)},Iu=({schema:e})=>{let t={},r=[],s=false;for(let o of e.items??[])o.type==="string"&&typeof o.const=="string"?r.push(n.stringLiteral({text:o.const})):(o.type==="null"||o.const===null)&&(s=true);return r.length?(t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.enum}),parameters:[n.arrayLiteralExpression({elements:r,multiLine:false})]}),s&&(t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.nullable}),parameters:[t.expression]})),t):Eo()},Pu=e=>{let t={};return t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.never})}),t},Au=e=>{let t={};return t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.null})}),t},tn=({isBigInt:e,value:t})=>{let r=n.valueToExpression({value:t});return e&&(typeof t=="bigint"||typeof t=="number"||typeof t=="string"||typeof t=="boolean")?n.callExpression({functionName:"BigInt",parameters:[r]}):r},Eu=({schema:e})=>{let t={},r=e.type==="integer"&&e.format==="int64";if(typeof e.const=="number")return t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.literal}),parameters:[n.ots.number(e.const)]}),t;t.expression=n.callExpression({functionName:r?n.propertyAccessExpression({expression:n.propertyAccessExpression({expression:u.z,name:u.coerce}),name:u.bigint}):n.propertyAccessExpression({expression:u.z,name:u.number})}),!r&&e.type==="integer"&&(t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.int})}));let s=[];return e.exclusiveMinimum!==void 0?s.push(n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.gt}),parameters:[tn({isBigInt:r,value:e.exclusiveMinimum})]})):e.minimum!==void 0&&s.push(n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.gte}),parameters:[tn({isBigInt:r,value:e.minimum})]})),e.exclusiveMaximum!==void 0?s.push(n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.lt}),parameters:[tn({isBigInt:r,value:e.exclusiveMaximum})]})):e.maximum!==void 0&&s.push(n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.lte}),parameters:[tn({isBigInt:r,value:e.maximum})]})),s.length&&(t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:t.expression,name:u.check}),parameters:s})),t},Nu=({plugin:e,schema:t,state:r})=>{let s={},o=[],i=t.required??[];for(let a in t.properties){let p=t.properties[a],c=i.includes(a),m=gt({optional:!c,plugin:e,schema:p,state:r});m.hasCircularReference&&(s.hasCircularReference=true),ne.lastIndex=0;let f;ne.test(a)?f=a.startsWith("-")?O__default.default.factory.createStringLiteral(a):O__default.default.factory.createNumericLiteral(a):f=a,(a.match(/^[0-9]/)&&a.match(/\D+/g)||a.match(/\W/g))&&!a.startsWith("'")&&!a.endsWith("'")&&(f=`'${a}'`),m.hasCircularReference?o.push(n.getAccessorDeclaration({name:f,returnType:m.typeName?n.propertyAccessExpression({expression:u.z,name:m.typeName}):void 0,statements:[n.returnStatement({expression:m.expression})]})):o.push(n.propertyAssignment({initializer:m.expression,name:f}));}if(t.additionalProperties&&(!t.properties||!Object.keys(t.properties).length)){let a=gt({plugin:e,schema:t.additionalProperties,state:r});return s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.record}),parameters:[n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.string}),parameters:[]}),a.expression]}),a.hasCircularReference&&(s.hasCircularReference=true),s}return s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.object}),parameters:[O__default.default.factory.createObjectLiteralExpression(o,true)]}),s},ju=({plugin:e,schema:t})=>{let r={};if(typeof t.const=="string")return r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.literal}),parameters:[n.ots.string(t.const)]}),r;r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.string})});let s=[];if(e.config.dates.offset&&s.push({key:"offset",value:true}),e.config.dates.local&&s.push({key:"local",value:true}),t.format)switch(t.format){case "date":r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:n.propertyAccessExpression({expression:u.z,name:u.iso}),name:u.date})});break;case "date-time":r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:n.propertyAccessExpression({expression:u.z,name:u.iso}),name:u.datetime}),parameters:s.length>0?[n.objectExpression({obj:s})]:[]});break;case "email":r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.email})});break;case "ipv4":r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.ipv4})});break;case "ipv6":r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.ipv6})});break;case "time":r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:n.propertyAccessExpression({expression:u.z,name:u.iso}),name:u.time})});break;case "uri":r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.url})});break;case "uuid":r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.uuid})});break}let o=[];return t.minLength===t.maxLength&&t.minLength!==void 0?o.push(n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.length}),parameters:[n.valueToExpression({value:t.minLength})]})):(t.minLength!==void 0&&o.push(n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.minLength}),parameters:[n.valueToExpression({value:t.minLength})]})),t.maxLength!==void 0&&o.push(n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.maxLength}),parameters:[n.valueToExpression({value:t.maxLength})]}))),t.pattern&&o.push(n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.regex}),parameters:[n.regularExpressionLiteral({text:t.pattern})]})),o.length&&(r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.expression,name:u.check}),parameters:o})),r},ku=({plugin:e,schema:t,state:r})=>{let s={};if(t.const&&Array.isArray(t.const)){let i=t.const.map(a=>n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.literal}),parameters:[n.valueToExpression({value:a})]}));return s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.tuple}),parameters:[n.arrayLiteralExpression({elements:i})]}),s}let o=[];for(let i of t.items??[]){let a=gt({plugin:e,schema:i,state:r});o.push(a.expression),a.hasCircularReference&&(s.hasCircularReference=true);}return s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.tuple}),parameters:[n.arrayLiteralExpression({elements:o})]}),s},Cu=e=>{let t={};return t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.undefined})}),t},Eo=e=>{let t={};return t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.unknown})}),t},vu=e=>{let t={};return t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.void})}),t},Rc=({plugin:e,schema:t,state:r})=>{switch(t.type){case "array":return Tu({plugin:e,schema:t,state:r});case "boolean":return Ru({schema:t});case "enum":return Iu({schema:t});case "integer":case "number":return Eu({schema:t});case "never":return Pu();case "null":return Au();case "object":return Nu({plugin:e,schema:t,state:r});case "string":return ju({plugin:e,schema:t});case "tuple":return ku({plugin:e,schema:t,state:r});case "undefined":return Cu();case "unknown":return Eo();case "void":return vu()}},gt=({optional:e,plugin:t,schema:r,state:s})=>{let o=t.context.file({id:_}),i={};if(r.$ref){let a=s.circularReferenceTracker.includes(r.$ref),p=s.currentReferenceTracker.includes(r.$ref);s.circularReferenceTracker.push(r.$ref),s.currentReferenceTracker.push(r.$ref);let c=t.api.getId({type:"ref",value:r.$ref});if(a){let m=o.addNodeReference(c,{factory:f=>n.identifier({text:f})});p?i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.lazy}),parameters:[n.arrowFunction({returnType:n.keywordTypeNode({keyword:"any"}),statements:[n.returnStatement({expression:m})]})]}):i.expression=m,i.hasCircularReference=true;}else if(!o.getName(c)){let m=t.context.resolveIrRef(r.$ref);Is({id:r.$ref,plugin:t,schema:m,state:s});}if(!a){let m=o.addNodeReference(c,{factory:f=>n.identifier({text:f})});i.expression=m;}s.circularReferenceTracker.pop(),s.currentReferenceTracker.pop();}else if(r.type){let a=Rc({plugin:t,schema:r,state:s});i.expression=a.expression,i.hasCircularReference=a.hasCircularReference,t.config.metadata&&r.description&&(i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:i.expression,name:u.register}),parameters:[n.propertyAccessExpression({expression:u.z,name:u.globalRegistry}),n.objectExpression({obj:[{key:"description",value:n.stringLiteral({text:r.description})}]})]}));}else if(r.items)if(r=Q({schema:r}),r.items){let a=r.items.map(p=>gt({plugin:t,schema:p,state:s}).expression);if(r.logicalOperator==="and"){let p=r.items[0];p.logicalOperator==="or"||p.type&&p.type!=="object"?i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.intersection}),parameters:a}):(i.expression=a[0],a.slice(1).forEach(c=>{i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.intersection}),parameters:[i.expression,c]});}));}else i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.union}),parameters:[n.arrayLiteralExpression({elements:a})]});}else i=gt({plugin:t,schema:r,state:s});else {let a=Rc({plugin:t,schema:{type:"unknown"},state:s});i.expression=a.expression;}if(i.expression&&(r.accessScope==="read"&&(i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.readonly}),parameters:[i.expression]})),e&&(i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.optional}),parameters:[i.expression]}),i.typeName=u.ZodMiniOptional),r.default!==void 0)){let a=r.type==="integer"&&r.format==="int64",p=tn({isBigInt:a,value:r.default});p&&(i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u._default}),parameters:[i.expression,p]}));}return i},Is=({id:e,plugin:t,schema:r,state:s})=>{let o={circularReferenceTracker:[e],hasCircularReference:false,...s,currentReferenceTracker:[e]},i=t.context.file({id:_}),a=t.api.getId({type:"ref",value:e});if(i.getName(a))return;let p=gt({plugin:t,schema:r,state:o}),c=t.config.definitions.types.infer.enabled?t.api.getId({type:"type-infer-ref",value:e}):void 0;Fe({plugin:t,schema:r,schemaId:a,typeInferId:c,zodSchema:p});let m=V(e);i.updateNodeReferences(a,P({config:t.config.definitions,name:m})),c&&i.updateNodeReferences(c,P({config:t.config.definitions.types.infer,name:m}));},Ic=({plugin:e})=>{e.createFile({case:e.config.case,id:_,path:e.output}).import({alias:u.z.text,module:Er({plugin:e}),name:"*"}),e.forEach("operation","parameter","requestBody","schema","webhook",r=>{r.type==="operation"?Nr({getZodSchema:s=>gt({plugin:e,schema:s,state:{circularReferenceTracker:[],currentReferenceTracker:[],hasCircularReference:false}}),operation:r.operation,plugin:e}):r.type==="parameter"?Is({id:r.$ref,plugin:e,schema:r.parameter.schema}):r.type==="requestBody"?Is({id:r.$ref,plugin:e,schema:r.requestBody.schema}):r.type==="schema"?Is({id:r.$ref,plugin:e,schema:r.schema}):r.type==="webhook"&&jr({getZodSchema:s=>gt({plugin:e,schema:s,state:{circularReferenceTracker:[],currentReferenceTracker:[],hasCircularReference:false}}),operation:r.operation,plugin:e});});};var wu=({plugin:e,schema:t,state:r})=>{let s=n.propertyAccessExpression({expression:u.z,name:u.array}),o;if(!t.items)o=n.callExpression({functionName:s,parameters:[jo()]});else {t=Q({schema:t});let i=t.items.map(a=>ht({plugin:e,schema:a,state:r}).expression);i.length===1?o=n.callExpression({functionName:s,parameters:i}):(t.logicalOperator,o=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.array}),parameters:[n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.union}),parameters:[n.arrayLiteralExpression({elements:i})]})]}));}return t.minItems===t.maxItems&&t.minItems!==void 0?o=n.callExpression({functionName:n.propertyAccessExpression({expression:o,name:u.length}),parameters:[n.valueToExpression({value:t.minItems})]}):(t.minItems!==void 0&&(o=n.callExpression({functionName:n.propertyAccessExpression({expression:o,name:u.min}),parameters:[n.valueToExpression({value:t.minItems})]})),t.maxItems!==void 0&&(o=n.callExpression({functionName:n.propertyAccessExpression({expression:o,name:u.max}),parameters:[n.valueToExpression({value:t.maxItems})]}))),o},qu=({schema:e})=>typeof e.const=="boolean"?n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.literal}),parameters:[n.ots.boolean(e.const)]}):n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.boolean})}),$u=({schema:e})=>{let t=[],r=false;for(let o of e.items??[])o.type==="string"&&typeof o.const=="string"?t.push(n.stringLiteral({text:o.const})):(o.type==="null"||o.const===null)&&(r=true);if(!t.length)return jo();let s=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.enum}),parameters:[n.arrayLiteralExpression({elements:t,multiLine:false})]});return r&&(s=n.callExpression({functionName:n.propertyAccessExpression({expression:s,name:u.nullable})})),s},Fu=e=>n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.never})}),Mu=e=>n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.null})}),rn=({isBigInt:e,value:t})=>{let r=n.valueToExpression({value:t});return e&&(typeof t=="bigint"||typeof t=="number"||typeof t=="string"||typeof t=="boolean")?n.callExpression({functionName:"BigInt",parameters:[r]}):r},Lu=({schema:e})=>{let t=e.type==="integer"&&e.format==="int64";if(typeof e.const=="number")return n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.literal}),parameters:[n.ots.number(e.const)]});let r=n.callExpression({functionName:t?n.propertyAccessExpression({expression:n.propertyAccessExpression({expression:u.z,name:u.coerce}),name:u.bigint}):n.propertyAccessExpression({expression:u.z,name:u.number})});return !t&&e.type==="integer"&&(r=n.callExpression({functionName:n.propertyAccessExpression({expression:r,name:u.int})})),e.exclusiveMinimum!==void 0?r=n.callExpression({functionName:n.propertyAccessExpression({expression:r,name:u.gt}),parameters:[rn({isBigInt:t,value:e.exclusiveMinimum})]}):e.minimum!==void 0&&(r=n.callExpression({functionName:n.propertyAccessExpression({expression:r,name:u.gte}),parameters:[rn({isBigInt:t,value:e.minimum})]})),e.exclusiveMaximum!==void 0?r=n.callExpression({functionName:n.propertyAccessExpression({expression:r,name:u.lt}),parameters:[rn({isBigInt:t,value:e.exclusiveMaximum})]}):e.maximum!==void 0&&(r=n.callExpression({functionName:n.propertyAccessExpression({expression:r,name:u.lte}),parameters:[rn({isBigInt:t,value:e.maximum})]})),r},Du=({plugin:e,schema:t,state:r})=>{let s=[],o=t.required??[];for(let a in t.properties){let p=t.properties[a],c=o.includes(a),m=ht({optional:!c,plugin:e,schema:p,state:r}).expression;ne.lastIndex=0;let f;ne.test(a)?f=a.startsWith("-")?O__default.default.factory.createStringLiteral(a):O__default.default.factory.createNumericLiteral(a):f=a,(a.match(/^[0-9]/)&&a.match(/\D+/g)||a.match(/\W/g))&&!a.startsWith("'")&&!a.endsWith("'")&&(f=`'${a}'`),s.push(n.propertyAssignment({initializer:m,name:f}));}if(t.additionalProperties&&(!t.properties||!Object.keys(t.properties).length)){let a=ht({plugin:e,schema:t.additionalProperties,state:r}).expression;return {anyType:"AnyZodObject",expression:n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.record}),parameters:[a]})}}return {anyType:"AnyZodObject",expression:n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.object}),parameters:[O__default.default.factory.createObjectLiteralExpression(s,true)]})}},Vu=({plugin:e,schema:t})=>{if(typeof t.const=="string")return n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.literal}),parameters:[n.ots.string(t.const)]});let r=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.string})}),s=[];if(e.config.dates.offset&&s.push({key:"offset",value:true}),e.config.dates.local&&s.push({key:"local",value:true}),t.format)switch(t.format){case "date":r=n.callExpression({functionName:n.propertyAccessExpression({expression:r,name:u.date})});break;case "date-time":r=n.callExpression({functionName:n.propertyAccessExpression({expression:r,name:u.datetime}),parameters:s.length>0?[n.objectExpression({obj:s})]:[]});break;case "email":r=n.callExpression({functionName:n.propertyAccessExpression({expression:r,name:u.email})});break;case "ipv4":case "ipv6":r=n.callExpression({functionName:n.propertyAccessExpression({expression:r,name:u.ip})});break;case "time":r=n.callExpression({functionName:n.propertyAccessExpression({expression:r,name:u.time})});break;case "uri":r=n.callExpression({functionName:n.propertyAccessExpression({expression:r,name:u.url})});break;case "uuid":r=n.callExpression({functionName:n.propertyAccessExpression({expression:r,name:u.uuid})});break}return t.minLength===t.maxLength&&t.minLength!==void 0?r=n.callExpression({functionName:n.propertyAccessExpression({expression:r,name:u.length}),parameters:[n.valueToExpression({value:t.minLength})]}):(t.minLength!==void 0&&(r=n.callExpression({functionName:n.propertyAccessExpression({expression:r,name:u.min}),parameters:[n.valueToExpression({value:t.minLength})]})),t.maxLength!==void 0&&(r=n.callExpression({functionName:n.propertyAccessExpression({expression:r,name:u.max}),parameters:[n.valueToExpression({value:t.maxLength})]}))),t.pattern&&(r=n.callExpression({functionName:n.propertyAccessExpression({expression:r,name:u.regex}),parameters:[n.regularExpressionLiteral({text:t.pattern})]})),r},Bu=({plugin:e,schema:t,state:r})=>{if(t.const&&Array.isArray(t.const)){let i=t.const.map(p=>n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.literal}),parameters:[n.valueToExpression({value:p})]}));return n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.tuple}),parameters:[n.arrayLiteralExpression({elements:i})]})}let s=[];for(let i of t.items??[])s.push(ht({plugin:e,schema:i,state:r}).expression);return n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.tuple}),parameters:[n.arrayLiteralExpression({elements:s})]})},_u=e=>n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.undefined})}),jo=e=>n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.unknown})}),Ku=e=>n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.void})}),Pc=({plugin:e,schema:t,state:r})=>{switch(t.type){case "array":return {expression:wu({plugin:e,schema:t,state:r})};case "boolean":return {expression:qu({schema:t})};case "enum":return {expression:$u({schema:t})};case "integer":case "number":return {expression:Lu({schema:t})};case "never":return {expression:Fu()};case "null":return {expression:Mu()};case "object":return Du({plugin:e,schema:t,state:r});case "string":return {expression:Vu({plugin:e,schema:t})};case "tuple":return {expression:Bu({plugin:e,schema:t,state:r})};case "undefined":return {expression:_u()};case "unknown":return {expression:jo()};case "void":return {expression:Ku()}}},ht=({optional:e,plugin:t,schema:r,state:s})=>{let o=t.context.file({id:_}),i={};if(r.$ref){let a=s.circularReferenceTracker.includes(r.$ref);s.circularReferenceTracker.push(r.$ref),s.currentReferenceTracker.push(r.$ref);let p=t.api.getId({type:"ref",value:r.$ref});if(a){let c=o.addNodeReference(p,{factory:m=>n.identifier({text:m})});i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.lazy}),parameters:[n.arrowFunction({statements:[n.returnStatement({expression:c})]})]}),s.hasCircularReference=true;}else if(!o.getName(p)){let c=t.context.resolveIrRef(r.$ref);Ps({id:r.$ref,plugin:t,schema:c,state:s});}if(!a){let c=o.addNodeReference(p,{factory:m=>n.identifier({text:m})});i.expression=c;}s.circularReferenceTracker.pop(),s.currentReferenceTracker.pop();}else if(r.type){let a=Pc({plugin:t,schema:r,state:s});i.expression=a.expression,i.typeName=a.anyType,t.config.metadata&&r.description&&(i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:i.expression,name:u.describe}),parameters:[n.stringLiteral({text:r.description})]}));}else if(r.items)if(r=Q({schema:r}),r.items){let a=r.items.map(p=>ht({plugin:t,schema:p,state:s}).expression);if(r.logicalOperator==="and"){let p=r.items[0];p.logicalOperator==="or"||p.type&&p.type!=="object"?i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.intersection}),parameters:a}):(i.expression=a[0],a.slice(1).forEach(c=>{i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:i.expression,name:u.and}),parameters:[c]});}));}else i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.union}),parameters:[n.arrayLiteralExpression({elements:a})]});}else i=ht({plugin:t,schema:r,state:s});else {let a=Pc({plugin:t,schema:{type:"unknown"},state:s});i.expression=a.expression,i.typeName=a.anyType;}if(i.expression&&(r.accessScope==="read"&&(i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:i.expression,name:u.readonly})})),e&&(i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:i.expression,name:u.optional})})),r.default!==void 0)){let a=r.type==="integer"&&r.format==="int64",p=rn({isBigInt:a,value:r.default});p&&(i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:i.expression,name:u.default}),parameters:[p]}));}return s.hasCircularReference?i.typeName||(i.typeName="ZodTypeAny"):i.typeName=void 0,i},Ps=({id:e,plugin:t,schema:r,state:s})=>{s||(s={circularReferenceTracker:[e],currentReferenceTracker:[e],hasCircularReference:false});let o=t.context.file({id:_}),i=t.api.getId({type:"ref",value:e});if(o.getName(i))return;let a=ht({plugin:t,schema:r,state:s}),p=t.config.definitions.types.infer.enabled?t.api.getId({type:"type-infer-ref",value:e}):void 0;Fe({plugin:t,schema:r,schemaId:i,typeInferId:p,zodSchema:a});let c=V(e);o.updateNodeReferences(i,P({config:t.config.definitions,name:c})),p&&o.updateNodeReferences(p,P({config:t.config.definitions.types.infer,name:c}));},Ac=({plugin:e})=>{e.createFile({case:e.config.case,id:_,path:e.output}).import({module:Er({plugin:e}),name:u.z.text}),e.forEach("operation","parameter","requestBody","schema","webhook",r=>{r.type==="operation"?Nr({getZodSchema:s=>ht({plugin:e,schema:s,state:{circularReferenceTracker:[],currentReferenceTracker:[],hasCircularReference:false}}),operation:r.operation,plugin:e}):r.type==="parameter"?Ps({id:r.$ref,plugin:e,schema:r.parameter.schema}):r.type==="requestBody"?Ps({id:r.$ref,plugin:e,schema:r.requestBody.schema}):r.type==="schema"?Ps({id:r.$ref,plugin:e,schema:r.schema}):r.type==="webhook"&&jr({getZodSchema:s=>ht({plugin:e,schema:s,state:{circularReferenceTracker:[],currentReferenceTracker:[],hasCircularReference:false}}),operation:r.operation,plugin:e});});};var zu=({plugin:e,schema:t,state:r})=>{let s={},o=n.propertyAccessExpression({expression:u.z,name:u.array});if(!t.items)s.expression=n.callExpression({functionName:o,parameters:[Co().expression]});else {t=Q({schema:t});let i=t.items.map(a=>{let p=xt({plugin:e,schema:a,state:r});return p.hasCircularReference&&(s.hasCircularReference=true),p.expression});i.length===1?s.expression=n.callExpression({functionName:o,parameters:i}):(t.logicalOperator,s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.array}),parameters:[n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.union}),parameters:[n.arrayLiteralExpression({elements:i})]})]}));}return t.minItems===t.maxItems&&t.minItems!==void 0?s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:s.expression,name:u.length}),parameters:[n.valueToExpression({value:t.minItems})]}):(t.minItems!==void 0&&(s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:s.expression,name:u.min}),parameters:[n.valueToExpression({value:t.minItems})]})),t.maxItems!==void 0&&(s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:s.expression,name:u.max}),parameters:[n.valueToExpression({value:t.maxItems})]}))),s},Wu=({schema:e})=>{let t={};return typeof e.const=="boolean"?(t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.literal}),parameters:[n.ots.boolean(e.const)]}),t):(t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.boolean})}),t)},Hu=({schema:e})=>{let t={},r=[],s=false;for(let o of e.items??[])o.type==="string"&&typeof o.const=="string"?r.push(n.stringLiteral({text:o.const})):(o.type==="null"||o.const===null)&&(s=true);return r.length?(t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.enum}),parameters:[n.arrayLiteralExpression({elements:r,multiLine:false})]}),s&&(t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.nullable}),parameters:[t.expression]})),t):Co()},Qu=e=>{let t={};return t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.never})}),t},Uu=e=>{let t={};return t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.null})}),t},nn=({isBigInt:e,value:t})=>{let r=n.valueToExpression({value:t});return e&&(typeof t=="bigint"||typeof t=="number"||typeof t=="string"||typeof t=="boolean")?n.callExpression({functionName:"BigInt",parameters:[r]}):r},Zu=({schema:e})=>{let t={},r=e.type==="integer"&&e.format==="int64";return typeof e.const=="number"?(t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.literal}),parameters:[n.ots.number(e.const)]}),t):(t.expression=n.callExpression({functionName:r?n.propertyAccessExpression({expression:n.propertyAccessExpression({expression:u.z,name:u.coerce}),name:u.bigint}):n.propertyAccessExpression({expression:u.z,name:u.number})}),!r&&e.type==="integer"&&(t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.int})})),e.exclusiveMinimum!==void 0?t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:t.expression,name:u.gt}),parameters:[nn({isBigInt:r,value:e.exclusiveMinimum})]}):e.minimum!==void 0&&(t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:t.expression,name:u.gte}),parameters:[nn({isBigInt:r,value:e.minimum})]})),e.exclusiveMaximum!==void 0?t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:t.expression,name:u.lt}),parameters:[nn({isBigInt:r,value:e.exclusiveMaximum})]}):e.maximum!==void 0&&(t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:t.expression,name:u.lte}),parameters:[nn({isBigInt:r,value:e.maximum})]})),t)},Xu=({plugin:e,schema:t,state:r})=>{let s={},o=[],i=t.required??[];for(let a in t.properties){let p=t.properties[a],c=i.includes(a),m=xt({optional:!c,plugin:e,schema:p,state:r});m.hasCircularReference&&(s.hasCircularReference=true),ne.lastIndex=0;let f;ne.test(a)?f=a.startsWith("-")?O__default.default.factory.createStringLiteral(a):O__default.default.factory.createNumericLiteral(a):f=a,(a.match(/^[0-9]/)&&a.match(/\D+/g)||a.match(/\W/g))&&!a.startsWith("'")&&!a.endsWith("'")&&(f=`'${a}'`),m.hasCircularReference?o.push(n.getAccessorDeclaration({name:f,returnType:m.typeName?n.propertyAccessExpression({expression:u.z,name:m.typeName}):void 0,statements:[n.returnStatement({expression:m.expression})]})):o.push(n.propertyAssignment({initializer:m.expression,name:f}));}if(t.additionalProperties&&(!t.properties||!Object.keys(t.properties).length)){let a=xt({plugin:e,schema:t.additionalProperties,state:r});return s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.record}),parameters:[n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.string}),parameters:[]}),a.expression]}),a.hasCircularReference&&(s.hasCircularReference=true),s.hasCircularReference?{...s,typeName:"ZodType"}:s}return s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.object}),parameters:[O__default.default.factory.createObjectLiteralExpression(o,true)]}),s.hasCircularReference?{...s,typeName:"ZodType"}:s},Gu=({plugin:e,schema:t})=>{let r={};if(typeof t.const=="string")return r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.literal}),parameters:[n.ots.string(t.const)]}),r;r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.string})});let s=[];if(e.config.dates.offset&&s.push({key:"offset",value:true}),e.config.dates.local&&s.push({key:"local",value:true}),t.format)switch(t.format){case "date":r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:n.propertyAccessExpression({expression:u.z,name:u.iso}),name:u.date})});break;case "date-time":r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:n.propertyAccessExpression({expression:u.z,name:u.iso}),name:u.datetime}),parameters:s.length>0?[n.objectExpression({obj:s})]:[]});break;case "email":r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.email})});break;case "ipv4":r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.ipv4})});break;case "ipv6":r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.ipv6})});break;case "time":r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:n.propertyAccessExpression({expression:u.z,name:u.iso}),name:u.time})});break;case "uri":r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.url})});break;case "uuid":r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.uuid})});break}return t.minLength===t.maxLength&&t.minLength!==void 0?r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.expression,name:u.length}),parameters:[n.valueToExpression({value:t.minLength})]}):(t.minLength!==void 0&&(r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.expression,name:u.min}),parameters:[n.valueToExpression({value:t.minLength})]})),t.maxLength!==void 0&&(r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.expression,name:u.max}),parameters:[n.valueToExpression({value:t.maxLength})]}))),t.pattern&&(r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.expression,name:u.regex}),parameters:[n.regularExpressionLiteral({text:t.pattern})]})),r},Ju=({plugin:e,schema:t,state:r})=>{let s={};if(t.const&&Array.isArray(t.const)){let i=t.const.map(a=>n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.literal}),parameters:[n.valueToExpression({value:a})]}));return s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.tuple}),parameters:[n.arrayLiteralExpression({elements:i})]}),s}let o=[];for(let i of t.items??[]){let a=xt({plugin:e,schema:i,state:r});o.push(a.expression),a.hasCircularReference&&(s.hasCircularReference=true);}return s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.tuple}),parameters:[n.arrayLiteralExpression({elements:o})]}),s},Yu=e=>{let t={};return t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.undefined})}),t},Co=e=>{let t={};return t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.unknown})}),t},ey=e=>{let t={};return t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.void})}),t},Ec=({plugin:e,schema:t,state:r})=>{switch(t.type){case "array":return zu({plugin:e,schema:t,state:r});case "boolean":return Wu({schema:t});case "enum":return Hu({schema:t});case "integer":case "number":return Zu({schema:t});case "never":return Qu();case "null":return Uu();case "object":return Xu({plugin:e,schema:t,state:r});case "string":return Gu({plugin:e,schema:t});case "tuple":return Ju({plugin:e,schema:t,state:r});case "undefined":return Yu();case "unknown":return Co();case "void":return ey()}},xt=({optional:e,plugin:t,schema:r,state:s})=>{let o=t.context.file({id:_}),i={};if(r.$ref){let a=s.circularReferenceTracker.includes(r.$ref),p=s.currentReferenceTracker.includes(r.$ref);s.circularReferenceTracker.push(r.$ref),s.currentReferenceTracker.push(r.$ref);let c=t.api.getId({type:"ref",value:r.$ref});if(a){let m=o.addNodeReference(c,{factory:f=>n.identifier({text:f})});p?i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.lazy}),parameters:[n.arrowFunction({returnType:n.keywordTypeNode({keyword:"any"}),statements:[n.returnStatement({expression:m})]})]}):i.expression=m,i.hasCircularReference=true;}else if(!o.getName(c)){let m=t.context.resolveIrRef(r.$ref);As({id:r.$ref,plugin:t,schema:m,state:s});}if(!a){let m=o.addNodeReference(c,{factory:f=>n.identifier({text:f})});i.expression=m;}s.circularReferenceTracker.pop(),s.currentReferenceTracker.pop();}else if(r.type){let a=Ec({plugin:t,schema:r,state:s});i.expression=a.expression,i.hasCircularReference=a.hasCircularReference,t.config.metadata&&r.description&&(i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:i.expression,name:u.register}),parameters:[n.propertyAccessExpression({expression:u.z,name:u.globalRegistry}),n.objectExpression({obj:[{key:"description",value:n.stringLiteral({text:r.description})}]})]}));}else if(r.items)if(r=Q({schema:r}),r.items){let a=r.items.map(p=>xt({plugin:t,schema:p,state:s}).expression);if(r.logicalOperator==="and"){let p=r.items[0];p.logicalOperator==="or"||p.type&&p.type!=="object"?i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.intersection}),parameters:a}):(i.expression=a[0],a.slice(1).forEach(c=>{i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:i.expression,name:u.and}),parameters:[c]});}));}else i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.union}),parameters:[n.arrayLiteralExpression({elements:a})]});}else i=xt({plugin:t,schema:r,state:s});else {let a=Ec({plugin:t,schema:{type:"unknown"},state:s});i.expression=a.expression;}if(i.expression&&(r.accessScope==="read"&&(i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:i.expression,name:u.readonly})})),e&&(i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:u.z,name:u.optional}),parameters:[i.expression]}),i.typeName=u.ZodOptional),r.default!==void 0)){let a=r.type==="integer"&&r.format==="int64",p=nn({isBigInt:a,value:r.default});p&&(i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:i.expression,name:u.default}),parameters:[p]}));}return i},As=({id:e,plugin:t,schema:r,state:s})=>{let o={circularReferenceTracker:[e],hasCircularReference:false,...s,currentReferenceTracker:[e]},i=t.context.file({id:_}),a=t.api.getId({type:"ref",value:e});if(i.getName(a))return;let p=xt({plugin:t,schema:r,state:o}),c=t.config.definitions.types.infer.enabled?t.api.getId({type:"type-infer-ref",value:e}):void 0;Fe({plugin:t,schema:r,schemaId:a,typeInferId:c,zodSchema:p});let m=V(e);i.updateNodeReferences(a,P({config:t.config.definitions,name:m})),c&&i.updateNodeReferences(c,P({config:t.config.definitions.types.infer,name:m}));},vo=({plugin:e})=>{e.createFile({case:e.config.case,id:_,path:e.output}).import({module:Er({plugin:e}),name:u.z.text}),e.forEach("operation","parameter","requestBody","schema","webhook",r=>{switch(r.type){case "operation":Nr({getZodSchema:s=>xt({plugin:e,schema:s,state:{circularReferenceTracker:[],currentReferenceTracker:[],hasCircularReference:false}}),operation:r.operation,plugin:e});break;case "parameter":As({id:r.$ref,plugin:e,schema:r.parameter.schema});break;case "requestBody":As({id:r.$ref,plugin:e,schema:r.requestBody.schema});break;case "schema":As({id:r.$ref,plugin:e,schema:r.schema});break;case "webhook":jr({getZodSchema:s=>xt({plugin:e,schema:s,state:{circularReferenceTracker:[],currentReferenceTracker:[],hasCircularReference:false}}),operation:r.operation,plugin:e});break}});};var Nc=e=>{let{plugin:t}=e;switch(t.config.compatibilityVersion){case 3:return Ac(e);case 4:return vo(e);case "mini":return Ic(e);default:return vo(e)}};var Es={api:Tc,config:{case:"camelCase",comments:true,exportFromIndex:false,metadata:false},handler:Nc,name:"zod",output:"zod",resolveConfig:(e,t)=>{let s=t.package.getVersion("zod"),o=()=>s&&(s.major===4||s.major===3)?s.major:4,i=a=>{if(!a)return o();if(!s)return a;if((a===4||a===3||a==="mini")&&!t.package.satisfies(s,">=3.25.0 <5.0.0")){let p=o();return console.warn(`\u{1F50C} ${sn__default.default.yellow("Warning:")} Installed ${sn__default.default.cyan("zod")} ${sn__default.default.cyan(`v${s.version}`)} does not support compatibility version ${sn__default.default.yellow(String(a))}, using ${sn__default.default.yellow(String(p))}.`),p}return a};e.config.compatibilityVersion=i(e.config.compatibilityVersion),e.config.dates=t.valueToObject({defaultValue:{local:false,offset:false},value:e.config.dates}),e.config.types=t.valueToObject({defaultValue:{infer:{case:"PascalCase",enabled:false}},mappers:{object:(a,p)=>({...a,infer:t.valueToObject({defaultValue:{...p.infer,enabled:a.infer!==void 0?!!a.infer:p.infer.enabled},mappers:Me,value:a.infer})})},value:e.config.types}),e.config.definitions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"z{{name}}",types:{...e.config.types,infer:{...e.config.types.infer,name:"{{name}}ZodType"}}},mappers:{...Me,object:(a,p)=>({...a,types:t.valueToObject({defaultValue:p.types,mappers:{object:(c,m)=>({...c,infer:t.valueToObject({defaultValue:{...m.infer,enabled:c.infer!==void 0?!!c.infer:m.infer.enabled},mappers:Me,value:c.infer})})},value:a.types})})},value:e.config.definitions}),e.config.requests=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"z{{name}}Data",types:{...e.config.types,infer:{...e.config.types.infer,name:"{{name}}DataZodType"}}},mappers:{...Me,object:(a,p)=>({...a,types:t.valueToObject({defaultValue:p.types,mappers:{object:(c,m)=>({...c,infer:t.valueToObject({defaultValue:{...m.infer,enabled:c.infer!==void 0?!!c.infer:m.infer.enabled},mappers:Me,value:c.infer})})},value:a.types})})},value:e.config.requests}),e.config.responses=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"z{{name}}Response",types:{...e.config.types,infer:{...e.config.types.infer,name:"{{name}}ResponseZodType"}}},mappers:{...Me,object:(a,p)=>({...a,types:t.valueToObject({defaultValue:p.types,mappers:{object:(c,m)=>({...c,infer:t.valueToObject({defaultValue:{...m.infer,enabled:c.infer!==void 0?!!c.infer:m.infer.enabled},mappers:Me,value:c.infer})})},value:a.types})})},value:e.config.responses}),e.config.webhooks=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"z{{name}}WebhookRequest",types:{...e.config.types,infer:{...e.config.types.infer,name:"{{name}}WebhookRequestZodType"}}},mappers:{...Me,object:(a,p)=>({...a,types:t.valueToObject({defaultValue:p.types,mappers:{object:(c,m)=>({...c,infer:t.valueToObject({defaultValue:{...m.infer,enabled:c.infer!==void 0?!!c.infer:m.infer.enabled},mappers:Me,value:c.infer})})},value:a.types})})},value:e.config.webhooks});},tags:["validator"]};var Ns={"@angular/common":Ln,"@hey-api/client-angular":Dn,"@hey-api/client-axios":Vn,"@hey-api/client-fetch":Bn,"@hey-api/client-next":_n,"@hey-api/client-nuxt":Kn,"@hey-api/schemas":Xn,"@hey-api/sdk":Gn,"@hey-api/transformers":Yn,"@hey-api/typescript":rs,"@pinia/colada":as,"@tanstack/angular-query-experimental":gs,"@tanstack/react-query":hs,"@tanstack/solid-query":xs,"@tanstack/svelte-query":bs,"@tanstack/vue-query":Os,fastify:Ss,"legacy/angular":zn,"legacy/axios":Wn,"legacy/fetch":Hn,"legacy/node":Qn,"legacy/xhr":Un,valibot:Rs,zod:Es};var jc=["@hey-api/typescript","@hey-api/sdk"],ry=({dependencies:e,userPlugins:t,userPluginsConfig:r})=>{let s=new Set,o=new Set,i={},a=p=>{if(s.has(p))throw new Error(`Circular reference detected at '${p}'`);if(o.has(p))return;s.add(p);let c=Ns[p],m=r[p];if(!c&&!m)throw new Error(`unknown plugin dependency "${p}" - do you need to register a custom plugin with this name?`);let f={...c,...m,config:{...c?.config,...m?.config},dependencies:new Set([...c?.dependencies||[],...m?.dependencies||[]])};if(f.resolveConfig){let l={package:Rn(e),pluginByTag:(d,y={})=>{let{defaultPlugin:g,errorMessage:h}=y;for(let b of t){let S=Ns[b]||r[b];if(S&&S.tags?.includes(d)&&b!==p)return b}if(g){let b=Ns[g]||r[g];if(b&&b.tags?.includes(d)&&g!==p)return g}throw new Error(h||`missing plugin - no plugin with tag "${d}" found`)},valueToObject:$t};f.resolveConfig(f,l);}for(let l of f.dependencies)a(l);s.delete(p),o.add(p),i[p]=f;};for(let p of t)a(p);return {pluginOrder:Array.from(o),plugins:i}},ny=e=>typeof e=="string"?e.startsWith("@hey-api/client")||e.startsWith("legacy/"):e.name.startsWith("@hey-api/client")||e.name.startsWith("legacy/")||e.tags&&e.tags.includes("client"),kc=({dependencies:e,userConfig:t})=>{let r={},s=jc;t.plugins&&(t.plugins=t.plugins.filter(i=>typeof i=="string"&&i||typeof i!="string"&&i.name),t.plugins.length===1&&ny(t.plugins[0])?s=[...jc,...t.plugins]:s=t.plugins);let o=s.map(i=>{if(typeof i=="string")return i;let a=i.name;return a&&(i.handler?r[a]=i:(r[a]={config:{...i}},delete r[a].config.name)),a}).filter(Boolean);return ry({dependencies:e,userPlugins:o,userPluginsConfig:r})};var iy=async e=>{let t;if(e?.configFile){let p=e.configFile.split(".");t=p.slice(0,p.length-1).join(".");}let{config:r,configFile:s}=await c12.loadConfig({configFile:t,name:"openapi-ts"}),o=Ho(Object.keys(r).length?s:void 0),i=Array.isArray(e)?e:Array.isArray(r)?r.map(p=>vs(p,e)):[vs(r,e)],a=[];for(let p of i){let{base:c,configFile:m="",dryRun:f=false,experimentalParser:l=true,exportCore:d=true,interactive:y=false,name:g,request:h,useOptions:b=true}=p,S=[],C=Ko(p);C.level==="debug"&&console.warn("userConfig:",p);let F=_o(p),v=zo(p),L=Qo(p);F.path||S.push(new kr("missing input - which OpenAPI specification should we use to generate your output?")),v.path||S.push(new kr("missing output - where should we generate your output?")),b||console.warn("\u2757\uFE0F Deprecation warning: useOptions set to false. This setting will be removed in future versions. Please migrate useOptions to true https://heyapi.dev/openapi-ts/migrating.html#v0-27-38"),v.path=cr__default.default.resolve(process.cwd(),v.path);let Z;try{Z=kc({dependencies:o,userConfig:p});}catch(X){S.push(X),Z={pluginOrder:[],plugins:{}};}let D=Mo({...Z,base:c,configFile:m,dryRun:f,experimentalParser:l,exportCore:false,input:F,interactive:y,logs:C,name:g,output:v,parser:L,request:h,useOptions:b});D.exportCore=re(D)?d:false,C.level==="debug"&&console.warn("config:",D),a.push({config:D,errors:S});}return {dependencies:o,results:a}};var js=(...e)=>{let t=new Headers;for(let r of e){if(!r||typeof r!="object")continue;let s=r instanceof Headers?r.entries():Object.entries(r);for(let[o,i]of s)if(i===null)t.delete(o);else if(Array.isArray(i))for(let a of i)t.append(o,a);else i!==void 0&&t.set(o,typeof i=="object"?JSON.stringify(i):i);}return t};var gy=async({fetchOptions:e,inputPath:t,timeout:r,watch:s})=>{let o=new jsonSchemaRefParser.$RefParser,i=jsonSchemaRefParser.getResolvedInput({pathOrUrlOrSchema:t}),a,p,c;if(i.type==="url"){if(s.lastValue&&s.isHeadMethodSupported!==false){try{let f=await jsonSchemaRefParser.sendRequest({fetchOptions:{method:"HEAD",...e,headers:js(e?.headers,s.headers)},timeout:r,url:i.path});if(f.response.status>=300)return {error:"not-ok",response:f.response};c=f.response;}catch(f){return {error:"not-ok",response:new Response(f.message)}}if(!c.ok&&s.isHeadMethodSupported)return {error:"not-ok",response:c};if(s.isHeadMethodSupported===void 0&&(s.isHeadMethodSupported=c.ok),c.status===304)return {error:"not-modified",response:c};if(p===void 0){let f=c.headers.get("ETag");f&&(p=f!==s.headers.get("If-None-Match"),p&&s.headers.set("If-None-Match",f));}if(p===void 0){let f=c.headers.get("Last-Modified");f&&(p=f!==s.headers.get("If-Modified-Since"),p&&s.headers.set("If-Modified-Since",f));}if(p===false)return {error:"not-modified",response:c}}try{let f=await jsonSchemaRefParser.sendRequest({fetchOptions:{method:"GET",...e},timeout:r,url:i.path});if(f.response.status>=300)return {error:"not-ok",response:f.response};c=f.response;}catch(f){return {error:"not-ok",response:new Response(f.message)}}if(!c.ok)return {error:"not-ok",response:c};if(a=c.body?await c.arrayBuffer():new ArrayBuffer(0),p===void 0){let f=new TextDecoder().decode(a);p=f!==s.lastValue,s.lastValue=f;}}else s.lastValue?p=false:s.lastValue=i.type;return p===false?{error:"not-modified",response:c}:{data:await o.bundle({arrayBuffer:a,pathOrUrlOrSchema:void 0,resolvedInput:i})}};
exports.getSpec=gy;exports.initConfigs=iy;exports.parseOpenApiSpec=wl;//# sourceMappingURL=internal.cjs.map
//# sourceMappingURL=internal.cjs.map